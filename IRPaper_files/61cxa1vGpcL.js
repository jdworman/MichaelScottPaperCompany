(function(y){var n=window.AmazonUIPageJS||window.P,T=n._namespace||n.attributeErrors,D=T?T("VSERelatedVideosClientAssets",""):n;D.guardFatal?D.guardFatal(y)(D,window):D.execute(function(){y(D,window)})})(function(y,n,T){(function(){function D(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})}function T(a,b,c){void 0===c&&(c="airyContainer");return'\x3cbody style\x3d"width:100%; height:100%; margin:0px;"\x3e\n    \x3cdiv id\x3d"'+
c+'" style\x3d"width:100%; height:100%"\x3e\x3c/div\x3e\n    \x3cscript crossorigin\x3d"anonymous"  src\x3d"'+a+'" onload\x3d"parent[\''+b+"'].resolve(Airy)\" onerror\x3d\"parent['"+b+"'].reject(event)\"\x3e\x3c/script\x3e\n    \x3c/body\x3e"}function Ib(a,b,c,d){void 0===d&&(d="airyContainer");return'\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+b+'" /\x3e\n    \x3cbody style\x3d"width:100%; height:100%; margin:0px;"\x3e\n    \x3cdiv id\x3d"'+d+'" style\x3d"width:100%; height:100%"\x3e\x3c/div\x3e\n    \x3cscript crossorigin\x3d"anonymous"  src\x3d"'+
a+'" onload\x3d"parent[\''+c+"'].resolve(Airy);\" onerror\x3d\"parent['"+c+"'].reject(event)\"\x3e\x3c/script\x3e\n    \x3c/body\x3e"}function Fa(){var a=document.createElement("iframe");a.className="vse-airy-container-frame";a.setAttribute("frameborder","0");a.setAttribute("scrolling","0");a.setAttribute("allowfullscreen","true");a.setAttribute("mozallowfullscreen","true");a.setAttribute("webkitallowfullscreen","true");return a}function Ga(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=
b(a[c],c,a);return e}function Ha(a,b){return a===b||a!==a&&b!==b}function aa(a,b){for(var c=a.length;c--;)if(Ha(a[c][0],b))return c;return-1}function E(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function O(a){if(null==a)return void 0===a?"[object Undefined]":"[object Null]";if(Ia&&Ia in Object(a)){var b=Jb.call(a,U),c=a[U];try{a[U]=void 0;var d=!0}catch(f){}var e=Kb.call(a);d&&(b?a[U]=c:delete a[U]);a=e}else a=Lb.call(a);return a}function H(a){var b=
typeof a;return null!=a&&("object"==b||"function"==b)}function Ja(a){if(!H(a))return!1;a=O(a);return"[object Function]"==a||"[object GeneratorFunction]"==a||"[object AsyncFunction]"==a||"[object Proxy]"==a}function F(a){if(null!=a){try{return Mb.call(a)}catch(b){}return a+""}return""}function I(a,b){a=null==a?void 0:a[b];b=!H(a)||Ka&&Ka in a?!1:(Ja(a)?Nb:Ob).test(F(a));return b?a:void 0}function J(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function ba(a,
b){a=a.__data__;var c=typeof b;return("string"==c||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==b:null===b)?a["string"==typeof b?"string":"hash"]:a.map}function K(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function C(a){this.size=(this.__data__=new E(a)).size}function ca(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new K;++b<c;)this.add(a[b])}function Pb(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function La(a,
b,c,d,e,f){var g=c&1,h=a.length,k=b.length;if(h!=k&&!(g&&k>h))return!1;if((k=f.get(a))&&f.get(b))return k==b;var k=-1,q=!0,l=c&2?new ca:void 0;f.set(a,b);for(f.set(b,a);++k<h;){var m=a[k],p=b[k];if(d)var n=g?d(p,m,k,b,a,f):d(m,p,k,a,b,f);if(void 0!==n){if(n)continue;q=!1;break}if(l){if(!Pb(b,function(b,a){if(!l.has(a)&&(m===b||e(m,b,c,d,f)))return l.push(a)})){q=!1;break}}else if(m!==p&&!e(m,p,c,d,f)){q=!1;break}}f["delete"](a);f["delete"](b);return q}function Qb(a){var b=-1,c=Array(a.size);a.forEach(function(a,
e){c[++b]=[e,a]});return c}function Rb(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=a});return c}function Sb(a,b,c,d,e,f,g){switch(c){case "[object DataView]":if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)break;a=a.buffer;b=b.buffer;case "[object ArrayBuffer]":if(a.byteLength!=b.byteLength||!f(new Ma(a),new Ma(b)))break;return!0;case "[object Boolean]":case "[object Date]":case "[object Number]":return Ha(+a,+b);case "[object Error]":return a.name==b.name&&a.message==b.message;
case "[object RegExp]":case "[object String]":return a==b+"";case "[object Map]":var h=Qb;case "[object Set]":h||(h=Rb);if(a.size!=b.size&&!(d&1))break;if(c=g.get(a))return c==b;d|=2;g.set(a,b);b=La(h(a),h(b),d,e,f,g);g["delete"](a);return b;case "[object Symbol]":if(la)return la.call(a)==la.call(b)}return!1}function Na(a,b,c){b=b(a);if(!w(a)){a=c(a);c=-1;for(var d=a.length,e=b.length;++c<d;)b[e+c]=a[c]}return b}function Tb(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,
a)&&(f[e++]=g)}return f}function Ub(){return[]}function M(a){return null!=a&&"object"==typeof a}function Oa(a){return M(a)&&"[object Arguments]"==O(a)}function Vb(){return!1}function ma(a,b){b=null==b?9007199254740991:b;return!!b&&("number"==typeof a||Wb.test(a))&&-1<a&&0==a%1&&a<b}function na(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}function Xb(a){return M(a)&&na(a.length)&&!!r[O(a)]}function Yb(a){return function(b){return a(b)}}function oa(a){return null!=a&&na(a.length)&&
!Ja(a)}function da(a){if(oa(a)){var b=w(a),c=!b&&Pa(a),d=!b&&!c&&pa(a),e=!b&&!c&&!d&&Qa(a);if(b=b||c||d||e){for(var c=a.length,f=String,g=-1,h=Array(c);++g<c;)h[g]=f(g);c=h}else c=[];var f=c.length,k;for(k in a)!Zb.call(a,k)||b&&("length"==k||d&&("offset"==k||"parent"==k)||e&&("buffer"==k||"byteLength"==k||"byteOffset"==k)||ma(k,f))||c.push(k);a=c}else if(k=a&&a.constructor,a===("function"==typeof k&&k.prototype||$b)){k=[];for(d in Object(a))ac.call(a,d)&&"constructor"!=d&&k.push(d);a=k}else a=bc(a);
return a}function P(a,b,c,d,e){if(a===b)return!0;if(null==a||null==b||!M(a)&&!M(b))return a!==a&&b!==b;a:{var f=w(a),g=w(b),h=f?"[object Array]":Ra(a),k=g?"[object Array]":Ra(b),h="[object Arguments]"==h?"[object Object]":h,k="[object Arguments]"==k?"[object Object]":k,q="[object Object]"==h,g="[object Object]"==k;if((k=h==k)&&pa(a)){if(!pa(b)){b=!1;break a}f=!0;q=!1}if(k&&!q)e||(e=new C),b=f||Qa(a)?La(a,b,c,d,P,e):Sb(a,b,h,c,d,P,e);else{if(!(c&1)&&(f=q&&Sa.call(a,"__wrapped__"),h=g&&Sa.call(b,"__wrapped__"),
f||h)){a=f?a.value():a;b=h?b.value():b;e||(e=new C);b=P(a,b,c,d,e);break a}if(k)b:if(e||(e=new C),f=c&1,h=Na(a,da,Ta),g=h.length,k=Na(b,da,Ta).length,g==k||f){for(q=g;q--;){var l=h[q];if(!(f?l in b:cc.call(b,l))){b=!1;break b}}if((k=e.get(a))&&e.get(b))b=k==b;else{k=!0;e.set(a,b);e.set(b,a);for(var m=f;++q<g;){var l=h[q],p=a[l],n=b[l];if(d)var A=f?d(n,p,l,b,a,e):d(p,n,l,a,b,e);if(void 0===A?p!==n&&!P(p,n,c,d,e):!A){k=!1;break}m||(m="constructor"==l)}k&&!m&&(c=a.constructor,d=b.constructor,c!=d&&"constructor"in
a&&"constructor"in b&&!("function"==typeof c&&c instanceof c&&"function"==typeof d&&d instanceof d)&&(k=!1));e["delete"](a);e["delete"](b);b=k}}else b=!1;else b=!1}}return b}function dc(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=Object(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){var h=c[e],k=h[0],q=a[k],l=h[1];if(g&&h[2]){if(void 0===q&&!(k in a))return!1}else{h=new C;if(d)var m=d(q,l,k,a,b,h);if(void 0===m?!P(l,q,3,d,h):!m)return!1}}return!0}function ec(a){for(var b=
da(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,e===e&&!H(e)]}return b}function Ua(a,b){return function(c){return null==c?!1:c[a]===b&&(void 0!==b||a in Object(c))}}function fc(a){var b=ec(a);return 1==b.length&&b[0][2]?Ua(b[0][0],b[0][1]):function(c){return c===a||dc(c,a,b)}}function ea(a){return"symbol"==typeof a||M(a)&&"[object Symbol]"==O(a)}function qa(a,b){if(w(a))return!1;var c=typeof a;return"number"==c||"symbol"==c||"boolean"==c||null==a||ea(a)?!0:gc.test(a)||!hc.test(a)||null!=b&&a in
Object(b)}function ra(a,b){if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new TypeError("Expected a function");var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);d=a.apply(this,d);c.cache=f.set(e,d)||f;return d};c.cache=new (ra.Cache||K);return c}function Va(a){if("string"==typeof a)return a;if(w(a))return Ga(a,Va)+"";if(ea(a))return Wa?Wa.call(a):"";var b=a+"";return"0"==b&&1/a==-ic?"-0":b}function Xa(a,b){return w(a)?a:qa(a,b)?[a]:jc(null==
a?"":Va(a))}function fa(a){if("string"==typeof a||ea(a))return a;var b=a+"";return"0"==b&&1/a==-kc?"-0":b}function Ya(a,b){b=Xa(b,a);for(var c=0,d=b.length;null!=a&&c<d;)a=a[fa(b[c++])];return c&&c==d?a:void 0}function lc(a,b){return qa(a)&&b===b&&!H(b)?Ua(fa(a),b):function(c){var d;d=null==c?void 0:Ya(c,a);d=void 0===d?void 0:d;var e;if(void 0===d&&d===b){if(d=null!=c){d=a;d=Xa(d,c);for(var f=-1,g=d.length,h=!1;++f<g;){e=fa(d[f]);if(!(h=null!=c&&null!=c&&e in Object(c)))break;c=c[e]}h||++f!=g?d=
h:(g=null==c?0:c.length,d=!!g&&na(g)&&ma(e,g)&&(w(c)||Pa(c)))}e=d}else e=P(b,d,3);return e}}function ga(a){return a}function mc(a){return function(b){return null==b?void 0:b[a]}}function nc(a){return function(b){return Ya(b,a)}}function Za(a){return"function"==typeof a?a:null==a?ga:"object"==typeof a?w(a)?lc(a[0],a[1]):fc(a):qa(a)?mc(fa(a)):nc(a)}function oc(a,b){var c=-1,d=oa(a)?Array(a.length):[];$a(a,function(a,f,g){d[++c]=b(a,f,g)});return d}function pc(a,b){return(w(a)?Ga:oc)(a,Za(b,3))}function sa(a,
b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function qc(a,b,c){b=ab(void 0===b?a.length-1:b,0);return function(){for(var d=arguments,e=-1,f=ab(d.length-b,0),g=Array(f);++e<f;)g[e]=d[b+e];e=-1;for(f=Array(b+1);++e<b;)f[e]=d[e];f[b]=c(g);return sa(a,this,f)}}function rc(a){return function(){return a}}function bb(a){var b=0,c=0;return function(){var d=sc(),e=16-(d-c);c=d;if(0<e){if(800<=
++b)return arguments[0]}else b=0;return a.apply(void 0,arguments)}}function V(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=ta(a.prototype),b=a.apply(c,b);return H(b)?b:c}}function tc(a,
b,c){function d(){return(this&&this!==x&&this instanceof d?f:a).apply(e?c:this,arguments)}var e=b&1,f=V(a);return d}function cb(a,b,c,d){var e=-1,f=a.length,g=c.length,h=-1,k=b.length,q=uc(f-g,0),l=Array(k+q);for(d=!d;++h<k;)l[h]=b[h];for(;++e<g;)if(d||e<f)l[c[e]]=a[e];for(;q--;)l[h++]=a[e++];return l}function db(a,b,c,d){var e=-1,f=a.length,g=-1,h=c.length,k=-1,q=b.length,l=vc(f-h,0),m=Array(l+q);for(d=!d;++e<l;)m[e]=a[e];for(l=e;++k<q;)m[l+k]=b[k];for(;++g<h;)if(d||e<f)m[l+c[g]]=a[e++];return m}
function ua(){}function Q(a){this.__wrapped__=a;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=4294967295;this.__views__=[]}function wc(){}function R(a,b){this.__wrapped__=a;this.__actions__=[];this.__chain__=!!b;this.__index__=0;this.__values__=void 0}function eb(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function ha(a){if(M(a)&&!w(a)&&!(a instanceof Q)){if(a instanceof R)return a;if(xc.call(a,"__wrapped__")){if(a instanceof
Q)a=a.clone();else{var b=new R(a.__wrapped__,a.__chain__);b.__actions__=eb(a.__actions__);b.__index__=a.__index__;b.__values__=a.__values__;a=b}return a}}return new R(a)}function yc(a,b){for(var c=-1,d=null==a?0:a.length;++c<d&&!1!==b(a[c],c,a););return a}function zc(a,b){yc(Ac,function(c){var d="_."+c[0];if(c=b&c[1]){if(c=null==a?0:a.length){if(d===d)a:{c=-1;for(var e=a.length;++c<e;)if(a[c]===d)break a;c=-1}else a:{c=a.length;for(e=-1;++e<c;){var f=a[e];if(f!==f){c=e;break a}}c=-1}c=-1<c}c=!c}c&&
a.push(d)});return a.sort()}function fb(a,b,c){b+="";var d;d=(d=b.match(Bc))?d[1].split(Cc):[];c=zc(d,c);if(d=c.length){var e=d-1;c[e]=(1<d?"\x26 ":"")+c[e];c=c.join(2<d?", ":" ");b=b.replace(Dc,"{\n/* [wrapped with "+c+"] */\n")}return gb(a,b)}function hb(a,b,c,d,e,f,g,h,k,q){var l=b&8;b=(b|(l?32:64))&~(l?64:32);b&4||(b&=-4);e=[a,b,e,l?f:void 0,l?g:void 0,l?void 0:f,l?void 0:g,h,k,q];c=c.apply(void 0,e);b:for(f=a.name+"",g=ib[f],h=Ec.call(ib,f)?g.length:0;h--;)if(k=g[h],q=k.func,null==q||q==a){f=
k.name;break b}g=ha[f];"function"==typeof g&&f in Q.prototype?a===g?f=!0:(f=jb(g),f=!!f&&a===f[0]):f=!1;f&&kb(c,e);c.placeholder=d;return fb(c,a,b)}function W(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];if(g===b||"__lodash_placeholder__"===g)a[c]="__lodash_placeholder__",f[e++]=c}return f}function va(a,b,c,d,e,f,g,h,k,q){function l(){for(var B=arguments.length,z=Array(B),t=B;t--;)z[t]=arguments[t];if(A){var u=l.placeholder,S,t=z.length;for(S=0;t--;)z[t]===u&&++S}d&&(z=cb(z,d,e,A));f&&
(z=db(z,f,g,A));B-=S;if(A&&B<q)return u=W(z,u),hb(a,b,va,l.placeholder,c,z,u,h,k,q-B);u=p?c:this;t=n?u[a]:a;B=z.length;if(h){S=z.length;for(var wa=Fc(h.length,S),y=eb(z);wa--;){var w=h[wa];z[wa]=ma(w,S)?y[w]:void 0}}else v&&1<B&&z.reverse();m&&k<B&&(z.length=k);this&&this!==x&&this instanceof l&&(t=r||V(t));return t.apply(u,z)}var m=b&128,p=b&1,n=b&2,A=b&24,v=b&512,r=n?void 0:V(a);return l}function Gc(a,b,c){function d(){for(var f=arguments.length,g=Array(f),h=f,k=d.placeholder;h--;)g[h]=arguments[h];
h=3>f&&g[0]!==k&&g[f-1]!==k?[]:W(g,k);f-=h.length;return f<c?hb(a,b,va,d.placeholder,void 0,g,h,void 0,void 0,c-f):sa(this&&this!==x&&this instanceof d?e:a,this,g)}var e=V(a);return d}function Hc(a,b,c,d){function e(){for(var b=-1,k=arguments.length,q=-1,l=d.length,m=Array(l+k),p=this&&this!==x&&this instanceof e?g:a;++q<l;)m[q]=d[q];for(;k--;)m[q++]=arguments[++b];return sa(p,f?c:this,m)}var f=b&1,g=V(a);return e}function Ic(a){if("number"==typeof a)return a;if(ea(a))return lb;H(a)&&(a="function"==
typeof a.valueOf?a.valueOf():a,a=H(a)?a+"":a);if("string"!=typeof a)return 0===a?a:+a;a=a.replace(Jc,"");var b=Kc.test(a);return b||Lc.test(a)?Mc(a.slice(2),b?2:8):Nc.test(a)?lb:+a}function mb(a){a?(a=Ic(a),a=a===nb||a===-nb?1.7976931348623157E308*(0>a?-1:1):a===a?a:0):a=0===a?a:0;var b=a%1;return a===a?b?a-b:a:0}function Oc(a,b,c,d){for(var e=-1,f=null==a?0:a.length;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function Pc(a,b,c,d){$a(a,function(a,f,g){b(d,a,c(a),g)});return d}var ob={queueComplete:!0},
xa=function(){function a(b,a,d){var e=this;this.player=b;this.frame=a;this.assets=[];this.currentIndex=0;this.eventEmitter=new d.EventEmitter;this.player.on("playbackComplete",function(){e.currentIndex++;e.doPlay()})}a.prototype.play=function(b){b?this.player.play(b):this.player.play();return this};a.prototype.resume=function(b){this.player.resume(b);return this};a.prototype.pause=function(){this.player.pause();return this};a.prototype.next=function(){this.player.stop();this.doPlay();return this};
a.prototype.previous=function(){this.player.stop();this.currentIndex--;this.doPlay();return this};a.prototype.seek=function(b){this.player.seek(b);return this};a.prototype.enqueue=function(b,a){void 0===a&&(a=this.assets.length);b instanceof Array?(b=b.slice(),b.splice(0,0,this.assets),Array.prototype.splice.apply(this.assets,b)):this.assets.splice(a,0,b);return this};a.prototype.dequeue=function(b){var a=this,d;if("number"===typeof b)d=[b];else if(b instanceof Array){var e=b.map(function(b){return b.contentId});
d=this.assets.map(function(b){return e.indexOf(b.contentId)}).filter(function(b){-1!=b})}else d=[this.assets.map(function(b,a){return a}).filter(function(d){a.assets[d].contentId==b.contentId})[0]];for(var f=0,g=d.length;f<g;f++)this.assets.splice(d[f],1);return this};a.prototype.on=function(b,a){if(ob.hasOwnProperty(b))this.eventEmitter.on(b,a);else this.player.on(b,a);return this};a.prototype.off=function(b,a){ob.hasOwnProperty(b)?this.eventEmitter.off(b,a):this.player.off(b,a);return this};a.prototype.onTime=
function(b,a,d){this.player.onTime(b,a,d);return this};a.prototype.offTime=function(b,a,d){this.player.offTime(b,a,d);return this};a.prototype.onAd=function(b,a){this.player.onAd(b,a);return this};a.prototype.offAd=function(b,a){this.player.offAd(b,a);return this};a.prototype.show=function(){return this};a.prototype.hide=function(){return this};a.prototype.getAssets=function(){return this.assets};a.prototype.getCurrentAssetIndex=function(){return this.currentIndex-1};a.prototype.getPosition=function(){return this.player.getPosition()};
a.prototype.isPlaying=function(){return this.player.isPlaying()};a.prototype.isPaused=function(){return this.player.isPaused()};a.prototype.getVersion=function(){return this.player.getVersion()};a.prototype.getFlashVersion=function(){return this.player.getFlashVersion()};a.prototype.getRendererType=function(){return this.player.getRendererType()};a.prototype.destroy=function(){var b=this;this.player.destroy();this.frame.style.display="none";setTimeout(function(){b.frame.parentNode.removeChild(b.frame)},
500)};a.prototype.doPlay=function(){var b=this.player.getCurrent();b?this.assets[this.currentIndex].contentId==b.contentId?this.player.play():this.player.play(this.assets[this.currentIndex]):this.assets[this.currentIndex]&&this.player.play(this.assets[this.currentIndex])};return a}(),ya=function(){function a(b,a){var d=this;this.libs=a;this.commands=[];b.then(function(b){d.playerInstance=b;d.executeCommands()})}a.prototype.executeCommands=function(){for(var b=0;b<this.commands.length;b++)this.commands[b](this.playerInstance)};
a.prototype.play=function(b){this.playerInstance?this._play(b,this.playerInstance):this.commands.push(this.libs._partial(this._play,b));return this};a.prototype.pause=function(){this.playerInstance?this._pause(this.playerInstance):this.commands.push(this._pause);return this};a.prototype.resume=function(b){this.playerInstance?this._resume(this.playerInstance,b):this.commands.push(this.libs._partial(this.pause,b));return this};a.prototype.stop=function(){this.playerInstance?this._stop(this.playerInstance):
this.commands.push(this._stop);return this};a.prototype.seek=function(b){this.playerInstance?this._seek(b,this.playerInstance):this.commands.push(this.libs._partial(this._seek,b));return this};a.prototype.on=function(b,a){this.playerInstance?this._on(b,a,this.playerInstance):this.commands.push(this.libs._partial(this._on,b,a));return this};a.prototype.off=function(b,a){this.playerInstance?this._off(b,a,this.playerInstance):this.commands.push(this.libs._partial(this._off,b,a));return this};a.prototype.onTime=
function(b,a,d){this.playerInstance?this._onTime(b,a,d,this.playerInstance):this.commands.push(this.libs._partial(this._onTime,b,a,d));return this};a.prototype.offTime=function(b,a,d){this.playerInstance?this._offTime(b,a,d,this.playerInstance):this.commands.push(this.libs._partial(this._offTime,b,a,d));return this};a.prototype.onAd=function(b,a){this.playerInstance?this._onAd(b,a,this.playerInstance):this.commands.push(this.libs._partial(this._onAd,b,a));return this};a.prototype.offAd=function(b,
a){this.playerInstance?this._offAd(b,a,this.playerInstance):this.commands.push(this.libs._partial(this._offAd,b,a));return this};a.prototype.getCurrent=function(){if(this.playerInstance)return this.playerInstance.getCurrent()};a.prototype.getPosition=function(){return this.playerInstance?this.playerInstance.getPosition():0};a.prototype.isPlaying=function(){return this.playerInstance?this.playerInstance.isPlaying():!1};a.prototype.isPaused=function(){return this.playerInstance?this.playerInstance.isPaused():
!1};a.prototype.getVersion=function(){return this.playerInstance?this.playerInstance.getVersion():""};a.prototype.getFlashVersion=function(){return this.playerInstance?this.playerInstance.getFlashVersion():""};a.prototype.getRendererType=function(){return this.playerInstance?this.playerInstance.getRendererType():""};a.prototype.destroy=function(){this.playerInstance&&this.playerInstance.destroy();this.playerInstance=null};a.prototype._play=function(b,a){b?a.play(b):a.play()};a.prototype._pause=function(b){b.pause()};
a.prototype._stop=function(b){b.stop()};a.prototype._resume=function(b,a){b.resume(a)};a.prototype._seek=function(b,a){a.seek(b)};a.prototype._on=function(b,a,d){d.on(b,a)};a.prototype._off=function(b,a,d){d.off(b,a)};a.prototype._onTime=function(b,a,d,e){e.onTime(b,a,d)};a.prototype._offTime=function(b,a,d,e){e.offTime(b,a,d)};a.prototype._onAd=function(b,a,d){d.onAd(b,a)};a.prototype._offAd=function(b,a,d){d.offAd(b,a)};a.prototype._destroy=function(b){b.destroy()};return a}(),Qc=function(){function a(b,
a,d,e){var f=this;this.libs=e;this.isFullScreen=!1;this.eventEmitter=new e.EventEmitter;this.currentAsset=d;this.initHandlers();a.bindings={ended:function(){return f.eventHandlers.onPlaybackComplete()},playing:function(){return f.eventHandlers.onPlaybackStart()},screenchange:function(){return f.eventHandlers.onScreenChange()},fullscreen:function(){return f.eventHandlers.onFullScreen()}};this.airy=b.embed(a);this.eventEmitter.emit("playerLoaded")}a.prototype.play=function(b){!b||this.currentAsset&&
b.contentId==this.currentAsset.contentId||(b.eventTimestamp||(b.eventTimestamp=Date.now()),this.airy.loadMedia({mediaSourceInfo:[b.videoUrl],contentId:b.contentId,vendorCode:b.vendorCode,eventTimestamp:b.eventTimestamp,slateImages:{preloadSlate:b.imageUrl?b.imageUrl:""}}),this.currentAsset=b);b?this.airy.play({eventTimestamp:b.eventTimestamp,isAsync:!0,contentId:b.contentId}):this.airy.play({isAsync:!0,contentId:this.currentAsset.contentId});return this};a.prototype.pause=function(){this.airy.pause();
return this};a.prototype.resume=function(b){b?this.airy.play({eventTimestamp:b,isAsync:!0}):this.airy.play({isAsync:!0});return this};a.prototype.stop=function(){this.airy.pause();this.currentAsset=void 0;return this};a.prototype.seek=function(b){this.airy.seek(b);return this};a.prototype.on=function(b,a){this.eventEmitter.on(b,a);return this};a.prototype.off=function(b,a){return this};a.prototype.onTime=function(b,a,d){return this};a.prototype.offTime=function(b,a,d){return this};a.prototype.onAd=
function(b,a){return this};a.prototype.offAd=function(b,a){return this};a.prototype.getCurrent=function(){return this.currentAsset};a.prototype.getPosition=function(){return 0};a.prototype.isPlaying=function(){return this.airy.isPlaying()};a.prototype.isPaused=function(){return!this.airy.isPlaying()};a.prototype.getVersion=function(){return"2"};a.prototype.getFlashVersion=function(){return""};a.prototype.getRendererType=function(){return this.airy.getRendererType()};a.prototype.destroy=function(){this.airy.detach();
this.airy.unbind("ended",this.eventHandlers.onPlaybackComplete);this.airy.unbind("playing",this.eventHandlers.onPlaybackStart);this.airy.unbind("screenchange",this.eventHandlers.onScreenChange);this.airy.unbind("fullscreen",this.eventHandlers.onFullScreen);this.airy=null};a.prototype.initHandlers=function(){var b=this;this.eventHandlers={onPlaybackComplete:function(){return b.player_onPlaybackComplete()},onPlaybackStart:function(){return b.player_onPlaybackStart()},onScreenChange:function(){return b.player_onScreenChange()},
onFullScreen:function(){return b.player_onFullScreen()}}};a.prototype.player_onPlaybackComplete=function(){var b=this.currentAsset;this.currentAsset=void 0;b&&(b.eventTimestamp=Date.now());this.eventEmitter.emit("playbackComplete",b)};a.prototype.player_onPlaybackStart=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());this.eventEmitter.emit("playbackStart",this.currentAsset)};a.prototype.player_onScreenChange=function(){this.eventEmitter.emit("playerFullScreen",this.isFullScreen);
this.isFullScreen=!1};a.prototype.player_onFullScreen=function(){this.isFullScreen=!0};a.prototype.player_onPlaybackPause=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());this.eventEmitter.emit("playbackPause",this.currentAsset)};return a}(),pb=function(){function a(){}a.prototype.createAiry2Frame=function(b){var a=Fa();b.container.appendChild(a);a.onload=function(){a.onload=null;a.contentWindow.document.open();a.contentWindow.document.write(Ib(b.airyScriptUrl,b.airyStyleUrl,
b.promiseName,"airyContainer"));a.contentWindow.document.close()};setTimeout(function(){if(a.onload)a.onload()});return a};a.prototype.createAiry3Frame=function(b){var a=Fa();b.container.appendChild(a);a.onload=function(){a.onload=null;a.contentWindow.document.open();a.contentWindow.document.write(T(b.airyScriptUrl,b.promiseName,"airyContainer"));a.contentWindow.document.close()};setTimeout(function(){if(a.onload)a.onload()});return a};return a}(),Rc=function(){function a(b){this.deps=b;this.loader=
new pb}a.prototype.create=function(b){var a=this,d="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+b.airy2Version+"/js/airy.ads."+(b.airyDebug?"debug.":"")+"js",e="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+b.airy2Version+"/css/beacon.css",f="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+b.airy2Version+"/css/aries._TTW_.css",g=D(),h=new this.deps.Promise(function(b,a){n[g]={resolve:b,reject:a}}),d=this.loader.createAiry2Frame({airyScriptUrl:d,
airyStyleUrl:b.usePseudoFullscreen?f:e,container:b.container||document.getElementById(b.containerId),promiseName:g}),h=h.then(function(d){var e="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+b.airy2Version+"/skins/aries._TTW_.js",f=b.videoAds;f.isEngineEnabled=b.videoAds.isEngineEnabled;e={contentId:""+b.initialVideo.contentId,customerId:b.customerId,desiredMode:b.desiredMode||"hybrid",disabledViewIds:b.disabledViewIds,foresterMetadataParams:{client:b.requestMetadata.clientId,
marketplaceId:b.requestMetadata.marketplaceId,method:b.requestMetadata.method,requestId:b.requestMetadata.requestId,session:b.requestMetadata.sessionId},mediaRequiresUserAction:b.mediaRequiresUserAction,mediaSourceInfo:[""+b.initialVideo.videoUrl],pageAsin:b.requestMetadata.pageAsin,parentId:"airyContainer",persistControlsDuringAdUX:b.persistControlsDuringAdUX,skinUrl:b.usePseudoFullscreen?e:"",usePseudoFullscreen:b.usePseudoFullscreen,vendorCode:b.initialVideo.vendorCode,videoAds:f};b.initialVideo.imageUrl&&
(e.slateImages={preloadSlate:b.initialVideo.imageUrl});b.supportsInlinePlayback&&(e.supportsInlinePlayback=b.supportsInlinePlayback);b.eventTimestamp&&(e.eventTimestamp=b.eventTimestamp);b.requestMetadata.instance&&(e.foresterMetadataParams.instance=b.requestMetadata.instance);return new Qc(d,e,b.initialVideo,a.deps)});return new xa(new ya(h,this.deps),d,this.deps)};return a}(),Sc=function(){function a(b,a,d,e){var f=this;this.libs=e;this.eventEmitter=new e.EventEmitter;this.currentAsset=d;this.initHandlers();
a.bindings={ended:function(){return f.eventHandlers.onPlaybackComplete()},playing:function(){return f.eventHandlers.onPlaybackStart()}};this.airy=b.embed(a);this.eventEmitter.emit("playerLoaded")}a.prototype.play=function(b){!b||this.currentAsset&&b.contentId==this.currentAsset.contentId||(this.airy.loadMedia({contentId:b.contentId,vendorCode:b.vendorCode}),this.currentAsset=b);b&&b.eventTimestamp?this.airy.play({contentId:b.contentId,eventTimestamp:b.eventTimestamp}):this.airy.play();return this};
a.prototype.pause=function(){return this};a.prototype.resume=function(b){return this};a.prototype.stop=function(){this.pause();this.currentAsset=void 0;return this};a.prototype.seek=function(b){return this};a.prototype.on=function(b,a){this.eventEmitter.on(b,a);return this};a.prototype.off=function(b,a){this.eventEmitter.off(b,a);return this};a.prototype.onTime=function(b,a,d){return this};a.prototype.offTime=function(b,a,d){return this};a.prototype.onAd=function(b,a){return this};a.prototype.offAd=
function(b,a){return this};a.prototype.getCurrent=function(){return this.currentAsset};a.prototype.getPosition=function(){return 0};a.prototype.isPlaying=function(){return!0};a.prototype.isPaused=function(){return!1};a.prototype.getVersion=function(){return"3"};a.prototype.getFlashVersion=function(){return""};a.prototype.getRendererType=function(){return""};a.prototype.destroy=function(){this.airy.unbind("ended",this.eventHandlers.onPlaybackComplete);this.airy.unbind("playing",this.eventHandlers.onPlaybackStart);
this.airy.detach()};a.prototype.initHandlers=function(){var b=this;this.eventHandlers={onPlaybackComplete:function(){return b.player_onPlaybackComplete()},onPlaybackStart:function(){return b.player_onPlaybackStart()}}};a.prototype.player_onPlaybackComplete=function(){var b=this.currentAsset;this.currentAsset=void 0;b&&(b.eventTimestamp=Date.now());this.eventEmitter.emit("playbackComplete",b)};a.prototype.player_onPlaybackStart=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());
this.eventEmitter.emit("playbackStart",this.currentAsset)};a.prototype.player_onPlaybackPause=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());this.eventEmitter.emit("playbackPause",this.currentAsset)};return a}(),Tc=function(){function a(b){this.deps=b;this.loader=new pb}a.prototype.create=function(b){var a=this,d=D(),e=new this.deps.Promise(function(b,a){n[d]={resolve:b,reject:a}}),f=this.loader.createAiry3Frame({airyScriptUrl:b.airy3ScriptUrl||"https://d2tz3plrpnfrv0.cloudfront.net/airy/prod/latest/airy.min.js",
container:b.container||document.getElementById(b.containerId),promiseName:d}),e=e.then(function(d){var e=b.videoAds;e.isEngineEnabled=b.videoAds.isEngineEnabled;e={disabledViewIds:b.disabledViewIds,parentId:"airyContainer",foresterMetadataParams:{client:b.requestMetadata.clientId,marketplaceId:b.requestMetadata.marketplaceId,method:b.requestMetadata.method,requestId:b.requestMetadata.requestId,session:b.requestMetadata.sessionId},videoAds:e,bindings:{},contentId:""+b.initialVideo.contentId,pageAsin:b.requestMetadata.pageAsin,
avPlayerAssetUrl:"https://avodassets-a.akamaihd.net/playback/web_player/webplayer.js"};b.customerId&&"0"!=b.customerId&&(e.customerId=b.customerId);return new Sc(d,e,b.initialVideo,a.deps)});return new xa(new ya(e,this.deps),f,this.deps)};return a}(),Uc=function(){function a(b,a,d,e){var f=this;this.libs=e;this.eventEmitter=new e.EventEmitter;this.currentAsset=d;this.initHandlers();d=document.getElementById(a.parentId);e=document.createElement("video");var g=a.parentId+"-element";e.id=g;e.className=
"video-js";e.setAttribute("playsinline","true");a.shouldDisableControls||e.setAttribute("controls","true");a.shouldAutoplay&&e.setAttribute("autoplay","true");a.shouldStartMuted&&e.setAttribute("muted","true");d.appendChild(e);this.videoJS=b.embed(g,a);document.getElementById(g).setAttribute("style","width:100%; height:100%;");this.videoJS.poster(a.posterSource);this.videoJS.src(a.mediaSourceInfo[0]);this.vseMetrics=b.metrics(this.videoJS);a.videoAds&&a.videoAds.isEngineEnabled&&(this.vseAds=b.ads(this.videoJS));
this.videoJS.ready(function(){f.videoJS.on("ended",function(){f.eventHandlers.onPlaybackComplete()});f.videoJS.on("playing",function(){f.eventHandlers.onPlaybackStart()});f.eventEmitter.emit("playerLoaded")})}a.prototype.play=function(b){!b||this.currentAsset&&b.contentId==this.currentAsset.contentId||(this.videoJS.poster(b.imageUrl),this.videoJS.posterImage.show(),this.vseMetrics.setContentId(b.contentId),this.vseAds&&(this.vseAds.setContentId(b.contentId),this.vseAds.setVendorCode(b.vendorCode)),
this.videoJS.src(b.videoUrl),this.currentAsset=b);b=b&&b.eventTimestamp?b.eventTimestamp:Date.now();this.vseMetrics.setPageLoadStartTimestamp(b);return this.videoJS.play()};a.prototype.pause=function(){this.videoJS.pause();return this};a.prototype.resume=function(b){this.videoJS.play();return this};a.prototype.seek=function(b){this.videoJS.currentTime(b);return this};a.prototype.stop=function(){this.videoJS.pause();this.currentAsset=void 0;return this};a.prototype.on=function(b,a){this.eventEmitter.on(b,
a);return this};a.prototype.off=function(b,a){return this};a.prototype.onTime=function(b,a,d){return this};a.prototype.offTime=function(b,a,d){return this};a.prototype.onAd=function(b,a){return this};a.prototype.offAd=function(b,a){return this};a.prototype.getCurrent=function(){return this.currentAsset};a.prototype.getPosition=function(){return this.videoJS.currentTime()};a.prototype.isPlaying=function(){return!this.videoJS.paused()};a.prototype.isPaused=function(){return this.videoJS.paused()};a.prototype.getVersion=
function(){return"VJS"};a.prototype.getFlashVersion=function(){return""};a.prototype.getRendererType=function(){return""};a.prototype.destroy=function(){this.vseMetrics.publishBeforeDispose();this.videoJS.off("ended",this.eventHandlers.onPlaybackComplete);this.videoJS.dispose();this.videoJS=null};a.prototype.initHandlers=function(){var b=this;this.eventHandlers={onPlaybackComplete:function(){return b.player_onPlaybackComplete()},onPlaybackStart:function(){return b.player_onPlaybackStart()}}};a.prototype.player_onPlaybackComplete=
function(){if(!this.vseAds||!this.vseAds.isAdPlaying()){var b=this.currentAsset;this.currentAsset=void 0;b&&(b.eventTimestamp=Date.now());this.eventEmitter.emit("playbackComplete",b)}};a.prototype.player_onPlaybackStart=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());this.eventEmitter.emit("playbackStart",this.currentAsset)};return a}(),Vc=function(){function a(b){this.deps=b}a.prototype.create=function(b){var a=this,d=D(),e=new this.deps.Promise(function(b,a){n[d]={resolve:b,
reject:a}});y.when("brila").execute("construct-player",function(b){n[d].resolve(b)});var f=document.getElementById(b.containerId),g=b.containerId+"-container";f.innerHTML='\x3cdiv id\x3d"'+g+'" style\x3d"width:100%; height:100%"\x3e\x3c/div\x3e';e=e.then(function(d){var e={contentId:""+b.initialVideo.contentId,customerId:b.customerId,foresterMetadataParams:{client:b.requestMetadata.clientId,marketplaceId:b.requestMetadata.marketplaceId,method:b.requestMetadata.method,requestId:b.requestMetadata.requestId,
session:b.requestMetadata.sessionId},mediaSourceInfo:[""+b.initialVideo.videoUrl],posterSource:b.initialVideo.imageUrl,pageAsin:b.requestMetadata.pageAsin,parentId:g,vendorCode:b.initialVideo.vendorCode,videoAds:b.videoAds,shouldStartMuted:b.shouldStartMuted,shouldAutoplay:b.shouldAutoplay,shouldDisableControls:b.shouldDisableControls};b.eventTimestamp&&(e.eventTimestamp=b.eventTimestamp);return new Uc(d,e,b.initialVideo,a.deps)});return new xa(new ya(e,this.deps),document.getElementById(g),this.deps)};
return a}(),Wc=function(){function a(b){this.deps=b;this.a2factory=new Rc(b);this.a3factory=new Tc(b);this.brilafactory=new Vc(b)}a.prototype.create=function(b){switch(b.airyVersion){default:b=this.a2factory.create(b);break;case "3":b=this.a3factory.create(b);break;case "VideoJS":b=this.brilafactory.create(b)}return b};return a}();n.vseFeatures=n.vseFeatures||{};var qb=n.gatedP||{register:function(a,b,c,d,e){void 0===e&&(e=n.vseFeatures);y.now(a).execute(a+"-prereg",function(f){f||e[b]||(e[b]=!0,
d.resolve(c(d)).then(function(){y.now(a).execute(a+"-reg",function(c){c||(y.log("Gated registration failed to register module!","ERROR",a),e[b]=!1)})}))})},declare:function(a,b,c,d){void 0===d&&(d=n.vseFeatures);y.now(a).execute(a+"-prereg",function(e){e||d[b]||(d[b]=!0,y.declare(a,c))})}},u={count:function(a,b){var c=n.ue;c&&c.count("vse:csm:"+a,b)},emitSushiMetric:function(a,b,c){var d=this;b=b||"https://unagi-na.amazon.com/1/events/com.amazon.eel.vse.metricstest.nexus";c=c||0;if(!(3<=c)){var e=
JSON.stringify(a).replace(/\\\\/g,""),f={params:e,paramsFormat:"json",contentType:"application/json; charset\x3dutf-8",error:function(){d.emitSushiMetric(a,b,++c)}};y.when("A").execute("Emit-VSE-Metrics",function(a){navigator&&navigator.sendBeacon?navigator.sendBeacon(b,e):a.post(b,f)})}}},t=function(){function a(){}a.INSTANCE="vse-featured-products";a.PLACEMENT="rvp:videolightbox";a.PREFIX=a.INSTANCE+":"+a.PLACEMENT;a.TIME=a.PREFIX+":totalTime";a.SUCCESS_TIME=a.PREFIX+":success:totalTime";a.ERROR_TIME=
a.PREFIX+":error:totalTime";a.REQUEST=a.PREFIX+":request";a.SUCCESS=a.PREFIX+":success";a.ERROR=a.PREFIX+":error";a.TIMEOUT=a.PREFIX+":timeout";a.IMPRESSION=a.PREFIX+":impression";a.CLICK=a.PREFIX+":click";a.SIZE=a.PREFIX+":size";a.TOGGLE_UP=a.PREFIX+":toggleUp";a.TOGGLE_DOWN=a.PREFIX+":toggleDown";a.TIMEOUT_STATUS="timeout";return a}(),Xc=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a){function b(){}function c(b,a,c){this.fn=b;this.context=a;this.once=c||!1}function d(){this._events=
new b;this._eventsCount=0}var e=Object.prototype.hasOwnProperty,f="~";Object.create&&(b.prototype=Object.create(null),(new b).__proto__||(f=!1));d.prototype.eventNames=function(){var b=[],a,c;if(0===this._eventsCount)return b;for(c in a=this._events)e.call(a,c)&&b.push(f?c.slice(1):c);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(a)):b};d.prototype.listeners=function(b,a){b=this._events[f?f+b:b];if(a)return!!b;if(!b)return[];if(b.fn)return[b.fn];a=0;for(var c=b.length,
d=Array(c);a<c;a++)d[a]=b[a].fn;return d};d.prototype.emit=function(b,a,c,d,e,m){var p=f?f+b:b;if(!this._events[p])return!1;var p=this._events[p],n=arguments.length,A,v;if(p.fn){p.once&&this.removeListener(b,p.fn,void 0,!0);switch(n){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,a),!0;case 3:return p.fn.call(p.context,a,c),!0;case 4:return p.fn.call(p.context,a,c,d),!0;case 5:return p.fn.call(p.context,a,c,d,e),!0;case 6:return p.fn.call(p.context,a,c,d,e,m),!0}v=1;for(A=
Array(n-1);v<n;v++)A[v-1]=arguments[v];p.fn.apply(p.context,A)}else{var r=p.length,t;for(v=0;v<r;v++)switch(p[v].once&&this.removeListener(b,p[v].fn,void 0,!0),n){case 1:p[v].fn.call(p[v].context);break;case 2:p[v].fn.call(p[v].context,a);break;case 3:p[v].fn.call(p[v].context,a,c);break;case 4:p[v].fn.call(p[v].context,a,c,d);break;default:if(!A)for(t=1,A=Array(n-1);t<n;t++)A[t-1]=arguments[t];p[v].fn.apply(p[v].context,A)}}return!0};d.prototype.on=function(b,a,d){a=new c(a,d||this);b=f?f+b:b;this._events[b]?
this._events[b].fn?this._events[b]=[this._events[b],a]:this._events[b].push(a):(this._events[b]=a,this._eventsCount++);return this};d.prototype.once=function(b,a,d){a=new c(a,d||this,!0);b=f?f+b:b;this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],a]:this._events[b].push(a):(this._events[b]=a,this._eventsCount++);return this};d.prototype.removeListener=function(a,c,d,e){a=f?f+a:a;if(!this._events[a])return this;if(!c)return 0===--this._eventsCount?this._events=new b:delete this._events[a],
this;var l=this._events[a];if(l.fn)l.fn!==c||e&&!l.once||d&&l.context!==d||(0===--this._eventsCount?this._events=new b:delete this._events[a]);else{for(var m=0,p=[],n=l.length;m<n;m++)(l[m].fn!==c||e&&!l[m].once||d&&l[m].context!==d)&&p.push(l[m]);p.length?this._events[a]=1===p.length?p[0]:p:0===--this._eventsCount?this._events=new b:delete this._events[a]}return this};d.prototype.removeAllListeners=function(a){a?(a=f?f+a:a,this._events[a]&&(0===--this._eventsCount?this._events=new b:delete this._events[a])):
(this._events=new b,this._eventsCount=0);return this};d.prototype.off=d.prototype.removeListener;d.prototype.addListener=d.prototype.on;d.prototype.setMaxListeners=function(){return this};d.prefixed=f;d.EventEmitter=d;"undefined"!==typeof a&&(a.exports=d)}).EventEmitter,Yc=function(){function a(b,a){void 0===a&&(a={refTagRecorderEndPoint:"/gp/mobile/tag/",retryLimit:3});this.A=b;this.config=a}a.prototype.emitRefTag=function(b,a){void 0===a&&(a=0);if(!(a>=this.config.retryLimit)){var d=this;this.A.post(this.config.refTagRecorderEndPoint+
"ref\x3d"+b,{error:function(){d.emitRefTag(b,a++)}})}};return a}(),Zc=function(){function a(b,a,d,e,f){var g=this;this.carouselFramework=a;this.A=d;this.contentCarouselConfig=e;this.deps=f;this.vseAssets=[];this.carouselPageSize=0;this.carouselPageNumber=1;var h=d.$;this.activeCard=h([]);var k=this;this.auiCarousel=b;this.refTagRecorder=new Yc(d);h("#"+e.carouselName).find(".a-carousel-heading").after(h("#"+e.carouselName).find(".vse-upload-link").removeClass("aok-hidden"));h("#"+e.carouselName+" .vse-video-item").each(function(){k.vseAssets.push(k.getAssetSpec(h(this)))});
this.vseAssetIndex=this.deps._keyBy(this.vseAssets,"contentId");h("#"+e.carouselName).delegate(".a-carousel-card a","click",function(b){if(!h(this).closest("li").hasClass("active")){var a=k.vseAssetIndex[h(this).closest("li").find(".vse-video-item").data("asin")];k.markPlaying(a);a.eventTimestamp=Date.now();d.trigger("vse:contentCarousel:"+e.carouselName+":click",a);a=k.findIndex(a);k._emitRefTag(a,k.contentCarouselConfig.refTagPrefix)}b.preventDefault()});h("#"+e.carouselName+" .vse-carousel-item").each(function(b){var a=
h(this);a.attr("href",a.data("redirect-url")+"?ref\x3d"+k.contentCarouselConfig.refTagPrefix+b)});d.off("a:carousel:"+e.carouselName+":change:pageSize");d.off("a:carousel:"+e.carouselName+":change:pageNumber");d.on("a:carousel:"+e.carouselName+":change:pageSize",function(){g.carouselPageSize=g.auiCarousel.getAttr("pageSize");g.activeAsset&&g.rotateTo(g.activeAsset)});d.trigger("a:carousel:"+e.carouselName+":change:pageSize");d.on("a:carousel:"+e.carouselName+":change:pageNumber",function(){g.carouselPageNumber=
g.auiCarousel.getAttr("pageNumber");d.trigger("a:carousel:"+e.carouselName+":scrollCarousel",g.carouselPageNumber,g.carouselPageSize)});d.trigger("a:carousel:"+e.carouselName+":updatePageIndex",this.carouselPageNumber,this.carouselPageSize)}a.prototype.getplaylist=function(){return this.vseAssets.slice()};a.prototype.getActiveAsset=function(){return this.activeAsset};a.prototype.scrollTo=function(){this.A.$("#"+this.contentCarouselConfig.carouselName).animate({scrollTop:this.activeCard.offset().top-
this.A.$("#"+this.contentCarouselConfig.carouselName).offset().top+this.A.$("#"+this.contentCarouselConfig.carouselName).scrollTop()})};a.prototype.rotateTo=function(b){this.markPlaying(b);this.contentCarouselConfig.isVerticalScroll&&this.scrollTo();0!==this.carouselPageSize&&(b=this.findIndex(b),-1!==b&&(b=Math.floor(b/this.carouselPageSize)+1,this.carouselPageNumber!=b&&this.auiCarousel.gotoPage(b)))};a.prototype.changeStartingCardTo=function(b){var a=this;this.listOffset=this.findIndex(b);if(!this.contentCarouselConfig.isVerticalScroll){this.carouselFramework.initializeAll();
this.carouselFramework.onInit(""+this.contentCarouselConfig.carouselName,function(){a.rotateTo(b)});var d=this;this.A.$("#"+this.contentCarouselConfig.carouselName+" .vse-carousel-item").each(function(b){var a=d.A.$(this);b=(b-d.listOffset+d.vseAssets.length)%d.vseAssets.length;a.attr("href",a.data("redirect-url")+"?ref\x3d"+d.contentCarouselConfig.refTagPrefix+b)})}};a.prototype.markPlaying=function(b){this.activeAsset=b;this.activeCard.removeClass("active");this.activeCard=this.vseAssetIndex[b.contentId].$el.closest("li").addClass("active")};
a.prototype.findIndex=function(b){return this.vseAssets.indexOf(this.vseAssetIndex[b.contentId])};a.prototype._emitRefTag=function(b,a){0<this.listOffset&&(b=(b-this.listOffset+this.vseAssets.length)%this.vseAssets.length);this.refTagRecorder.emitRefTag(a+b)};a.prototype.destroy=function(){this.A.$("#"+this.contentCarouselConfig.carouselName+" .a-carousel-card.active").removeClass("active")};a.prototype.getAssetSpec=function(b){var a=b.data(),d=b.find(".vse-video-image").data("img"),d=d.replace("SR160,90_BG0,0,0_PKvse-overlay-play2",
"").replace("SR320,180_BG0,0,0_PKvse-overlay-play2","");return{contentId:a.asin,title:a.title,vendorName:a.vendorName,vendorCode:a.vendorCode,referenceUrl:a.referenceUrl,referenceLinkTitle:a.referenceTitle,videoUrl:a.videoUrl,$el:b,duration:a.duration,imageUrl:d,sponsored:a.sponsored}};return a}(),$c=function(){return function(a){this.name="InvalidArugmentsException";this.message=a}}(),ad=function(){function a(b,a,d){this.carouselFramework=b;this.A=a;this.deps=d}a.prototype.create=function(b){var a=
this.carouselFramework.getCarousel(this.A.$("#"+b.carouselName));if(!a)throw new $c("Carousel framework can not find carousel by the name of "+b.carouselName+".");return new Zc(a,this.carouselFramework,this.A,b,this.deps)};return a}(),bd=function(){function a(a,c,d,e,f,g){var h=this;this.wrapper=a;this.useSecondaryView=c;this.$=d;this.A=e;this.productCarouselId=f;this.showProductCarousel=g;this.title=this.wrapper.find(".vse-content-title");this.titlePrefix=this.wrapper.find(".vse-content-title-prefix");
this.referenceLink=this.wrapper.find("#vse-customer-review-link");this.activeVideoTitle=this.wrapper.find(".vse-active-video-heading");this.activeVideoTitlePrefix=this.wrapper.find("#vse-activevideo-crv-prefix");this.activeVideoReferenceLink=this.wrapper.find("#vse-activevideo-crv-link");this.activeVideoVendorName=this.wrapper.find(".vse-active-video-vendorName");this.activeVideoSponsored=this.wrapper.find(".vse-active-video-sponsored");this.lbVideoCarousel=this.wrapper.find(".vse-related-videos-container");
this.playerAndActiveVideoContainer=this.wrapper.find(".vse-fixedLayout");g&&void 0!==f&&(this.productFeaturedCarousel=this.wrapper.find("#"+f));this.activeVideoCustomerProfile=this.wrapper.find("#vse-active-video-customer-profile");this.feedbackTrigger=this.wrapper.find(".vse-feedback-trigger");e.on("resize",function(){c&&h.updateVerticalScrollHeight()})}a.prototype.updateProductCarouselDOM=function(a){return"undefined"!=typeof this.showProductCarousel&&this.showProductCarousel&&"undefined"!=typeof a&&
""!==a?this.productFeaturedCarousel?(this.productFeaturedCarousel.css({opacity:"0"}).html(a).animate({opacity:"1"},650),0<this.productFeaturedCarousel.has("ol").has("li").length):!1:!1};a.prototype.getProductCarouselSize=function(){return"undefined"!=typeof this.showProductCarousel&&this.showProductCarousel?this.productFeaturedCarousel.find("ol").children().length:0};a.prototype.update=function(a,c){this.updateActiveVideo(a);this.updateTitle(a,c)};a.prototype.updateActiveVideo=function(b){var c=this._isCustomerReviewVideo(b);
this.activeVideoTitle.text(b.title);this.activeVideoVendorName.text(b.vendorName);b.sponsored?this.activeVideoSponsored.removeClass("vse-invisible"):this.activeVideoSponsored.addClass("vse-invisible");var d=this.lbVideoCarousel.find("[data-asin\x3d"+b.contentId+"]").find(".vse-video-customer-profile");0<d.length?(this.activeVideoCustomerProfile.html(d.clone().removeClass("vse-hidden").html()),this.activeVideoVendorName.addClass("vse-hidden"),this.productFeaturedCarousel||this.feedbackTrigger.addClass("vse-profile-height")):
(this.activeVideoCustomerProfile.html(""),this.activeVideoVendorName.removeClass("vse-hidden"),this.feedbackTrigger.removeClass("vse-profile-height"));this.useSecondaryView&&(this.adjustLBPosition(),this.updateVerticalScrollHeight());this.activeVideoTitlePrefix.text(a.prefixes[+c]);this.activeVideoReferenceLink.attr("href",b.referenceUrl||"");this.activeVideoReferenceLink.text(b.title);c?(this.activeVideoReferenceLink.text("Customer Review: "+b.title),this.activeVideoTitle.addClass("vse-invisible"),
this.activeVideoReferenceLink.removeClass("vse-invisible")):(this.activeVideoTitle.removeClass("vse-invisible"),this.activeVideoReferenceLink.addClass("vse-invisible"))};a.prototype.updateTitle=function(b,c){this.title=this.$(".vse-content-title");this.useSecondaryView?this.title.text(c):(this.title.text(b.title),this.title.attr("title",b.title));this.useSecondaryView||(this.titlePrefix=this.$(".vse-content-title-prefix"),this.titlePrefix.text(a.prefixes[+this._isCustomerReviewVideo(b)]));c=this._isCustomerReviewVideo(b);
this.referenceLink.attr("href",b.referenceUrl||"");this.referenceLink.text(b.referenceLinkTitle||"");c?this.referenceLink.removeClass("vse-invisible"):this.referenceLink.addClass("vse-invisible")};a.prototype.adjustLBPosition=function(){this.lbHeaderElement=this.$(".vse-lightbox-header").closest(".a-popover-header-secondary");var a=this.lbHeaderElement.height(),c=this.playerAndActiveVideoContainer.height();this.playerAndActiveVideoContainer.css("top",a);this.lbVideoCarousel.css("top",a+c)};a.prototype._isCustomerReviewVideo=
function(a){return"AOD60"==a.vendorCode};a.prototype.updateVerticalScrollHeight=function(){this.lbVideoCarousel.css({"max-height":this.$(n).height()-(this.playerAndActiveVideoContainer.height()+this.$(".vse-lightbox-wrapper .a-popover-header-secondary").height())})};a.prototype.hideShareIcons=function(a){this.$("#"+a+"-popover").slideUp(200)};a.prototype.showShareIcons=function(a){this.$("#"+a+"-popover").slideDown(200)};a.prefixes=["","Customer Review: "];return a}(),cd=function(){function a(a){var c=
this;this.config=a;this._errorCallback=function(a){c.config.A.trigger("vse:feedback:"+c.config.feedbackId+"-submit:failed",a)};this._successCallback=function(a){c.config.A.trigger("vse:feedback:"+c.config.feedbackId+"-submit:succeeded",a)};this.config.bottomSheetFactory&&this._getAndSetBottomSheetInstance();this.feedbackInstance=a.feedback;a.feedbackId&&(a.A.on("vse:feedback:"+a.feedbackId+":showSection",function(){c._changeHeight(525)}),a.A.on("vse:feedback:"+a.feedbackId+":reset",function(){c._changeHeight(300)}),
a.A.declarative(a.feedbackId+"-show-options","click",function(c){c.$target.hasClass("active")?a.A.trigger("vse:feedback:"+a.feedbackId+"-show-options:close"):a.A.trigger("vse:feedback:"+a.feedbackId+"-show-options:show");c.$target.toggleClass("active")}))}a.prototype.show=function(){this._getAndSetBottomSheetInstance()?this.bottomSheetInstance.show():this._slide("DOWN");return this};a.prototype.hide=function(){var a=this;this._getAndSetBottomSheetInstance()?setTimeout(function(){a.bottomSheetInstance.hide()},
350):this._slide("UP");return this};a.prototype.reset=function(){this.feedbackInstance&&this.feedbackInstance.reset();return this};a.prototype.submit=function(a){this.config.feedbackEndpoint?this.config.A.$.ajax({url:this.config.feedbackEndpoint,data:JSON.stringify({events:[{data:{feedback:a}}]}),type:"POST",contentType:"application/json; charset\x3dutf-8",error:this._errorCallback,success:this._successCallback}):this.config.A.post("/vap/videoFeedback",{params:a,error:this._errorCallback,success:this._successCallback});
this.hide();return this};a.prototype._slide=function(a){"UP"===a?this.config.A.$("#"+this.config.feedbackId+"-popover").toggleClass("show-form").slideUp(200):this.config.A.$("#"+this.config.feedbackId+"-popover").toggleClass("show-form").slideDown(200)};a.prototype._changeHeight=function(a){this._getAndSetBottomSheetInstance()&&this.bottomSheetInstance.changeHeight({duration:.2,height:a})};a.prototype._getAndSetBottomSheetInstance=function(){if(this.config.bottomSheetFactory)return this.bottomSheetInstance?
this.bottomSheetInstance:this.bottomSheetInstance=this.config.bottomSheetFactory.get(this.config.feedbackId+"-sheet")};return a}(),dd=function(){function a(a){var c=this;this.config=a;this.playbackCompleteHandler=function(a){return c.onPlaybackComplete(a)};this.playerFullScreenHandler=function(a){return c.onPlayerFullScreen(a)};this.playerLoadedHandler=function(){return c.config.popover.updatePosition()};this.isContinousPlayFinished=this.socialShareIsOpen=this.feedbackIsOpen=this.lightboxPausedVideo=
!1;this.lightBoxPopoverClass="vse-lightbox-wrapper";this.productCarouselHtmlList=[];this.productCarouselInitList=[];this.productCarouselShown=[];this.isToggledToCollapse=this.doRecordProductMetrics=this.isSingleVideoCarousel=!1;this.dom=new bd(a.$("#"+a.popoverName+"-wrapper"),!!a.useSecondaryView,a.$,a.A,a.productCarouselId,a.showProductCarousel);this.feedback=new cd(a);a.mShop&&a.mShopFactory&&(a.mShopFactory.addEventListener("appPause",function(){c.pauseVideoIfNeeded()}),a.mShopFactory.addEventListener("appResume",
function(){c.resumeVideoIfNeeded()}));a.$(".vse-scrolltotop ").click(function(){a.$(".vse-vertical-scroll").animate({scrollTop:0},300)});a.$(".vse-vertical-scroll").scroll(function(){var d=a.$(".vse-vertical-scroll").scrollTop(),f=a.A.now();if(.25<=(d-c.lastScrollTop)/(f-c.lastTimeScroll))c._collapseProductCarouselSection();else if(0==d){var g=c.activeVideoAsset?a.contentCarousel.findIndex(c.activeVideoAsset):-1;c.isToggledToCollapse&&-1<g&&c.productCarouselInitList[g]&&c.productCarouselShown[g]&&
c._expandProductCarouselSection()}c.lastScrollTop=d;c.lastTimeScroll=f});a.$(document).delegate("#"+a.popoverTriggerId,"click",function(a){return a.preventDefault()});a.A.on("a:popover:beforeHide:"+a.popoverName,function(d){c.config.mShop&&c.config.mShopFactory&&!c.config.showHeaderBar&&(c.config.mShopFactory.cancelFullscreen(),c.config.mShopFactory.dispatchEvent({type:"appOverlays.Show"}));c.feedbackIsOpen&&c.config.A.$("#"+c.config.feedbackId+"-trigger").removeClass("active");c.feedback.hide();
a.A.trigger("vse:feedback:"+a.feedbackId+"-show-options:close");c.config.showShareWidget&&(c.socialShareIsOpen&&c.config.A.$("#"+c.config.socialShareId+"-trigger").removeClass("active"),c.dom.hideShareIcons(a.socialShareId),a.A.trigger("vse:socialShare:"+a.socialShareId+"-show-icons:close"));c.hide()});a.A.on("a:popover:afterShow:"+a.popoverName,function(d){c.config.A.$(d.popover.$popover).addClass("vse-lightbox-wrapper "+a.A.$("#"+a.popoverName+"-wrapper").data("cssClass"));c.config.A.$(d.popover.$popover).find(".a-popover-header h4.a-popover-header-content").append(c.config.A.$(d.popover.$popover).find(".a-popover-inner .vse-lightbox-header-row-marker").addClass("vse-lightbox-header").removeClass("aok-hidden"));
c.config.A.$(d.popover.$popover).find(".a-popover-header-secondary h4").text("").append(c.config.A.$(d.popover.$popover).find(".a-popover-inner .vse-lightbox-header-row-marker").clone().addClass("vse-lightbox-header").removeClass("aok-hidden"));c.config.mShop&&c.config.$(d.popover.$popover).addClass("vse-lb-mshop");c.config.useSecondaryView&&c.dom.adjustLBPosition();c.config.mShop&&c.config.mShopFactory&&!c.config.showHeaderBar?(d={successCallback:function(){c.config.A.trigger("resize",{},{width:n.innerWidth,
height:n.innerHeight});c.config.mShopFactory.dispatchEvent({type:"appOverlays.Hide"})}},d.failCallback=c.handleFailFullScreen,c.config.mShopFactory.requestFullscreen(d)):c.config.A.trigger("resize",{},{width:n.innerWidth,height:n.innerHeight});c.lastScrollTop=a.$(".vse-vertical-scroll").scrollTop();c.lastTimeScroll=a.A.now()});this.config.mShop&&!this.config.showHeaderBar&&this.config.A.$(".vse-video-metadata").delegate("#vse-activevideo-crv-link","click",function(a){a.preventDefault();var b="";a.srcElement&&
(b=a.srcElement.getAttribute("href"));a={successCallback:function(){c.config.A.trigger("resize",{},{width:n.innerWidth,height:n.innerHeight});n.location.href=b}};a.failCallback=c.handleFailFullScreen;c.config.mShopFactory.cancelFullscreen(a);c.config.mShopFactory.dispatchEvent({type:"appOverlays.Show"})});if(a.showProductCarousel){var d=n.location.hostname;this.doRecordProductMetrics=a.recordProductMetrics||!1;-1!==d.indexOf("corp.amazon.com")?this.productCarouselAJAXEndpoint="https://development.amazon.com/vap/ew/":
this.productCarouselAJAXEndpoint="/vap/ew/";this.productCarouselHtmlList=Array(this.config.contentCarousel.getplaylist().length);this.productCarouselInitList=Array(this.config.contentCarousel.getplaylist().length);this.productCarouselShown=Array(this.config.contentCarousel.getplaylist().length);a.$(".vse-toggle-product-section").click(function(){return c._toggleProductCarouselSection()});a.A.on("vse:productCarousel:"+a.productCarouselId+":click",function(d){c.pauseVideoIfNeeded();c.doRecordProductMetrics&&
(u.count(t.CLICK,1),d=c._buildProductClickMetrics(d,c.activeASIN||"",c.config.playerConfig),a.A.trigger("vse:productCarousel:"+a.productCarouselId+":productClickMetrics",d))})}this.config.showShareWidget&&(a.A.declarative(""+a.socialShareActionName,"click",function(c){c.$target.hasClass("active")?a.A.trigger("vse:socialShare:"+a.socialShareId+"-show-icons:close"):a.A.trigger("vse:socialShare:"+a.socialShareId+"-show-icons:show");c.$target.toggleClass("active")}),this.registerSocialShare(a));this.registerFeedback(a);
if(a.displayCarousel)a.A.on("vse:contentCarousel:"+a.carouselConfig.carouselName+":click",function(d){a.showShareWidget&&c.config.A.state.replace("vse-social-share",{pageLevelData:{clientRef:"lb",deviceTypeRef:c.config.isMobile?"mb":"dt"},url:"https://www.amazon.com/gp/product/"+d.contentId,image:d.imageUrl,title:d.title,description:d.title});c.getPlayer(d).play(d);c.show(d);a.showProductCarousel&&(c._updateProductCarousel(d),c._adjustLightbox())})}a.prototype.startPlaying=function(a){this.isContinousPlayFinished=
!1;this.getPlayer(a);this.config.popover.show();this.show(a);!this.config.mShop&&this.config.useSecondaryView||this.getPlayer(a).play(a);this.config.contentCarousel.changeStartingCardTo(a);this.config.showProductCarousel&&(this.config.carouselConfig||0!=this.productCarouselHtmlList.length||0!=this.productCarouselInitList.length||(this.isSingleVideoCarousel=!0),this._updateProductCarousel(a),this._adjustLightbox());return this};a.prototype.show=function(a){this.activeASIN=a.contentId;this.activeVideoAsset=
a;this.config.contentCarousel.rotateTo(a);this.dom.update(a,this.config.contentTitle);return this};a.prototype.createPlaylist=function(a){this.playlist=a;return this};a.prototype.getCarousel=function(){return this.config.contentCarousel};a.prototype.hide=function(){this.destroyPlayer();this.config.popover.hide();return this};a.prototype.handleFailFullScreen=function(){};a.prototype.hideIfPossible=function(){0==this.feedbackIsOpen&&1==this.isContinousPlayFinished&&this.hide()};a.prototype.getNextAsset=
function(a){for(var c=0;c<this.playlist.length&&this.playlist[c].contentId!=a.contentId;c++);if(c!=this.playlist.length)return this.playlist[c+1]};a.prototype.pauseVideoIfNeeded=function(){this.player&&this.player.isPlaying()&&(this.player.pause(),this.lightboxPausedVideo=!0)};a.prototype.resumeVideoIfNeeded=function(){this.player&&!this.player.isPlaying()&&!this.isContinousPlayFinished&&this.lightboxPausedVideo&&this.player.resume(Date.now());this.lightboxPausedVideo=!1};a.prototype.getPlayer=function(a){this.player||
(a.eventTimestamp&&(this.config.playerConfig.eventTimestamp=a.eventTimestamp),this.config.playerConfig.initialVideo=a,this.player=this.config.awaFactory.create(this.config.playerConfig),this.player.on("playbackComplete",this.playbackCompleteHandler),this.player.on("playerLoaded",this.playerLoadedHandler),this.player.on("playerFullScreen",this.playerFullScreenHandler));return this.player};a.prototype.destroyPlayer=function(){if(this.player){var a=this.player;this.player=null;a.off("playbackComplete",
this.playbackCompleteHandler);a.off("playerLoaded",this.playerLoadedHandler);a.off("playerFullScreen",this.playerFullScreenHandler);a.destroy();null==this.player}};a.prototype.onPlaybackComplete=function(a){var c=this.getNextAsset(a);c?(this.config.showShareWidget&&this.config.A.state.replace("vse-social-share",{pageLevelData:{clientRef:"lb",deviceTypeRef:this.config.isMobile?"mb":"dt"},url:"https://www.amazon.com/gp/product/"+c.contentId,image:c.imageUrl,title:c.title,description:c.title}),a.eventTimestamp&&
(c.eventTimestamp=a.eventTimestamp),this.player.play(c),this.show(c),this.config.showProductCarousel&&(this._updateProductCarousel(c),this._adjustLightbox())):(this.isContinousPlayFinished=!0,this.hideIfPossible())};a.prototype.onPlayerFullScreen=function(a){var c=this.config.$("#"+this.config.popoverName+"-wrapper"),d=this.config.$("."+this.lightBoxPopoverClass);c&&(a?(c.addClass("vse-player-fullscreen"),d.addClass("vse-lb-fullscreen")):(c.removeClass("vse-player-fullscreen"),d.removeClass("vse-lb-fullscreen")))};
a.prototype.deRegisterFeedback=function(a){a.A.off("vse:feedback:"+a.feedbackId+"-show-options:show");a.A.off("vse:feedback:"+a.feedbackId+"-show-options:close");a.A.off("a:sheet:beforeShow:"+a.feedbackId+"-sheet");a.A.off("a:sheet:beforeHide:"+a.feedbackId+"-sheet");a.A.off("a:sheet:afterHide:"+a.feedbackId+"-sheet");a.A.off("vse:feedback:"+a.feedbackId+":submit")};a.prototype.registerFeedback=function(a){var c=this;this.deRegisterFeedback(a);a.A.on("vse:feedback:"+a.feedbackId+"-show-options:show",
function(){c.feedbackIsOpen=!0;c.config.showShareWidget&&c.socialShareIsOpen&&(c.socialShareIsOpen=!1,c.dom.hideShareIcons(a.socialShareId),c.config.A.$("#"+c.config.socialShareId+"-trigger").removeClass("active"));c.pauseVideoIfNeeded();c.feedback.show()});a.A.on("vse:feedback:"+a.feedbackId+"-show-options:close",function(){c.feedbackIsOpen=!1;c.feedback.hide();c.hideIfPossible();c.resumeVideoIfNeeded()});a.A.on("a:sheet:beforeShow:"+a.feedbackId+"-sheet",function(){c.feedbackIsOpen=!0;c.pauseVideoIfNeeded()});
a.A.on("a:sheet:beforeHide:"+a.feedbackId+"-sheet",function(){c.feedbackIsOpen=!1;c.feedback.reset();c.hideIfPossible();c.resumeVideoIfNeeded()});a.A.on("a:sheet:afterHide:"+a.feedbackId+"-sheet",function(){a.mShop&&a.mShopFactory&&!a.showHeaderBar&&a.A.delay(function(){a.mShopFactory.dispatchEvent({type:"appOverlays.Hide"})},500)});a.A.on("vse:feedback:"+a.feedbackId+":submit",function(d){a.$(a.feedbackId+"-trigger").toggleClass("active");c.feedbackIsOpen=!1;c.hideIfPossible();c.resumeVideoIfNeeded();
c.feedback.submit({additionalComments:d.additionalComments,airyVersion:c.player?c.player.getVersion():"[Airy is not loaded.]",asin:c.config.playerConfig.requestMetadata.pageAsin,videoId:c.activeASIN?c.activeASIN:"",category:d.feedbackArea,rating:d.rating,url:document.location.href,userAgent:n.navigator.userAgent,feedbackTime:Date.now(),customerId:c.config.playerConfig.customerId})})};a.prototype.deRegisterSocialShare=function(a){a.A.off("vse:socialShare:"+a.socialShareId+"-show-icons:show");a.A.off("vse:socialShare:"+
a.socialShareId+"-show-icons:close")};a.prototype.registerSocialShare=function(a){var c=this;this.deRegisterSocialShare(a);a.A.on("vse:socialShare:"+a.socialShareId+"-show-icons:show",function(){c.feedbackIsOpen&&(c.feedbackIsOpen=!1,c.feedback.hide(),c.config.A.$("#"+c.config.feedbackId+"-trigger").removeClass("active"),c.resumeVideoIfNeeded());c.socialShareIsOpen=!0;c.dom.showShareIcons(a.socialShareId)});a.A.on("vse:socialShare:"+a.socialShareId+"-show-icons:close",function(){c.socialShareIsOpen=
!1;c.dom.hideShareIcons(a.socialShareId)})};a.prototype._updateProductCarousel=function(a){var c=this,d=this.config.playerConfig.customerId,e=this.config.playerConfig.requestMetadata.requestId,f=this.config.playerConfig.requestMetadata.sessionId,g=this.config.playerConfig.requestMetadata.marketplaceId,h="#"+this.config.productCarouselId,k=this.config.contentCarousel.findIndex(a);if(this.config.mShop||this.config.useSecondaryView)this.config.$(h).addClass("aok-hidden"),this.config.$("#vseProductSize").addClass("aok-hidden"),
this.config.$("#vseSectionToggleIcon").addClass("aok-hidden"),this.initProductCarousel(a,d,f,e,g,!0).then(function(a){c.dom.updateProductCarouselDOM(a)?(-1<k&&(c.productCarouselShown[k]=!0),c.config.$(h).removeClass("aok-hidden"),c.config.$("#vseToggleProductSection").removeClass("aok-hidden"),c.config.$("#vseSectionToggleIcon").removeClass("aok-hidden"),c._adjustLightbox(),a=c.dom.getProductCarouselSize(),1===a?(c.config.$("#vseProductLabelPlural").addClass("aok-hidden"),c.config.$("#vseProductSize").addClass("aok-hidden"),
c.config.$("#vseProductLabelSingular").removeClass("aok-hidden")):(c.config.$("#vseProductLabelPlural").removeClass("aok-hidden"),c.config.$("#vseProductSize").removeClass("aok-hidden"),c.config.$("#vseProductSize").html(a.toString()),c.config.$("#vseProductLabelSingular").addClass("aok-hidden")),c.isToggledToCollapse||c.config.$(".vse-product-collapsible-section").slideDown(250,function(){return c._adjustLightbox()})):(-1<k&&(c.productCarouselShown[k]=!1),c.config.$("#vseToggleProductSection").addClass("aok-hidden"),
c.config.$(".vse-product-collapsible-section").slideUp(250,function(){return c._adjustLightbox()}))})};a.prototype.initProductCarousel=function(a,c,d,e,f,g){var h=this,k=this,n=g?"Mobile":"Desktop";return new Promise(function(g){var m=k.config.contentCarousel.findIndex(a);if(-1===m)if(k.isSingleVideoCarousel)m=0,0===h.productCarouselHtmlList.length&&(h.productCarouselHtmlList=Array(1),h.productCarouselInitList=Array(1));else{g("");return}a.sponsored&&!k.isSingleVideoCarousel&&(k.productCarouselInitList[m]=
!0,g(""));var p={page:"RVP",placement:"VideoLightbox",device:n,customerId:c,sessionId:d,requestId:e,marketplaceID:f,video:{contentID:a.contentId,contentIDType:"ASIN"}};if(k.productCarouselInitList[m])g(k.productCarouselHtmlList[m]);else{h.config.$(".vse-product-collapsible-section").slideUp(250,function(){return h._adjustLightbox()});h.doRecordProductMetrics&&u.count(t.REQUEST,1);var r=k.config.A.now();k.config.$.ajax({url:h.productCarouselAJAXEndpoint+"componentbuilder",data:JSON.stringify(p),crossDomain:!0,
type:"POST",contentType:"application/json; charset\x3dutf-8",timeout:5E3}).done(function(a){if(h.doRecordProductMetrics){var b=k.config.A.now()-r;u.count(t.TIME,b);u.count(t.SUCCESS_TIME,b);u.count(t.SUCCESS,1);a&&(b=h.dom.getProductCarouselSize(),0<b&&u.count(t.SIZE,b))}k.productCarouselInitList[m]=!0;k.productCarouselHtmlList[m]=a;g(k.productCarouselHtmlList[m])}).fail(function(a,b){h.doRecordProductMetrics&&(a=k.config.A.now()-r,u.count(t.TIME,a),u.count(t.ERROR_TIME,a),u.count(t.ERROR,1),b===
t.TIMEOUT_STATUS&&u.count(t.TIMEOUT,1));k.productCarouselInitList[m]=!0;g("")})}})};a.prototype._toggleProductCarouselSection=function(){var a=this.activeVideoAsset?this.config.contentCarousel.findIndex(this.activeVideoAsset):-1;-1<a&&this.productCarouselInitList[a]&&(this.isToggledToCollapse?(this._expandProductCarouselSection(),u.count(t.TOGGLE_DOWN,1)):(this._collapseProductCarouselSection(),u.count(t.TOGGLE_UP,1)))};a.prototype._expandProductCarouselSection=function(){var a=this;this.config.$(".vse-product-collapsible-section").slideDown(250,
function(){return a._adjustLightbox()});this.config.$("#vseSectionToggleIcon").removeClass("a-icon-section-expand");this.config.$("#vseSectionToggleIcon").addClass("a-icon-section-collapse");this.isToggledToCollapse=!1;this._buildAndEmitProductImpressionMetric();this._updateProductCarousel(this.config.contentCarousel.getActiveAsset())};a.prototype._collapseProductCarouselSection=function(){var a=this;this.config.$(".vse-product-collapsible-section").slideUp(250,function(){return a._adjustLightbox()});
this.config.$("#vseSectionToggleIcon").addClass("a-icon-section-expand");this.config.$("#vseSectionToggleIcon").removeClass("a-icon-section-collapse");this.isToggledToCollapse=!0};a.prototype._adjustLightbox=function(){this.dom.adjustLBPosition();this.dom.updateVerticalScrollHeight()};a.prototype._buildAndEmitProductImpressionMetric=function(){if(this.doRecordProductMetrics){u.count(t.IMPRESSION,1);var a=this._buildProductImpressionMetrics(this.activeASIN||"",this.config.playerConfig);this.config.A.trigger("vse:productCarousel:"+
this.config.productCarouselId+":productImpressionMetrics",a)}};a.prototype._buildProductClickMetrics=function(a,c,d){return{events:[{data:{timestamp:new Date,videoWatchedAsin:c,originalPageAsin:d.requestMetadata.pageAsin,productClickedIndex:a.index,productClickedAsin:a.contentId,productClickedPrice:a.price,productClickedRating:a.rating,productClickedReviews:a.reviews,productClickedPrimeEligibility:a.primeEligibility,widgetPosition:t.PLACEMENT,widgetid:this.config.productCarouselId,marketplaceid:d.requestMetadata.marketplaceId,
sessionid:d.requestMetadata.sessionId,requestid:d.requestMetadata.requestId}}]}};a.prototype._buildProductImpressionMetrics=function(a,c){return{events:[{data:{timestamp:new Date,videoWatchedAsin:a,originalPageAsin:c.requestMetadata.pageAsin,impression:1,widgetPosition:t.PLACEMENT,widgetid:this.config.productCarouselId,marketplaceid:c.requestMetadata.marketplaceId,sessionid:c.requestMetadata.sessionId,requestid:c.requestMetadata.requestId}}]}};return a}(),ed=function(){function a(){}a.prototype.markPlaying=
function(a){};a.prototype.rotateTo=function(a){};a.prototype.changeStartingCardTo=function(a){};a.prototype.getplaylist=function(){return[]};a.prototype.getActiveAsset=function(){return{}};a.prototype.findIndex=function(a){return-1};a.prototype.destroy=function(){};return a}(),rb=null;y.when("mash").execute(function(a){rb=a});var fd={getMash:function(){return rb}},gd=function(){return function(a){this.name="InvalidArugmentsException";this.message=a}}(),hd=function(){function a(a){this.constructorConfig=
a}a.prototype.create=function(a){var c=this.constructorConfig.modalFactory.get(this.constructorConfig.$("#"+a.popoverTriggerId)),d=a.useSecondaryView?this.constructorConfig.bottomSheetFactory:null,e=a.mShop?fd.getMash():null,f=this.constructorConfig.feedbackFactory.create(a.feedbackId||"");if(!c)throw new gd("Cannot create popover using name "+a.popoverName);var g=a.displayCarousel?this.constructorConfig.contentCarouselFactory.create(a.carouselConfig):new ed;return new dd({popoverName:a.popoverName,
popoverTriggerId:a.popoverTriggerId,playerConfig:a.playerConfig,displayCarousel:a.displayCarousel,carouselConfig:a.carouselConfig,contentTitle:a.contentTitle,useSecondaryView:a.useSecondaryView,displayActiveVideoDetails:a.displayActiveVideoDetails,popover:c,$:this.constructorConfig.$,contentCarousel:g,bottomSheetFactory:d,mShopFactory:e,feedback:f,feedbackId:a.feedbackId,productCarouselId:a.productCarouselId,awaFactory:this.constructorConfig.awaFactory,mShop:a.mShop,A:this.constructorConfig.A,feedbackEndpoint:a.feedbackEndpoint,
showHeaderBar:a.showHeaderBar,showProductCarousel:a.showProductCarousel,recordProductMetrics:a.recordProductMetrics,featProductsUrl:a.featProductsUrl,showShareWidget:a.showShareWidget,socialShareId:a.socialShareId,socialShareActionName:a.socialShareActionName,isMobile:a.isMobile})};return a}(),id=Array.prototype.splice;E.prototype.clear=function(){this.__data__=[];this.size=0};E.prototype["delete"]=function(a){var b=this.__data__;a=aa(b,a);if(0>a)return!1;a==b.length-1?b.pop():id.call(b,a,1);--this.size;
return!0};E.prototype.get=function(a){var b=this.__data__;a=aa(b,a);return 0>a?void 0:b[a][1]};E.prototype.has=function(a){return-1<aa(this.__data__,a)};E.prototype.set=function(a,b){var c=this.__data__,d=aa(c,a);0>d?(++this.size,c.push([a,b])):c[d][1]=b;return this};var sb="object"==typeof global&&global&&global.Object===Object&&global,jd="object"==typeof self&&self&&self.Object===Object&&self,x=sb||jd||Function("return this")(),L=x.Symbol,tb=Object.prototype,Jb=tb.hasOwnProperty,Kb=tb.toString,
U=L?L.toStringTag:void 0,Lb=Object.prototype.toString,Ia=L?L.toStringTag:void 0,za=x["__core-js_shared__"],Ka=function(){var a=/[^.]+$/.exec(za&&za.keys&&za.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Mb=Function.prototype.toString,Ob=/^\[object .+?Constructor\]$/,Nb=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X=I(x,"Map"),Y=I(Object,"create"),
kd=Object.prototype.hasOwnProperty,ld=Object.prototype.hasOwnProperty;J.prototype.clear=function(){this.__data__=Y?Y(null):{};this.size=0};J.prototype["delete"]=function(a){a=this.has(a)&&delete this.__data__[a];this.size-=a?1:0;return a};J.prototype.get=function(a){var b=this.__data__;return Y?(a=b[a],"__lodash_hash_undefined__"===a?void 0:a):kd.call(b,a)?b[a]:void 0};J.prototype.has=function(a){var b=this.__data__;return Y?void 0!==b[a]:ld.call(b,a)};J.prototype.set=function(a,b){var c=this.__data__;
this.size+=this.has(a)?0:1;c[a]=Y&&void 0===b?"__lodash_hash_undefined__":b;return this};K.prototype.clear=function(){this.size=0;this.__data__={hash:new J,map:new (X||E),string:new J}};K.prototype["delete"]=function(a){a=ba(this,a)["delete"](a);this.size-=a?1:0;return a};K.prototype.get=function(a){return ba(this,a).get(a)};K.prototype.has=function(a){return ba(this,a).has(a)};K.prototype.set=function(a,b){var c=ba(this,a),d=c.size;c.set(a,b);this.size+=c.size==d?0:1;return this};C.prototype.clear=
function(){this.__data__=new E;this.size=0};C.prototype["delete"]=function(a){var b=this.__data__;a=b["delete"](a);this.size=b.size;return a};C.prototype.get=function(a){return this.__data__.get(a)};C.prototype.has=function(a){return this.__data__.has(a)};C.prototype.set=function(a,b){var c=this.__data__;if(c instanceof E){var d=c.__data__;if(!X||199>d.length)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new K(d)}c.set(a,b);this.size=c.size;return this};ca.prototype.add=ca.prototype.push=
function(a){this.__data__.set(a,"__lodash_hash_undefined__");return this};ca.prototype.has=function(a){return this.__data__.has(a)};var Ma=x.Uint8Array,ub=L?L.prototype:void 0,la=ub?ub.valueOf:void 0,w=Array.isArray,md=Object.prototype.propertyIsEnumerable,vb=Object.getOwnPropertySymbols,Ta=vb?function(a){if(null==a)return[];a=Object(a);return Tb(vb(a),function(b){return md.call(a,b)})}:Ub,wb=Object.prototype,nd=wb.hasOwnProperty,od=wb.propertyIsEnumerable,Pa=Oa(function(){return arguments}())?Oa:
function(a){return M(a)&&nd.call(a,"callee")&&!od.call(a,"callee")},xb="object"==typeof exports&&exports&&!exports.nodeType&&exports,yb=xb&&"object"==typeof module&&module&&!module.nodeType&&module,zb=yb&&yb.exports===xb?x.Buffer:void 0,pa=(zb?zb.isBuffer:void 0)||Vb,Wb=/^(?:0|[1-9]\d*)$/,r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=
r["[object Uint32Array]"]=!0;r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1;var Ab="object"==typeof exports&&exports&&!exports.nodeType&&exports,Bb=Ab&&"object"==typeof module&&module&&!module.nodeType&&module,Aa=Bb&&Bb.exports===
Ab&&sb.process,ia;a:{try{ia=Aa&&Aa.binding&&Aa.binding("util");break a}catch(a){}ia=void 0}var Cb=ia&&ia.isTypedArray,Qa=Cb?Yb(Cb):Xb,Zb=Object.prototype.hasOwnProperty,$b=Object.prototype,bc=function(a,b){return function(c){return a(b(c))}}(Object.keys,Object),ac=Object.prototype.hasOwnProperty,cc=Object.prototype.hasOwnProperty,Ba=I(x,"DataView"),Ca=I(x,"Promise"),Da=I(x,"Set"),Z=I(x,"WeakMap"),pd=F(Ba),qd=F(X),rd=F(Ca),sd=F(Da),td=F(Z),N=O;if(Ba&&"[object DataView]"!=N(new Ba(new ArrayBuffer(1)))||
X&&"[object Map]"!=N(new X)||Ca&&"[object Promise]"!=N(Ca.resolve())||Da&&"[object Set]"!=N(new Da)||Z&&"[object WeakMap]"!=N(new Z))N=function(a){var b=O(a);if(a=(a="[object Object]"==b?a.constructor:void 0)?F(a):"")switch(a){case pd:return"[object DataView]";case qd:return"[object Map]";case rd:return"[object Promise]";case sd:return"[object Set]";case td:return"[object WeakMap]"}return b};var Ra=N,Sa=Object.prototype.hasOwnProperty,hc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gc=/^\w*$/;
ra.Cache=K;var ud=/^\./,vd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wd=/\\(\\)?/g,jc=function(a){a=ra(a,function(a){500===b.size&&b.clear();return a});var b=a.cache;return a}(function(a){var b=[];ud.test(a)&&b.push("");a.replace(vd,function(a,d,e,f){b.push(e?f.replace(wd,"$1"):d||a)});return b}),ic=1/0,Db=L?L.prototype:void 0,Wa=Db?Db.toString:void 0,kc=1/0,xd=function(a){return function(b,c,d){var e=-1,f=Object(b);d=d(b);for(var g=d.length;g--;){var h=
d[a?g:++e];if(!1===c(f[h],h,f))break}return b}}(),$a=function(a,b){return function(c,d){if(null==c)return c;if(!oa(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=Object(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}(function(a,b){return a&&xd(a,b,da)}),yd=function(){function a(a,c){var d=this;this.sectionId=c;a.A.declarative(a.id+"-"+c+"-choose","click",function(e){e.$event.stopPropagation();d.selected=e.$target;d.buttons.enable();d.selected.closest(".a-radio").hasClass(a.id+"-"+c+"-choose-other")?
d.freeText.show():e.$target.parent().hasClass(a.id+"-"+c+"-text")||(d.freeText.val(""),d.freeText.hide())});this.buttons=a.buttonApi("#"+a.id+"-"+c+"-button-primary");this.choices=a.buttonApi(a.id+"-"+c);this.freeText=a.A.$("#"+a.id+"-"+c+"-content textarea")}a.prototype.reset=function(){this.selected.prop("checked",!1);this.buttons.disable();this.freeText.val("")};a.prototype.show=function(){return this};a.prototype.hide=function(){this.reset();return this};return a}(),zd=function(){function a(a){var c=
this;this.config=a;this.payload={};this.registered=!1;this.ratingMap={"The video content is inappropriate":"inappropriate content","The video content is misleading":"misleading content","Other content-related feedback":"content other","The ad is too long":"ads are too long","The ad does not play":"ad did not play","The ad does not inform my purchase":"ad did not inform purchase","Other ad-related feedback":"ad other","The video does not play":"unplayable video","There is too much buffering":"too much buffering",
"The audio is poor or missing":"poor audio","Other technical issue":"technical other","Video is unrelated to the product":"inaccurate related items appear","Other product-related feedback":"product other"};this.A=a.A;this.id=a.id;this.endpoint=a.feedbackEndpoint;var d=this,e=""+this.id;pc(this.A.$("input[name\x3d"+e+"-options]:not(:checked)"),function(c){new yd(a,d.A.$(c).attr("value"))});this.buttonApi=a.buttonApi;this.registered||(this.A.declarative(e+"-options-choose","click",function(a){(a=a.$target.prop("value"))&&
c.showSection(a)}),this.A.declarative(this.id+"-cancel","click",function(){return c.reset()}),this.A.declarative(this.id+"-submit","click",function(){return c.submitFeedback()}),this.registered=!0)}a.prototype.showSection=function(a){this.A.trigger("vse:feedback:"+this.id+":showSection");this.activeSection&&this.A.$(this.activeSection).attr("id")!==this.id+"-"+a+"-content"&&this.clearForm();this.activeButtons=this.buttonApi("#"+this.id+"-"+a+"-button-primary");this.activeSection=this.A.$("#"+this.id+
"-"+a+"-content").slideDown("fast");this.activeButtonSection=this.A.$("#"+this.id+"-"+a+"-buttons").removeClass("aok-hidden");this.activeText=this.A.$("#"+this.id+"-"+a+"-content textarea")};a.prototype.submitFeedback=function(){var a=this.activeSection?this.activeSection.find('input[type\x3d"radio"]:checked').siblings(".a-radio-label").text():"",a=this.ratingMap[a]||"";this.A.trigger("vse:feedback:"+this.id+":submit",{additionalComments:this.activeText?this.activeText.val():"",feedbackArea:this.activeSection?
this.activeSection.prev("[data-a-input-name\x3d"+this.id+"-options]").data("feedback-field-value"):"",rating:a});this.clearForm()};a.prototype.reset=function(){this.clearForm();this.A.trigger("vse:feedback:"+this.id+":reset");return this};a.prototype.clearForm=function(){this.activeButtonSection&&this.activeButtonSection.addClass("aok-hidden");this.activeButtons&&this.activeButtons.disable();this.activeText&&(this.activeText.val(""),this.activeText.hide());this.activeSection&&(this.activeSection.slideUp(),
this.activeSection.find('input[type\x3d"radio"]:checked').each(function(a,c){this.checked=!1}),this.activeSection.prev().find('input[type\x3d"radio"]:checked').each(function(a,c){this.checked=!1}));return this};a.prototype.hide=function(){return this};return a}(),Ad=function(){function a(a){this.config=a;this.feedbackWidgets={}}a.prototype.create=function(a){var c=this.feedbackWidgets[a]||new zd(this.createFeedbackConfig(a));return this.feedbackWidgets[a]=c};a.prototype.get=function(a){return this.feedbackWidgets[a]};
a.prototype.createFeedbackConfig=function(a){return{A:this.config.A,dropdownApi:this.config.dropdownApi,buttonApi:this.config.buttonApi,feedbackEndpoint:this.config.feedbackEndpoint,id:a}};return a}(),ab=Math.max,ja=function(){try{var a=I(Object,"defineProperty");a({},"",{});return a}catch(b){}}(),sc=Date.now,gb=bb(ja?function(a,b){return ja(a,"toString",{configurable:!0,enumerable:!1,value:rc(b),writable:!0})}:ga),ka=Z&&new Z,Eb=ka?function(a,b){ka.set(a,b);return a}:ga,Fb=Object.create,ta=function(){function a(){}
return function(b){if(!H(b))return{};if(Fb)return Fb(b);a.prototype=b;b=new a;a.prototype=void 0;return b}}(),uc=Math.max,vc=Math.max;Q.prototype=ta(ua.prototype);Q.prototype.constructor=Q;var jb=ka?function(a){return ka.get(a)}:wc,ib={},Ec=Object.prototype.hasOwnProperty;R.prototype=ta(ua.prototype);R.prototype.constructor=R;var xc=Object.prototype.hasOwnProperty;ha.prototype=ua.prototype;ha.prototype.constructor=ha;var kb=bb(Eb),Bc=/\{\n\/\* \[wrapped with (.+)\] \*/,Cc=/,? & /,Dc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,
Ac=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Fc=Math.min,Bd=Math.min,lb=0/0,Jc=/^\s+|\s+$/g,Nc=/^[-+]0x[0-9a-f]+$/i,Kc=/^0b[01]+$/i,Lc=/^0o[0-7]+$/i,Mc=parseInt,nb=1/0,Gb=Math.max,Ea=function(a,b){return gb(qc(a,b,ga),a+"")}(function(a,b){var c=W(b,Ea.placeholder),d=a,e=32,f=void 0,g=b,h=c,k=void 0,n=void 0;b=e&2;if(!b&&"function"!=typeof d)throw new TypeError("Expected a function");a=g?g.length:0;a||(e&=-97,
g=h=void 0);k=void 0===k?k:Gb(mb(k),0);n=void 0===n?n:mb(n);a-=h?h.length:0;if(e&64)var l=g,m=h,g=h=void 0;c=b?void 0:jb(d);l=[d,e,f,g,h,l,m,void 0,k,n];if(c&&(f=l[1],d=c[1],e=f|d,m=128==d&&8==f||128==d&&256==f&&l[7].length<=c[8]||384==d&&c[7].length<=c[8]&&8==f,131>e||m)){d&1&&(l[2]=c[2],e|=f&1?0:4);if(f=c[3])m=l[3],l[3]=m?cb(m,f,c[4]):f,l[4]=m?W(l[3],"__lodash_placeholder__"):c[4];if(f=c[5])m=l[5],l[5]=m?db(m,f,c[6]):f,l[6]=m?W(l[5],"__lodash_placeholder__"):c[6];(f=c[7])&&(l[7]=f);d&128&&(l[8]=
null==l[8]?c[8]:Bd(l[8],c[8]));null==l[9]&&(l[9]=c[9]);l[0]=c[0];l[1]=e}d=l[0];e=l[1];f=l[2];g=l[3];h=l[4];n=l[9]=void 0===l[9]?b?0:d.length:Gb(l[9]-a,0);!n&&e&24&&(e&=-25);b=e&&1!=e?8==e||16==e?Gc(d,e,n):32!=e&&33!=e||h.length?va.apply(void 0,l):Hc(d,e,f,g):tc(d,e,f);return fb((c?Eb:kb)(b,l),d,e)});Ea.placeholder={};var Cd=function(a,b){return function(c,d){var e=w(c)?Oc:Pc,f=b?b():{};return e(c,a,Za(d,2),f)}}(function(a,b,c){"__proto__"==c&&ja?ja(a,c,{configurable:!0,enumerable:!0,value:b,writable:!0}):
a[c]=b}),Hb=1,Ed=function(a){function b(a,b){if(n.ue)try{n.ue.count(a,b)}catch(c){n.ueLogError&&n.ueLogError(c,{logLevel:"ERROR",attribution:"vse-related-video-shorts-metrics",message:"Failed to log CSM level metric."})}}function c(a){if(!(0>m)){var c=k[a].getPosition()-m;m=-1;2<=c&&(b("vse:rvs:ma:viewable",1),0<=a&&a<h.length?b("vse:rvs:ma:viewable:"+h[a],1):b("vse:rvs:ma:viewable:x",1))}}function d(a){if(q[a])try{k[a].pause(),q[a]=!1,c(a)}catch(d){b("vse:rvs:ma:error",1)}}function e(a){if(!q[a]){var b=
k[a];q[a]=!0;m=b.getPosition();l=Date.now();b.play()}}function f(){if(!(0>l)){var a=p?"vse:rvs:ma:scroll:ptff":"vse:rvs:ma:swipe:ptff",c=Date.now()-l;b(a,c);p=!1;l=-1}}function g(a,b){var c=a.$(n);a=c.scrollTop();var c=a+c.height(),d=b.offset().top+.4*b.height();return b.offset().top+.6*b.height()<=c&&d>=a}var h=["one","two","three","four"],k=[],q=[],l=-1,m=-1,p=!0,t=!1;return new a(function(a,h){y.when("A").register("VSE-RVS-client",function(h){var l=!0,m=null,r=null,v=function(a,c,e,f){m&&h.off(m);
r&&h.off(r);r=h.on("a:popover:beforeHide:"+c.popoverName,function(a){f.destroy()});m=h.on("vse:contentCarousel:"+a.carouselName+":click",function(f){for(var g=e.getCarousel().getplaylist(),l=0;l<g.length;l++){if(g[0].contentId==f.contentId){a.autoplay&&"undefined"!==typeof k[l]&&(d(l),t=!1);break}g.push(g.shift())}c.showShareWidget&&h.state.replace("vse-social-share",{pageLevelData:{clientRef:"lb",deviceTypeRef:c.isMobile?"mb":"dt"},url:"https://www.amazon.com/gp/product/"+f.contentId,image:f.imageUrl,
title:f.title,description:f.title});b("vse:rvs:widget:click",1);a.autoplayTriggered&&b("vse:rvs:ma:widget:click",1);e.createPlaylist(g);e.startPlaying(f)});h.on("vse:productCarousel:"+c.productCarouselId+":productClickMetrics",function(a){u.emitSushiMetric(a,c.featProductsUrl)});h.on("vse:productCarousel:"+c.productCarouselId+":productImpressionMetrics",function(a){u.emitSushiMetric(a,c.featProductsUrl)})};return{preLoadAiry:function(a){if(l)try{var b=a.state("vse-dp-vl-config");if(b){var c=b.playerConfig,
d=c.container||document.getElementById(c.containerId),e=document.createElement("iframe");e.className="vse-airy-preload-assets";if(d){d.appendChild(e);if("3"==c.airyVersion){var f=c.airy3ScriptUrl||"https://d2tz3plrpnfrv0.cloudfront.net/airy/prod/latest/airy.min.js";e.contentWindow.document.open();e.contentWindow.document.write('\x3cbody\x3e\n                        \x3cscript crossorigin\x3d"anonymous" src\x3d"'+f+'"\x3e\x3c/script\x3e\n                        \x3cscript crossorigin\x3d"anonymous" src\x3d"https://avodassets-a.akamaihd.net/playback/web_player/webplayer.js"\x3e\x3c/script\x3e\n                     \x3c/body\x3e')}else{var g=
c.airy2Version;a="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+g+"/js/airy.ads._TTW_.js";var h=b.useSecondaryView?"https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+g+"/css/aries._TTW_.css":"https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+g+"/css/beacon._TTW_.css",k=b.useSecondaryView?"https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2//prod/"+g+"/skins/aries._TTW_.js":"";e.contentWindow.document.open();
e.contentWindow.document.write('\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+h+'" /\x3e\n                         \x3cbody\x3e\n                             \x3cscript crossorigin\x3d"anonymous" src\x3d"'+a+'"\x3e\x3c/script\x3e\n                             \x3cscript crossorigin\x3d"anonymous" src\x3d"'+k+'"\x3e\x3c/script\x3e\n                         \x3c/body\x3e')}e.contentWindow.document.close();e&&e.classList&&e.classList.add("aok-hidden");l=!1}else l=!0}else l=!0}catch(m){n.ueLogError&&
n.ueLogError(m,{logLevel:"ERROR",attribution:"vse-related-video-shorts-videoplayer-preload",message:"Failed to create the preload element."})}},initializeClient:function(a,h,l,m,r,u,z,y){function A(a){a.method&&(a.method=a.method.replace("vse_lb","vse_rvs"))}try{a.$("#va-related-videos-widget_feature_div").removeClass("aok-hidden");a.$("#vse-spinner").removeClass("aok-hidden");a.state.replace("vse-dp-rv-config",JSON.parse(a.$("script[type\x3d'a-state'][data-a-state*\x3dvse-dp-rv-config]").html()));
a.state.replace("vse-dp-vl-config",JSON.parse(a.$("script[type\x3d'a-state'][data-a-state*\x3dvse-dp-vl-config]").html()));var w=a.state("vse-dp-rv-config"),x=a.state("vse-dp-vl-config");if(x&&w&&0!=x.length&&0!=w.length){u={gatedP:qb,_partial:Ea,_keyBy:Cd,EventEmitter:Xc,Promise:u};var D=new ad(h,a,u),E=new Wc(u),K=new Ad({A:a,dropdownApi:m,buttonApi:r,feedbackEndpoint:""}),C=(new hd({modalFactory:l,contentCarouselFactory:D,$:a.$,A:a,feedbackFactory:K,awaFactory:E,bottomSheetFactory:z})).create(x),
H=D.create(w),B=H.getplaylist();if(1<=B.length&&w.autoplay){var L=function(b,c){var d=a.$.extend({},x.playerConfig),e=a.$.extend({},x.playerConfig.videoAds);b=b[c];var g="vse-rvs-ingress-player-"+(c+1);A(d.requestMetadata);d.initialVideo=b;d.containerId=g;d.shouldStartMuted=!0;d.shouldDisableControls=!0;d.airyVersion="VideoJS";d.videoAds=e;d.videoAds.isEngineEnabled=!1;a.$("#"+g).find("img").hide();a.$("#"+g).find("p").hide();k[c]=E.create(d);k[c].on("playbackStart",f);k[c].on("playbackComplete",
function(a){q[c]=!1});a.$("#"+g+"-container").wrap('\x3cdiv class\x3d"vse-rvs-autoplay-container"\x3e\x3c/div\x3e');a.$("#"+g+"-container").after("\x3cdiv class \x3d 'vse-rvp-overlap-player'\x3e\x3c/div\x3e\x3cimg class\x3d'vser-rvp-animated-equalizer' src\x3dhttps://m.media-amazon.com/images/G/01/vse/Discovery/audio_indicator_1x._CB495544923_.gif /\x3e")};for(h=0;h<Math.min(2,B.length);h++)L(B,h);var F=0,G=0;a.on("a:carousel:"+w.carouselName+":updatePageIndex",function(a,b){F=G;G=(a-1)*b});a.$(n).unload(function(){c(G)});
var I=a.$("#vse-rvs-ingress-player-1");a.on("a:carousel:"+w.carouselName+":scrollCarousel",function(c,f){F=G;G=(c-1)*f;if(g(a,I)){d(F);if(G>F)for(c=0;2>=c;c++)f=G+c,f<B.length&&"undefined"===typeof k[f]&&L(B,f);b("vse:rvs:ma:widget:swipe",1);e(G)}});var J=function(){var c="#vse-rvs-ingress-player-"+(G+1);"undefined"===typeof I||a.$(c).closest("li").hasClass("active")||(g(a,I)?(t||b("vse:rvs:ma:widget:view",1),p=t=!0,e(G)):(t=!1,d(G)))};k[G].on("playerLoaded",function(a){J()});J();a.on.scroll(function(){J()})}v(w,
x,C,H);var C=Hb-y,M=a.now()-y;b("vse:csm:vse-rel-videos-carousel:loadedNotRegistered:time",C);b("vse:csm:vse-rel-videos-carousel:loadedAndRegistered:time",M);a.$("#vse-spinner").addClass("aok-hidden");b("vse:rvs:page:view",1);w.autoplayTriggered&&b("vse:rvs:ma:page:view",1)}}catch(Dd){a.$("#va-related-videos-widget_feature_div").addClass("aok-hidden"),n.ueLogError&&n.ueLogError(Dd,{logLevel:"FATAL",attribution:"vse-related-video-shorts",message:"Failed to create the video lightbox experience."})}},
_noneFeature:a()}})})};y.when("A","3p-promise").execute("VSE-gatedP-register-client",function(a,b){Hb=a.now();qb.register("VSE-RVS-client","VSE-RVS-client-registered",Ed,b)})})()});