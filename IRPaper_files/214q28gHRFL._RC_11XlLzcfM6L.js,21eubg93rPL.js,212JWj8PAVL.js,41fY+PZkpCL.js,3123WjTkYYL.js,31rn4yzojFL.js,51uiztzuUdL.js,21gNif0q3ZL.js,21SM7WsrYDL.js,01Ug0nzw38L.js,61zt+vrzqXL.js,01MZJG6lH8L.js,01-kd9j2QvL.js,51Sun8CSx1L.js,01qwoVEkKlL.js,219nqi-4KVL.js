(function(b){var f=window.AmazonUIPageJS||window.P,m=f._namespace||f.attributeErrors,a=m?m("ProductAdsDetailPageAssets"):f;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,f,m){b.when("A","a-carousel-framework","a-carousel-ajax-standard").register("AmazonClicks",function(a,b,f){var k=a.extend([],f);k.getItems=function(a,d,c){var e=a.getAttr("pageNumber");a.getAttr("pageSize");var b=a.getAttr("fetchedItems"),l;l=Array.isArray(a.getAttr("initialSeenAsins"))?a.getAttr("initialSeenAsins"):
JSON.parse("["+a.getAttr("initialSeenAsins")+"]");var h="[",g;for(g=0;g<l.length;g++)h+='"'+l[g]+'",';h=h.substring(0,h.length-1);for(g=0;g<b.length;g++)"object"===typeof b[g]&&-1===h.indexOf(b[g].oid)&&(h+=',"'+b[g].oid+'"');h+="]";c.pg=e;c.tot=a.getAttr("set_size");c.start=c.offset;c.num=c.count;c.cc=1===e?0:c.offset;c.oData=h;f.getItems(a,d,c)};b.registerStrategy("ajax","clicksCustomAjax",k);return{registerFeedbackEvents:function(n,d,c,e,b){var l=!0,h=function(){a.$("#"+d).text(e);l=!1;a.$("."+
b).each(function(){a.$(this).show()})},g=function(){a.$("#"+d).text(c);l=!0;a.$("."+b).each(function(){a.$(this).hide()})};a.$("#"+d).click(function(){l?h():g()});a.on("a:carousel:"+n+":change:pageNumber",g);g()},truncateTitles:function(b){a.$("."+b).each(function(){var d=a.$(this);if("hidden"===d.css("overflow")){var c=d.html(),e=a.$(this.cloneNode(!0)).hide().css("position","absolute").css("overflow","visible").width(d.width()).height("auto");d.after(e);for(e.html(c);0<c.length&&e.height()>d.height();)c=
c.substr(0,c.length-1),e.html(c+"\x26#133;");d.html(e.html()).height("auto").removeClass(b);e.remove()}})}}});(function(a,f,m){function k(){return a.P&&a.P.AUI_BUILD_DATE}k()?(b.when("jQuery").register("sponsored-products-truncator-jQuery",function(a){return a}),b.when("ready").register("sponsored-products-truncator-ready",function(){})):a.amznJQ&&(a.amznJQ.available("jQuery",function(){b.register("sponsored-products-truncator-jQuery",function(){return a.amznJQ.jQuery})}),a.amznJQ.onReady("jQuery",
function(){b.register("sponsored-products-truncator-ready",function(){})}),a.amznJQ.available("amazonShoveler",function(){b.register("sponsored-products-truncator-amznJQ-shoveler",function(){})}));b.register("sponsored-products-truncator-util",function(){function b(c,a){d({logLevel:c,attribution:"ProductAdsDetailPageAssets",message:"[sponsored-products-truncator] "+a})}var d=a.ueLogError;"function"!==typeof d&&(d=function(a,b){if(b&&b.message)throw Error(b.message);if(a&&a.message)throw Error(a.message);
});return{constants:{FEATURE_NAME:"SponsoredProductsTitleTruncation"},count:a.ue&&a.ue.count||function(){},isAUI:k,log:{warn:function(a){b("WARN",a)},error:function(a){b("ERROR",a)}}}})})(f,document);(function(a,f,m){b.when("A","sponsored-products-truncator-jQuery","sponsored-products-truncator-util").register("sponsored-products-truncator-line-truncator",function(a,b,d){function c(a){this.$element=a;this.$experimentElement=b("\x3cdiv\x3e").addClass("sponsored-products-truncator-offscreen-truncate");
this.maxRows=a.attr("data-rows");this.lineHeight=this.getLineHeight();this.maxRows||d.log.error("Truncation element missing necessary line number data")}var e,f;e=/(?=[ \-\/])/;f=/[^\/\-\[\]():\s]/;c.prototype.truncate=function(){var a=this.$element.html(),c,a=b.trim(a);this.$element.append(this.$experimentElement);this.checkLineFit(a)||((c=this.truncateByToken(a))?(this.$element.html(c),this.$element.attr({title:a})):d.log.error("Unable to successfully truncate line "+a));this.$experimentElement.remove()};
c.prototype.getLineHeight=function(){var a=this.$element.html(),b;this.$element.html("\x26hellip;");b=this.$element.innerHeight();this.$element.html(a);return b};c.prototype.checkLineFit=function(a){this.$experimentElement.html(a);a=this.$experimentElement.get(0).clientHeight/this.lineHeight;return Math.round(a)<=this.maxRows};c.prototype.truncateByToken=function(a){a=a.split(this.getTokenSeparatorRegex());var b=a.length,c=0,d,e,k;for(k=1;k!==b;)if(d=Math.floor((b+k)/2),e=a.slice(0,d).join("")+"\x26hellip;",
this.checkLineFit(e)){if(1>=b-d){for(c=d;0<c&&!f.test(a[c-1]);)c--;break}k=d}else b=d;if(0!==c)return a.slice(0,c).join("")+"\x26hellip;"};c.prototype.getTokenSeparatorRegex=function(){return this.$element.attr("data-truncate-by-character")?"":e};return{truncateLines:function(d){d.find(".sponsored-products-truncator-truncate:visible, .sponsored-products-truncator-truncate-medium:visible").each(function(){var a=new c(b(this));a&&(a.truncate(),b(this).addClass("sponsored-products-truncator-truncated").removeClass("sponsored-products-truncator-truncate sponsored-products-truncator-truncate-medium"),
b(this).removeClass(function(a,b){return(b.match(/sponsored-products-truncator-line-clamp-\d/g)||[]).join(" ")}))});a.trigger("sponsored-products-truncator:linestruncated")}}});b.when("jQuery","A","sponsored-products-truncator-line-truncator").register("sp-dp-carousel-truncation",function(a,b,d){function c(a){"string"===typeof a?d.truncateLines(b.$(a)):d.truncateLines(a.carousel.dom.$container)}a=["sp_detail_carousel","sp_detail2_carousel"];c("#sp_detail");c("#sp_detail2");for(var e=a.length-1;0<=
e;e--)b.on("a:carousel:"+a[e]+":change:animating",c),b.on("a:carousel:"+a[e]+":change:loading",c),b.on("a:carousel:"+a[e]+":change:pageSize",c)})})(f,document)});
/* ******** */
(function(e){var c=window.AmazonUIPageJS||window.P,k=c._namespace||c.attributeErrors,b=k?k("SponsoredProductsViewabilityAssets"):c;b.guardFatal?b.guardFatal(e)(b,window):b.execute(function(){e(b,window)})})(function(e,c,k){e.when("A","SponsoredProductsEventBatcher").register("SponsoredProductsViewability",function(b,p){function l(d,h){var a="SPView-"+h+"-"+d;c.ue&&c.ue.count(a,(c.ue.count(a)||0)+1)}function f(d){return{qualifier:a("qualifier",d),id:a("id",d),widgetName:a("widgetName",d),adId:a("adId",
d),adIndex:a("adIndex",d),eventType:a("eventType",d)}}function a(d,a){var b=(new RegExp("[?\x26]"+d+"(\x3d([^\x26#]*)|\x26|#|$)")).exec(a);return b&&b[2]?decodeURIComponent(b[2].replace(/\+/g," ")):""}function e(d){g[d.selector].viewHandler=b.delay(function(){if(d){var a=d.data("viewpixelurl");a&&-1===k.indexOf(a)&&(p.sendRequest(f(a+"\x26eventType\x3d1")),k.push(a),g[d.selector]&&(g[d.selector].viewState="VIEWED",l("viewUrlSuccess",g[d.selector].placementId)),m())}},500)}function m(){for(var a in g)if("VIEWED"===
g[a].viewState)delete g[a];else{var h=b.$(a),c=g[h.selector].viewState;"VIEWED"!==c&&(b.onScreen(h,-.15*h.height())?"OFF"===c&&(h.data("asin"),g[h.selector].viewState="ON",e(h)):"ON"===c&&(h.data("asin"),g[h.selector].viewState="OFF",clearTimeout(g[h.selector].viewHandler)))}}var g={},k=[],n=[],q=[];b.on("spViewTrackingElementLoaded",m);return{registerViewTrackingElement:function(a,c){-1===k.indexOf(a.data("viewpixelurl"))&&(l("totalAds",c),g[a.selector]={viewState:"OFF",viewHandler:null,placementId:c},
b.trigger("spViewTrackingElementLoaded"))},registerAuiEvents:function(a){Array.isArray(a)&&a.forEach(function(a){if(-1===q.indexOf(a))b.on(a,m)})},loadImagePixel:function(a){Array.isArray(n)&&-1===n.indexOf(a)&&(n.push(a),p.sendRequest(f(a)))}}});e.when("A").register("SponsoredProductsEventBatcher",function(b){function e(a){a="SPBatch-"+a;c.ue&&c.ue.count(a,(c.ue.count(a)||0)+1)}function l(){if(0<f.length){var a="/gp/sponsored-products/logging/log-action.html?params\x3d"+JSON.stringify(f);f=[];b.post(a,
{success:function(a){e("batchSuccess")},error:function(a,c,b){e("batchError")}})}}var f=[];c.setInterval(function(){l()},250);c.addEventListener("beforeunload",function(a){l()});return{sendRequest:function(a){f.push(a);15<f.length&&l()}}});e.when("A").register("SPHAT",function(b){function e(c,f){var a=":hidden";b.$.each(f,function(c,b){a+=":not("+b+")"});return 0<b.$(c).children(a).length}return{checkForHiddenElements:function(b,f,a){b=e(b,f);c.ue&&c.ue.count&&c.ue.count(a,(c.ue.count(a)||0)+b?1:
0);return b}}})});
/* ******** */
(function(g){var m=window.AmazonUIPageJS||window.P,p=m._namespace||m.attributeErrors,e=p?p("CommonDetailPageScripts"):m;e.guardFatal?e.guardFatal(g)(e,window):e.execute(function(){g(e,window)})})(function(g,m,p){g.when("jQuery","jumpLink").execute(function(e,c){var d=e("#miniATFUDP"),k=0;0<d.length&&(k=d.height()+9);1===m.isACRJumplLinkAnimated?c.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",1E3,k):2===m.isACRJumplLinkAnimated?c.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",
1200,k):3===m.isACRJumplLinkAnimated?c.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",1400,k):4===m.isACRJumplLinkAnimated?c.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",10,k):0<d.length&&(k=d.height()+9,c.bind("#acrCustomerWriteReviewLink, #acrCustomerReviewLink, #reviewLink, #reviewLinkShort, #reviewCreateLink",10,k));0<e("#reviewStarsLinkedCustomerReviews").length&&c.bind("#reviewStarsLinkedCustomerReviews",
10,k);0<e("#askATFLink").length&&c.bind("#askATFLink",10,k);g.when("cf").execute(function(b){0<e("#important-information a[href='#legal-disclaimer']").length&&c.bind("#important-information a[href='#legal-disclaimer']",10,k,!0)});c.bind("#seeMoreDetailsLink",300,k)});g.when("A","jQuery","ImageBlockATF","jumpLink","cf").register("miniATFUtils",function(e,c,d,k){function b(a){q&&!a||N||(a=(new Date).getTime()-h,a=50>a?50-a:10,q=1,q=0,h=(new Date).getTime(),setTimeout(function(){var a=l.scrollTop(),
b=c("#miniATFUDP");if(0<b.length){var f=L;if("T1"===f){f=c("#sims_fbt");if(0>=f.length||0>=f.height())f=c("#buyxgety_feature_div");var e=f,f=Number.MAX_VALUE;if(e&&0<e.length){var d=e.height(),e=e.offset();d&&e&&(f=e.top+d)}f=Math.min(f,1200)}else if("T2"===f){f="#product-details-grid_feature_div #prodDetails #important-information_feature_div #importantInformation #detail-bullets #detail_bullets_id #technical-data #technicalSpecifications_feature_div #productDescription #product-description-iframe #dpx-btf-hlcx-comparison_feature_div #HLCXComparisonWidget_feature_div".split(" ");
e=Number.MAX_VALUE;for(d=0;d<f.length;d++){var h=c(f[d]);if(h&&0<h.length&&0<h.height()){var q;q=Number.MAX_VALUE;h&&0<h.length&&(h=h.offset())&&(q=h.top);q<e&&(e=q)}}f=Math.min(e,1700)-100}else f=void 0;a>f?!n&&b.is(":hidden")&&(b.removeClass("a-hidden"),b.slideDown(200)):(b.slideUp(200),n=0)}},a))}k=c("#miniATFUDP");var a=c("#miniATFPartialSelection")[0],f=c(".twister-dropdown-highlight")[0];if(!(0>=k.length)){var l,n=0,h=0,q=0,r={},N=0,J=0,L="T2";r.setMiniATFShowHeight=function(a){L=a};r.setMiniATFScrollUpHeight=
function(a){J=0;"T1"===a&&(a=c("#productTitle"),0<a.length&&(a=a.offset())&&(J=a.top-20))};c("body").delegate(".go-to-top","click",function(){c("body, html").animate({scrollTop:J},300);n=1;a&&f&&(c(f).removeClass("transparentTwisterDropdownBorder"),c(f).addClass("highlightTwisterDropdownBorder"));return!1});a&&f&&c(f).click(function(){c(this).addClass("transparentTwisterDropdownBorder");c(this).removeClass("highlightTwisterDropdownBorder")});l=c(m);l.scroll(function(){b(0)});l.resize(function(){b(1)});
g.when("ImageBlockBTF").execute(function(a){var b=function(b){var f=b.getState().selected_variations;if(f){var l="",e=b.getState().variation_display_labels;c.each(a.visualDimensions,function(b,c){var d=1===a.gIsNewTwister?c:e[c];f[d]&&(l+=" "+f[d])});return l&&l.substring(1)}},f=a.defaultColor,l=f,n=a.landingAsinColor,h,q=c("#miniATF_image");0<q.length&&(h=q.attr("src"));r.updateMiniATFDiv=function(){N=0;var a=c("#miniATF_image");0<a.length&&h&&a.attr("src",h)};e.on("image-block-twister-swatch-click",
function(c,e,q,r){N=1;c=(c=r?r:b(e))&&""!==c?c:f;c===n&&(c=f);c!==l&&(h=(e=c!==f&&c!==n?a:d)&&e.colorImages&&e.colorImages[c]&&0<e.colorImages[c].length&&e.colorImages[c][0]?e.colorImages[c][0].large:null,l=c)})});return r}});g.when("ueCount","jQuery").execute(function(e,c){c("#miniATF_BackToTopLink").click(function(){e.incrementCounterByOne("sl_back_to_top_button_click_count")})})});
/* ******** */
(function(e){var h=window.AmazonUIPageJS||window.P,n=h._namespace||h.attributeErrors,b=n?n("ProductBundleUIAssets",""):h;b.guardFatal?b.guardFatal(e)(b,window):b.execute(function(){e(b,window)})})(function(e,h,n){e.when("A","bundle-constants","bundle-logger","bundle-state","ready").register("bundle-pricing",function(b,a,p,m){var c=b.$,f=!1,l="",k=0,g,e,h,n,q,r,t,u,v;b.on(a.BUNDLE_PRICING_AJAX_TRIGGER_EVENT,function(){g(!1)});g=function(d){if(d||n())d={asin:m.getBundleASIN()},d.asin?h(d):(p.logWarning("Unable to find bundle asin, will retry",
"bundlePricingAjax"),e(!1))};h=function(d){b.get("/gp/product/ajax-handlers/get-bundle-pricing.html",{params:d,accepts:"text/html",timeout:2E3,success:q,failure:function(d,a,b){p.logWarning("Error in getBundlePricing, retrying.");e(!0,a,b)}})};e=function(d,a,c){3>k?(k+=1,b.delay(function(){g(!0)},200)):d&&p.logFatal(a,"bundlePricingAjax",c)};n=function(){var a=!f;a||l===m.getBundleASIN()?(f=!0,l=m.getBundleASIN()):(a=!0,l=m.getBundleASIN(),k=0);return a};q=function(a){b.objectIsEmpty(a)||(t(a),v(a),
u(a),r(a))};r=function(b){b[a.BUNDLE_LISTING_WIDGET_V2_PRIME_ELIGIBLE]&&c(a.BUNDLE_PRICEBLOCK_PRIME_ELIGIBLE).removeClass("aok-hidden")};t=function(d){var f=d[a.BUNDLE_LISTING_WIDGET_V2_SAVINGS],l=d[a.BUNDLE_LISTING_WIDGET_V2_SAVINGS_LABEL],k=d[a.BUNDLE_LISTING_WIDGET_V2_YOU_SAVE],e=d[a.BUNDLE_LISTING_WIDGET_V2_YOU_SAVE_LABEL];d=d[a.BUNDLE_LISTING_WIDGET_V2_SAVINGS_NO_YOU_SAVE_LABEL];b.objectIsEmpty(f)||b.objectIsEmpty(l)||b.objectIsEmpty(k)||b.objectIsEmpty(e)?b.objectIsEmpty(f)||b.objectIsEmpty(l)||
b.objectIsEmpty(e)?b.objectIsEmpty(k)||b.objectIsEmpty(d)||(c(a.BUNDLE_PRICEBLOCK_YOU_SAVE_LABEL).html(d.trim()),c(a.BUNDLE_PRICEBLOCK_YOU_SAVE_NO_SAVINGS_PRICE).html(k.trim()),c(a.BUNDLE_PRICEBLOCK_SAVINGS_ROW).removeClass("aok-hidden"),c(a.BUNDLE_PRICEBLOCK_YOU_SAVE_NO_SAVINGS_COLUMN).removeClass("aok-hidden")):(c(a.BUNDLE_PRICEBLOCK_SAVINGS_NO_YOU_SAVE_PRICE).html(f.trim()),c(a.BUNDLE_PRICEBLOCK_SAVINGS_NO_YOU_SAVE_LABEL).html(e.trim()),c(a.BUNDLE_PRICEBLOCK_YOU_SAVE_LABEL).html(l.trim()),c(a.BUNDLE_PRICEBLOCK_SAVINGS_ROW).removeClass("aok-hidden"),
c(a.BUNDLE_PRICEBLOCK_SAVINGS_NO_YOU_SAVE_COLUMN).removeClass("aok-hidden")):(c(a.BUNDLE_PRICEBLOCK_SAVINGS_PRICE).html(f.trim()),c(a.BUNDLE_PRICEBLOCK_SAVINGS_LABEL).html(e.trim()),c(a.BUNDLE_PRICEBLOCK_YOU_SAVE_PRICE).html(k.trim()),c(a.BUNDLE_PRICEBLOCK_YOU_SAVE_LABEL).html(l.trim()),c(a.BUNDLE_PRICEBLOCK_SAVINGS_ROW).removeClass("aok-hidden"),c(a.BUNDLE_PRICEBLOCK_SAVINGS_YOU_SAVE_COLUMN).removeClass("aok-hidden"))};u=function(d){var f=d[a.BUNDLE_LISTING_WIDGET_V2_STRIKETHROUGH];d=d[a.BUNDLE_LISTING_WIDGET_V2_STRIKETHROUGH_LABEL];
b.objectIsEmpty(f)||b.objectIsEmpty(d)||(c(a.BUNDLE_PRICEBLOCK_STRIKETHROUGH_PRICE).html(f.trim()),c(a.BUNDLE_PRICEBLOCK_STRIKETHROUGH_PRICE_LABEL).html(d.trim()),c(a.BUNDLE_PRICEBLOCK_STRIKETHROUGH_ROW).removeClass("aok-hidden"))};v=function(d){var f=d[a.BUNDLE_LISTING_WIDGET_V2_DEAL];d=d[a.BUNDLE_LISTING_WIDGET_V2_DEAL_LABEL];b.objectIsEmpty(f)||b.objectIsEmpty(d)||(c(a.BUNDLE_PRICEBLOCK_DEAL_PRICE).html(f.trim()),c(a.BUNDLE_PRICEBLOCK_DEAL_LABEL).html(d.trim()),c(a.BUNDLE_PRICEBLOCK_DEAL_ROW).removeClass("aok-hidden"))};
return{parsePricingData:q,_retryCount:function(){return k}}});"use strict";e.when("A","ready").register("bundle-state",function(b){var a=b.$,e={bundleState:"#bundle-state"};return{elements:e,getBundleASIN:function(){var b=a(e.bundleState);if(b.length)return b.data("asin")}}});"use strict";e.when("A").register("bundle-logger",function(b){b=h.ue||!1;var a=b.count||!1,e=b.log||!1,m=h.ueLogError||!1,c=function(a,b,c,g){"INFO"!==b&&m?(null!==g&&"object"===typeof g?g.message="["+a+"] "+g.message:g={message:"["+
a+"]"},m(g,{logLevel:b,attribution:c,message:a})):"INFO"===b&&e&&e(a,c)};return{logCount:function(b,c){if(a)return a(b,c),a(b)},logInfo:function(a,b){c(a,"INFO",b,null)},logWarning:function(a,b,e){c(a,"WARN",b,e)},logError:function(a,b,e){c(a,"ERROR",b,e)},logFatal:function(a,b,e){c(a,"FATAL",b,e)}}});"use strict";e.when("A","ready").register("bundle-constants",function(){return{STRIKE_THROUGH_PRICE:"#bundle_strikethrough_price",BUNDLE_PRICE:"#bundle_price",YOU_SAVE:"#bundle_you_save",BUNDLE_DEAL_PRICE:"#bundle_deal_price",
TOTAL_BOUGHT_SEPARATELY:"#bundle_total_bought_separately",BUNDLE_PRICEBLOCK_DEAL_PRICE:"#priceblock-bundle-deal-price",BUNDLE_PRICEBLOCK_DEAL_LABEL:"#priceblock-bundle-deal-label",BUNDLE_PRICEBLOCK_DEAL_ROW:"#priceblock-bundle-deal-row",BUNDLE_PRICEBLOCK_SAVINGS_PRICE:"#priceblock-bundle-savings-price",BUNDLE_PRICEBLOCK_SAVINGS_ROW:"#priceblock-bundle-savings-row",BUNDLE_PRICEBLOCK_SAVINGS_LABEL:"#priceblock-bundle-savings-label",BUNDLE_PRICEBLOCK_YOU_SAVE_LABEL:"#bundle-v2-savings-atf-you-save-label",
BUNDLE_PRICEBLOCK_YOU_SAVE_PRICE:"#priceblock-bundle-you-save-price",BUNDLE_PRICEBLOCK_SAVINGS_NO_YOU_SAVE_PRICE:"#bundle-v2-savings-no-you-save-atf",BUNDLE_PRICEBLOCK_SAVINGS_NO_YOU_SAVE_LABEL:"#bundle-v2-savings-no-you-save-label-atf",BUNDLE_PRICEBLOCK_STRIKETHROUGH_PRICE:"#bundle-v2-price-strikethrough-atf",BUNDLE_PRICEBLOCK_STRIKETHROUGH_ROW:"#bundle-priceblock-strikethrough-row",BUNDLE_PRICEBLOCK_STRIKETHROUGH_PRICE_LABEL:"#bundle-v2-price-strikethrough-atf-label",BUNDLE_PRICEBLOCK_SAVINGS_NO_YOU_SAVE_COLUMN:"#bundle-v2-savings-no-you-save-atf-column",
BUNDLE_PRICEBLOCK_SAVINGS_YOU_SAVE_COLUMN:"#bundle-v2-you-save-atf-column",BUNDLE_PRICEBLOCK_YOU_SAVE_NO_SAVINGS_COLUMN:"#bundle-v2-you-save-no-savings-atf-column",BUNDLE_PRICEBLOCK_YOU_SAVE_NO_SAVINGS_LABEL:"#bundle-v2-you-save-no-savings-atf-label",BUNDLE_PRICEBLOCK_YOU_SAVE_NO_SAVINGS_PRICE:"#bundle-v2-you-save-no-savings-atf-price",BUNDLE_PRICEBLOCK_LESS_THAN_BUYING_SEPERATELY_PRICE:"#priceblock-bundle-less-than-buying-seperately-price",BUNDLE_PRICEBLOCK_PRIME_ELIGIBLE:"#bundle-v2-atf-prime-logo",
BUNDLE_LISTING_WIDGET_V2_STRIKETHROUGH:"bundle-listing-v2-strikethrough",BUNDLE_LISTING_WIDGET_V2_STRIKETHROUGH_LABEL:"bundle-listing-v2-strikethrough-label",BUNDLE_LISTING_WIDGET_V2_SAVINGS:"bundle-listing-v2-savings",BUNDLE_LISTING_WIDGET_V2_YOU_SAVE:"bundle-listing-v2-you-save",BUNDLE_LISTING_WIDGET_V2_YOU_SAVE_LABEL:"bundle-listing-v2-you-save-label",BUNDLE_LISTING_WIDGET_V2_DEAL:"bundle-listing-v2-deal",BUNDLE_LISTING_WIDGET_V2_DEAL_LABEL:"bundle-listing-v2-deal-label",BUNDLE_LISTING_WIDGET_V2_SAVINGS_LABEL:"bundle-listing-v2-savings-label",
BUNDLE_LISTING_WIDGET_V2_SAVINGS_NO_YOU_SAVE_LABEL:"bundle-listing-v2-you-save-no-savings-label",BUNDLE_LISTING_WIDGET_V2_PRIME_ELIGIBLE:"bundle-listing-v2-prime-eligible",BUNDLE_LISTING_V2_READY_EVENT:"bundle-listing-V2:widget:ready",BUNDLE_LISTING_BOTTOM_SHEET_READY_EVENT:"bundle-listing:sheet:ready",BUNDLE_PRICING_AJAX_TRIGGER_EVENT:"bundle-pricing-ajax-trigger-event"}})});
/* ******** */
(function(k){var l=window.AmazonUIPageJS||window.P,C=l._namespace||l.attributeErrors,a=C?C("BurjDesktopAssets"):l;a.guardFatal?a.guardFatal(k)(a,window):a.execute(function(){k(a,window)})})(function(k,l,C){k.when("jQuery","ready").register("action-panel-secondary-panel",function(a){function b(c,b){c&&b&&h[c]&&(a("#"+c+"_secondaryPanelHeadingText").text(b),h[c].heading=b)}function d(c,b){if(c&&b&&h[c]){var g=a("#"+b);a("#"+c+"_secondaryPanelHeadingContent").append(g);h[c].headingContentId=b}}function e(c,
b){if(c&&b&&h[c]){var g=a("#"+b);0<g.length&&(b!==h[c].contentId&&a("#"+h[c].contentId).addClass("aok-hidden"),a("#"+c+"_secondaryPanelContent").append(g),g.removeClass("aok-hidden"),h[c].contentId=b)}}function f(c){c&&h[c]&&a("#actionPanel,#superleafActionPanel").animate({left:"+=420px"},400,"swing",function(){a("#"+c+"_secondaryPanel").addClass("aok-hidden");a("#"+c+"_secondaryPanelBackButton").removeClass("backButtonClickedState");"undefined"!==typeof a("#actionPanelWrapper")[0].style.setProperty&&
"function"===typeof a("#actionPanelWrapper")[0].style.setProperty&&a("#actionPanelWrapper")[0].style.setProperty("overflow","visible","important")})}var h={},g=function(c){a(this).addClass("backButtonClickedState");f(c.data.panelId)};return{init:function(c){if(c.panelId){h[c.panelId]=c;c.heading&&b(c.panelId,c.heading);c.headingContentId&&d(c.panelId,c.headingContentId);c.contentId&&e(c.panelId,c.contentId);var f=a("#"+c.panelId+"_secondaryPanelBackButton");f.unbind("click",g);f.bind("click",{panelId:c.panelId},
g);"0px"!==a("#actionPanel").css("left")&&a("#actionPanel").css("left","0px")}},setHeading:b,setHeadingContent:d,setContent:e,animateIn:function(c){c&&h[c]&&.5!==parseFloat(a("#"+c+"_secondaryPanel").closest(".feature").css("opacity"))&&(a("#actionPanelWrapper")[0]!==C&&"undefined"!==typeof a("#actionPanelWrapper")[0].style.setProperty&&"function"===typeof a("#actionPanelWrapper")[0].style.setProperty&&a("#actionPanelWrapper")[0].style.setProperty("overflow","hidden","important"),a("#"+c+"_secondaryPanel").removeClass("aok-hidden"),
a("#actionPanel").animate({left:"-=420px"},400,"swing"),a("#superleafActionPanel").animate({left:"-=420px"},400,"swing"))},animateOut:f}});k.when("jQuery","ready").register("elevatorFeature",function(a){var b,d,e,f,h,g,c,y=function(){l.pageYOffset>f?(b.addClass("stickyBar"),e.removeClass("aok-hidden"),d.removeClass("aok-hidden")):(b.removeClass("stickyBar"),e.addClass("aok-hidden"),d.addClass("aok-hidden"))},v=function(){var b=l.pageYOffset,g,e;g=0;for(e=c.length;g<e;++g){var f=c[g],d=a(f.element);
if(0<d.length){var n=d.offset().top-h-10,d=n+d.height(),m;b>=n-10&&b<=d+10?(a(f.selector).addClass("elevatorHighlight"),m=f.selector):a(f.selector).hasClass("elevatorHighlight")&&m!==f.selector&&a(f.selector).removeClass("elevatorHighlight")}}},q=function(a){if(0<a.length){var c=a.offset().top-h-10;r(c,a)}},r=function(c,b){var f=a(l).scrollTop(),e=Math.abs(f-c)+0,d=e/2E3*1E3,n=0>f-c,m=!1,w=n?c-.2*e:c+.2*e;g=!0;a(".elevatorButton").removeClass("elevatorHighlight");a("html, body").animate({scrollTop:c},
{duration:500>d?500:d,step:function(a,g){if(b&&!m&&(n?a>w:a<w)){m=!0;var f=b.offset().top-h-10;c!==f&&(g.end=f)}},complete:function(){g=!1;v()}})},t=function(b,g,f){var e=a(b);e.length?(c.push({selector:g,element:b}),a(g).click(function(){e=a(b);q(e)})):a(f).addClass("aok-hidden")},w=function(){var b=[];a("#beautyRecommendations").length&&b.push("#beautyRecommendations");a("#sims_fbt").length&&b.push("#sims_fbt");a("#session-sims-feature, #fallbacksession-sims-feature").length&&b.push("#session-sims-feature, #fallbacksession-sims-feature");
a("#purchase-sims-feature").length&&b.push("#purchase-sims-feature");if(b.length)b.sort(function(b,c){return a(b).offset().top-a(c).offset().top}),b.forEach(function(a){c.push({selector:"#elevatorRelatedProductsSection",element:a})}),a("#elevatorRelatedProductsSection").click(function(){for(var c=l.pageYOffset,g=0,f=b.length,e=null;null===e&&g<f;){var d=a(b[g++]);0<d.length&&Math.floor(d.offset().top-h-10)>c&&(e=d)}null===e&&g===f&&(e=a(b[0]));q(e)});else{a("#elevatorRelatedProductsSection").addClass("aok-hidden");
for(var g=a(".elevatorDividerSection"),f=!0,e=g.length-1;f&&0<=e;){var d=a(g[e]);d.hasClass("aok-hidden")?e--:(d.addClass("aok-hidden"),f=!1)}}},G=function(){a("#elevatorViewBuyingOptionsButton .a-button-inner").click(function(){r(a("#a-page .a-container").offset().top-10,null)})},m;k.when("page-refresh:page").execute(function(a){m=a});var n=function(){if(m&&m.config){var b=!1,c;for(c in m.config)if(m.config[c].affectedFeatures&&(a(m.config[c].affectedFeatures).each(function(c,g){var e=a(g);"none"!==
e.css("display")&&"1"!==e.css("opacity")&&(b=!0)}),b))return!0}return!1},x=function(){if(n())setTimeout(function(){x()},200);else{b=a("#elevatorBar");d=a("#elevatorBarPlaceholder");e=a("#elevatorViewBuyingOptionsSection");f=b.position().top;h=b.height();c=[];var m=!1;g=!1;t("#productDescription, #product-description_feature_div, #product-description-iframe","#elevatorMoreAboutThisItemSection","#elevatorMoreAboutThisItemSection, #elevatorMoreAboutThisItemDivider");t("#detail-bullets, #prodDetails",
"#elevatorProductDetailsSection","#elevatorProductDetailsSection, #elevatorProductDetailsDivider");t("#quickPromoBucketContent","#elevatorSpecialOffersSection","#elevatorSpecialOffersSection, #elevatorSpecialOffersDivider");t("#cm_cr_dpwidget","#elevatorCustomerReviewsSection","#elevatorCustomerReviewsSection, #elevatorCustomerReviewsDivider");w();G();a(l).resize(function(){f=b.position().top});a(l).scroll(function(){m=!0});setInterval(function(){m&&(m=!1,y(),g||v())},100);y();v()}};return{init:x}});
k.when("A","a-popover","actionpanel-modified-popover","cf").register("sns-frequency-dropdown",function(a,b,d){var e=a.$;return{init:function(){e("#sns-frequency-button").length&&(new d("sns-frequency-dropdown-popover",e("#sns-frequency-button")),a.declarative("sns-frequency-update","click",function(a){var d=a.$target.parents("li");a=a.data.frequency;d.siblings().removeClass("sns-selected-frequency");d.addClass("sns-selected-frequency");e("#rcxOrdFreq").val(a);e("#sns-frequency-button-label").text(d.text());
b.get("sns-frequency-dropdown-popover").hide()}),a.declarative("sns-frequency-dropdown-popover-close","click",function(a){b.get("sns-frequency-dropdown-popover").hide()}))}}});k.when("jQuery","action-panel").register("mom-checkbox",function(a,b){return{init:function(){var d=a("#addToCart"),e=d.attr("action");a("#chkMom").change(function(){if(a("#chkMom").length){var f;a("#chkMom").is(":checked")?(d.attr("action","/gp/family/pipeline/view-signup/"),f="mom"):(d.attr("action",e),f="sns");b.setPanelState({mode:f})}});
a("#chkMom").length&&a("#chkMom").is(":checked")&&a("#chkMom").attr("checked",!1)}}});k.when("jQuery","A").register("twister-aui-page-state",function(a,b){var d="beautyRecommendations bRecDynamicStrings csxfsSecondaryPanelSettings ccxsmartShelfSecondaryPanelSettings accessoryInfo smartShelfVASInfo".split(" ");return{updatePageState:function(){var e=b.parseJSON;b.each(a('script[type="a-state"]'),function(f){f=a(f);if(!f.data("a-eval")){var h=f.attr("data-a-state");if(h&&(h=e(h),h.key&&-1!==a.inArray(h.key,
d))){var g=e(f.html());b.state.replace(h.key,g);f.data("a-eval",!0)}}})}}});k.when("A","skinToneSelector","scenesAjaxHandler","colorScenesSlider","colorScenesCarousel","ready").register("colorScenes",function(a,b,d,e,f){function h(){O=!0;E.addClass("aok-hidden");F.removeClass("aok-hidden");k.addClass("aok-hidden");T.initCarousel();l.CounterScenesController&&t(l.CounterScenesController.getCounterSelection());a.trigger("colorScenes:expandCounter");u&&u.count&&u.count("colorScenesShowScene",1)}function g(){F.addClass("aok-hidden");
k.removeClass("aok-hidden");E.removeClass("aok-hidden");O=!1;p(l).resize()}function c(){O?g():h();u&&u.count&&u.count("colorScenesClickCounterIngress",1)}function y(){var a=T.getCarouselWidth(),b=C.getSlideTrackWidth();X=a/b;Y=b/a}function v(a,b,c){y();C.moveSlider(-a*Y,b,c)}function q(a,b){y();U.hideWhenClickOutside();T.moveCarouselByX(-a*X,b,!1,!1)}function r(a,b){T.updateImagePosition(R[a],R[b])}function t(a){O&&T.selectCarouselItemAtIndex(a,!1);G(a-1)}function w(b){Z||(a.trigger("colorScenes:expandCounter"),
a.trigger("colorScenes:select",b),G(b+1))}function G(a){M&&a!==H&&(I.css("background-image",'url("'+V[A[a]]+'")').fadeTo(300,1),H=a)}function m(a,b,c){p.each(a,function(a,g){"missingSkinTones"!==a&&"placeHolderImageId"!==a&&(p("#carouselSceneImage_"+a).css("background-image",'url("'+g+'")').fadeTo(300,1),V[a]=g,b&&("function"===typeof B&&B("cf","colorScenesFetchImages",{wb:1}),I.css("background-image",'url("'+g+'")').fadeTo(300,1),p("#colorScenesIngressLeftImg").delay(300).animate({"margin-right":"25px"},
300,"linear")),c&&"function"===typeof J&&(J("ld","colorScenesFetchImages",{wb:1}),J("ld","colorScenesFeature",{wb:1})))})}function n(){K.click(function(a){h();u&&u.count&&u.count("colorScenesClickIngressButton",1)});W.click(function(a){g();u&&u.count&&u.count("colorScenesClickBackButton",1)});N.length&&N.click(c)}function x(c){if(c[L]){"function"===typeof B&&B("cf","colorScenesIsEnabled",{wb:1});E=p("#imageBlock_feature_div");K=p("#colorScenesIngressButton");I=p("#colorScenesIngressImages").children();
k=p("#colorScenesIngressContainer");F=p("#colorScenesStage");W=p("#colorScenesBackArrowImage");N=p("#counterColorScenesIngress");c=1;l.CounterScenesController&&(c=l.CounterScenesController.getCounterSelection());T=new f(c);a.on("scenesCarousel:select",w);1<A.length?(C=new e,a.on("scenesCarousel:sync",v),a.on("scenesSlider:sync",q)):p("#colorSceneSliderSection").addClass("aok-hidden");U=new b(S);a.on("skinToneSelector:select",r);"function"===typeof B&&B("bb","colorScenesFetchImages",{wb:1});var g=
H;c=g-7;var d=H+1,h=d+7,y=A.length;for(D.getSceneInfo(A[H],m,!0,!1);0<=c||h<y;)0<=c&&(g=A.slice(c,g).toString(),D.getSceneInfo(g,m,!1,!1),g=c,c-=7),h<y&&(d=A.slice(d,h).toString(),D.getSceneInfo(d,m,!1,!1),d=h,h+=7);0<g&&d<y?(g=A.slice(0,g).toString(),D.getSceneInfo(g,m,!1,!1),d=A.slice(d,y).toString(),D.getSceneInfo(d,m,!1,!0)):0<g?(g=A.slice(0,g).toString(),D.getSceneInfo(g,m,!1,!0)):d<y&&(d=A.slice(d,y).toString(),D.getSceneInfo(d,m,!1,!0));n();M=!0;k.removeClass("aok-hidden");K.removeClass("aok-hidden");
N.removeClass("aok-hidden");"function"===typeof J&&J("ld","colorScenesIsEnabled",{wb:1});"function"===typeof B&&B("cf","colorScenesFeature",{wb:1});u&&u.count&&u.count("colorScenesShowIngress",1)}}var p=a.$,u=l.ue,B=l.uet,J=l.uex,E,k,K,I,F,W,N,O,M=!1,D,L,H,A,V={},P,z,U,S,R,Z,Y,X,C,T;return{init:function(a){L=a.parentAsin;A=a.variationAsins;L&&A&&0<A.length&&(H=a.currentAsinIndex,P=a.isEnabledEndPoint,z=a.infoEndPoint,R=a.skinToneToPositionCssClass,S=a.defaultSkinTone,Z=a.isSingletonCase,"function"===
typeof B&&B("bb","colorScenesFeature",{wb:1}),D=new d(P,z),"function"===typeof B&&B("bb","colorScenesIsEnabled",{wb:1}),D.checkIsEnabled(L,x))},selectSceneItem:t}});k.when("A").execute(function(a){l.CounterScenesController=new function(){function b(a,b,e){if("string"===typeof b||"number"===typeof b)"string"===typeof b&&(b=parseInt(b,10)),e?d(a,b+1):d(a,b-1)}function d(a,b){h||"function"!==typeof a||(h=!0,"undefined"!==typeof b?a(b):a(),h=!1)}var e,f,h;this.registerCounter=function(a){"object"===typeof a&&
a?e=a:l.ueLogError&&l.ueLogError({message:"[Failed to register Counter Twister with CounterScenesController]"},{logLevel:"ERROR",attribution:"counter_scenes_controller_register_counter_error"})};this.registerColorScene=function(a){"object"===typeof a&&a?f=a:l.ueLogError&&l.ueLogError({message:"[Failed to register Color Scene with CounterScenesController]"},{logLevel:"ERROR",attribution:"counter_scenes_controller_register_scene_error"})};this.getCounterSelection=function(){return e?e.getCurrentSelectedIndex()+
1:1};f=e=null;h=!1;a.on("colorScenes:expandCounter",function(){e&&d(e.expandCounter)});a.on("colorScenes:select",function(a){e&&b(e.selectCounterVariationAtIndex,a,!1)});a.on("counter:select",function(a){f&&b(f.selectSceneItem,a,!0)})}});k.when("A").register("skinToneSelector",function(a){return function(b){function d(){v.addClass("aok-hidden");y.removeClass("aok-hidden");r=!1}function e(a){y.addClass("aok-hidden");v.removeClass("aok-hidden");g(l).click(h.hideWhenClickOutside);r=!0;c&&c.count&&c.count("colorScenesOpenSkinTone",
1);a.preventDefault();a.stopPropagation();return!1}function f(b){var e=b.target.id,f=q.attr("id");b=g(b.target);e!==f&&q.removeClass("selectedSkinTone");b.addClass("selectedSkinTone");a.trigger("skinToneSelector:select",e,f);q=b;d();c&&c.count&&c.count(t[e],1)}var h=this,g=a.$,c=l.ue,y,v,q,r=!1,t={skinTone_10:"colorScenesSelectSkinTone10",skinTone_20:"colorScenesSelectSkinTone20",skinTone_30:"colorScenesSelectSkinTone30",skinTone_40:"colorScenesSelectSkinTone40",skinTone_50:"colorScenesSelectSkinTone50"};
h.hideWhenClickOutside=function(){r&&(d(),g(l).unbind("click",h.hideWhenClickOutside),r=!1)};(function(b){y=g("#colorSceneSkinToneButton");v=g("#skinTonePanel");q=g("#"+b);q.addClass("selectedSkinTone");a.trigger("skinToneSelector:select",b,null);y.click(e);g(".skinToneColor").click(f)})(b)}});k.when("A").register("scenesAjaxHandler",function(a){return function(b,d){function e(a,b,e){if(!a||0===a.length)throw Error(b+" is null or empty for "+e);}var f,h;this.getSceneInfo=function(b,c,d,f){e(b,"asinList",
"getSceneInfo");var q=h+b;a.ajax(q,{method:"get",success:function(a,b,e){"function"===typeof c&&c(a,d,f)},error:function(){l.ueLogError&&l.ueLogError({message:"[Failed to load sprite images from"+q+" ]"},{logLevel:"ERROR",attribution:"color_scenes_throwing_the_error"})}})};this.checkIsEnabled=function(b,c){e(b,"parentAsin","checkIsEnabled");var d=f+b;a.ajax(d,{method:"get",success:function(a,b,d){"function"===typeof c&&c(a)},error:function(){l.ueLogError&&l.ueLogError({message:"[Failed to determined if colorscene is enabled for "+
b+" with url "+d+" ]"},{logLevel:"ERROR",attribution:"color_scenes_is_enabled_throwing_the_error"})}})};(function(a,b){e(a,"checkEnabledEndpoint","init");e(b,"loadImagesEndpoint","init");f=a;h=b})(b,d)}});k.when("A","a-carousel-framework","scenesMoveEventUtil","scenesFlickVelocity").register("colorScenesCarousel",function(a,b,d,e){return function(f){function h(){return z}function g(){M=K.first().width();D=K.first().outerWidth(!0)-M;N=K.first().position().left;O=K.last().position().left;L=N-u/2+D+
M/2;H=O-u/2+D+M/2;var a=Q.find(".selectedCarouselItem");V=0<a.length?a.width()-M-2*D:0;A=H-L}function c(a){P=!1;d.bind(v,y);U=d.getClientX(a);R.startFlickVelocityTracking();S=z;a.preventDefault();a.stopPropagation();return!1}function y(a){d.unbind(v,y);R.triggerFlickVelocityMove();w();a.preventDefault();a.stopPropagation();return!1}function v(a){var b=d.getClientX(a),c=b-U;U=b;m.moveCarouselByX(c,!0,!1,!1);P=!0;a.preventDefault();a.stopPropagation();return!1}function q(b){if(!P||5>=Math.abs(Math.abs(S-
z))){var c=b.data.index;m.selectCarouselItemAtIndex(b.data.index,!1);a.trigger("scenesCarousel:select",c);x&&x.count&&x.count("colorScenesClickSceneImage",1)}P=!1}function r(a){m.moveCarouselByX(a,!0,!1,!1)}function t(){return z>L&&z<H}function w(){Math.abs(S-z)&&x&&x.count&&x.count("colorScenesCarouselMove",Math.abs(S-z))}function G(){b.onInit("colorScenes",function(b){g();z=L;F=n(I[C-1]);F.addClass("selectedCarouselItem");F.siblings(".sceneImageNamePlate").addClass("selectedCarouselItem");m.selectCarouselItemAtIndex(C,
!1);a.on("a:carousel:colorScenes:repaint",function(a){m.selectCarouselItemAtIndex(C,!0)})})}var m=this,n=a.$,x=l.ue,p,u,k,J,E,Q,K,I,F,C,N,O,M,D,L,H,A,V,P,z,U,S,R;m.getCarouselWidth=function(){return A};m.moveCarouselByX=function(b,c,d,e){z-=b;g();z<L?z=L:z>H&&(z=H);d?E.gotoPixel(z,{animationDuration:0}):500<Math.abs(b)?E.gotoPixel(z,{animationDuration:400}):E.gotoPixel(z);c&&a.trigger("scenesCarousel:sync",b,!c,e)};m.selectCarouselItemAtIndex=function(a,b){g();var c=u/2-N-D-M/2+V,c=E.getItemOffset(a)-
c;m.moveCarouselByX(z-c,!0,b,!0);C=a;c=n(I[a-1]);F.attr("id")!==c.attr("id")&&(F&&(F.removeClass("selectedCarouselItem"),F.siblings(".sceneImageNamePlate").removeClass("selectedCarouselItem")),c.addClass("selectedCarouselItem"),c.siblings(".sceneImageNamePlate").addClass("selectedCarouselItem"),F=c)};m.updateImagePosition=function(a,b){I.removeClass(b).addClass(a)};m.resizeCarouselContainer=function(){k.width(p.parent().width());u=p.width()};m.initCarousel=function(){m.resizeCarouselContainer();b.initializeAll()};
(function(d){P=!1;R=new e(r,w,t,h);C=d;p=n("#leftCol");u=p.width();k=n("#colorScenesCarouselSection");J=n("#colorScenesCarouselContainer");Q=J.find(".a-carousel");K=Q.children();E=b.getCarouselByName("colorScenes");I=n(".carouselSceneImage");G();I.mousedown(c);"undefined"!==typeof l.ontouchstart&&I.bind("touchstart",c);d=I;for(var f=0;f<d.length;f++)n(d[f]).bind("click",{index:f+1},q),"undefined"!==typeof l.ontouchend&&n(d[f]).bind("touchend",{index:f+1},q);a.on.resize(m.resizeCarouselContainer);
a.on.orientationchange(m.resizeCarouselContainer)})(f)}});k.when("A","scenesMoveEventUtil","scenesFlickVelocity").register("colorScenesSlider",function(a,b,d){return function(){function e(a){b.bind(h,f);w=b.getClientX(a);B.startFlickVelocityTracking();m=k;a.preventDefault();a.stopPropagation();return!1}function f(a){b.unbind(h,f);B.triggerFlickVelocityMove();c();a.preventDefault();a.stopPropagation();return!1}function h(a){var c=b.getClientX(a),d=c-w;w=c;y.moveSlider(d,!0,!1);a.preventDefault();a.stopPropagation();
return!1}function g(a){if(r[0]===a.target){w=t.offset().left;var c=b.getClientX(a),d=c-w-p/2;w=c;y.moveSlider(d,!0,!0);v&&v.count&&v.count("colorScenesClickSlider",d);a.preventDefault();a.stopPropagation();return!1}}function c(){var a=Math.abs(m-k);a&&v&&v.count&&v.count("colorScenesSliderMove",a)}var y=this,v=l.ue,q=a.$,r,t,w,k,m,n,x,p,u,B;y.getSlideTrackWidth=function(){return u};y.moveSlider=function(b,c,d){if(0!==Math.abs(b)){var e=k+b;e>x&&(e=x);e<n&&(e=n);k=e;d?t.animate({left:e},200):t.css("left",
e);c&&a.trigger("scenesSlider:sync",b,!1)}};B=new d(function(a){y.moveSlider(-a,!0,!1)},c,function(){return k>n&&k<x},function(){return k});r=q("#colorSceneSliderBar");t=q("#colorSceneSlider");a.capabilities.touch&&(r.css("height","8px"),t.css("height","15px"));p=t.outerWidth();k=-p/2;t.css("left",k);n=-p/2;x=r.outerWidth()-p/2;u=x-n;t.mousedown(e);r.click(g);"undefined"!==typeof l.ontouchstart&&(t.bind("touchstart",e),r.bind("touchstart",g))}});k.when("A").register("scenesFlickVelocity",function(a){return function(b,
d,e,f){function h(a,b){if("function"!==typeof a)throw Error(b);}var g=this,c,l,k,q,r,t,w,G,m;g.startFlickVelocityTracking=function(){l=c=0;k=Date.now();q=r();clearInterval(t);t=setInterval(g.computeFlickVelocity,50)};g.computeFlickVelocity=function(){var a,b;a=Date.now();b=a-k;k=a;a=r()-q;q=r();b=1E3*a/(1+b);c=.8*b+.2*b};g.triggerFlickVelocityMove=function(){clearInterval(t);50<Math.abs(c)&&(l=.05*c,k=Date.now(),a.requestAnimationFrame(g.flickVelocityMove))};g.flickVelocityMove=function(){var b;l&&
(b=Date.now()-k,b=-l*Math.exp(-b/500),1<Math.abs(b)&&m()?(w(b),a.requestAnimationFrame(g.flickVelocityMove)):G())};(function(a,b,c,d){h(a,"moveRefFn is null or undefined for FlickVelocityController.");h(c,"checkLimitRefFn is null or undefined for FlickVelocityController.");h(d,"getFrameRefFn is null or undefined for FlickVelocityController.");w=a;G=b;m=c;r=d})(b,d,e,f)}});k.when("A").register("scenesMoveEventUtil",function(a){function b(a,b){d(l).unbind("mousemove",a).unbind("mouseup",b);"undefined"!==
typeof l.ontouchmove&&d(l).unbind("touchmove",a).unbind("touchend",b)}var d=a.$;return{bind:function(a,f){b(a,f);d(l).bind("mousemove",a).bind("mouseup",f);"undefined"!==typeof l.ontouchmove&&d(l).bind("touchmove",a).bind("touchend",f)},unbind:b,getClientX:function(a){return a.originalEvent&&a.originalEvent.targetTouches&&0<a.originalEvent.targetTouches.length?a.originalEvent.targetTouches[0].clientX:a.clientX}}});k.when("A","atf").register("smart-shelfT1",function(a){function b(b,c,d,e){a.$("#ASIN").val(b);
a.$("#offerListingID").val(c);a.$("#isAddOn").val(d);a.$("#quantity").val(e);p.submit();a.$("#ASIN").val(W);a.$("#offerListingID").val(N);a.$("#isAddOn").val(O);a.$("#quantity").val(u)}function d(a,b){F&&F.count&&F.count(a,b)}function e(){h();a.$("body").delegate("#add-to-cart-button","click",L);k.click(function(){a.$("#addToCart").prop("action","/gp/consumables/add-to-cart-ajax.html/ref=dp_csx_sw_atc_0");b(n.asin,n.offerId,n.addOn,1);k.addClass("aok-hidden");t.removeClass("aok-hidden");d("smartShelfAccessoriesAdded",
1)});v.click(function(){a.$("#addToCart").prop("action","/gp/consumables/add-to-cart-ajax.html/ref=dp_csx_sw_atc_1");b(n.asin1,n.offerId1,n.addOn1,1);v.addClass("aok-hidden");w.removeClass("aok-hidden");d("smartShelfAccessoriesAdded",1)});q.click(function(){a.$("#addToCart").prop("action","/gp/consumables/add-to-cart-ajax.html/ref=dp_csx_sw_atc_2");b(n.asin2,n.offerId2,n.addOn2,1);q.addClass("aok-hidden");G.removeClass("aok-hidden");d("smartShelfAccessoriesAdded",1)});r.click(function(){a.$("#addToCart").prop("action",
"/gp/consumables/add-to-cart-ajax.html/ref=dp_csx_sw_atc_w");b(n.warrantyAsin,n.warrantyOfferId,!1);r.addClass("aok-hidden");m.removeClass("aok-hidden")});a.$("body").undelegate("#add-to-cart-button","click.siatc");a.$("body").undelegate("#add-to-cart-button","click.vaswarrantysiatc")}function f(){E=[];x=a.state("smartShelfVASInfo");k=a.$(".csxsw_item_atc");v=a.$(".csxsw_item1_atc");q=a.$(".csxsw_item2_atc");r=a.$(".csxsw_warranty_atc");t=a.$(".csxsw_item_success");w=a.$(".csxsw_item1_success");G=
a.$(".csxsw_item2_success");m=a.$(".csxsw_warranty_success");p=a.$("#addToCart");Q=c=!1;var b=a.$("#"+J+"_secondaryPanelBackButton");n.showBackButton&&"false"!==n.showBackButton?b.click(function(){c=!1}):b.addClass("aok-hidden");g=a.$("#"+J+"_actionPanelSecondaryPanelDivider");g.addClass("smartShelfDivider");g.removeClass("actionPanelSecondaryPanelDivider");x!==C&&x.hideSmartShelf||(a.$("#add-to-cart-button"),e())}function h(){a.$("body").undelegate("#add-to-cart-button","click",A);a.$("body").undelegate("#add-to-cart-button",
"click",L)}var g,c,k,v,q,r,t,w,G,m,n,x,p,u,B,J,E,Q,K,I,F=l.ue,W=a.$("#ASIN").val(),N=a.$("#offerListingID").val(),O=a.$("#isAddOn").val(),M=function(){if(!c&&.5!==parseFloat(a.$("#"+J+"_secondaryPanel").closest(".feature").css("opacity"))){u=a.$("#quantity").val();Q||(d("smartShelfAccessoriesSeen",n.numberOfAccessories),d("smartShelfShowSecondaryPanel",1),Q=!0);var b=a.$("#addToCart").find(".abbListItem");b.length&&b.each(function(b){b=a.$(this).find("input[id^='mbb-offer']");var c=a.$(this).find("input[name^='asin']");
c.length&&this.removeChild(c[0]);b[0].checked&&c.length&&(a.$("#csxswWarrantyInclude").addClass("aok-hidden"),E.push([c[0].value,b[0].value]))});if(a.$("#addToCart").find(".atcFormServiceAsinData").length){var b=a.$("#addToCart").find(".atcFormServiceAsinData[name^='asin']"),e=a.$("#addToCart").find(".atcFormServiceAsinData[name^='offeringID']");b.length&&e.length&&E.push([b.val(),e.val()])}a.$("#freeSampleOfferListingID").val()&&""!==a.$("#freeSampleOfferListingID").val()&&E.push([a.$("#csxfsSelectedAsin").val(),
a.$("#freeSampleOfferListingID").val()]);B.animateIn(J);c=!0}},D=function(c){a.$("#addToCart").submit(function(c){a.$.ajax({type:a.$("#addToCart").attr("method"),url:a.$("#addToCart").attr("action"),data:a.$("#addToCart").serialize(),success:function(c){var d=a.$.parseJSON(c);d&&!d.error&&(E.length?(c=E.pop(),b(c[0],c[1],!1,1)):d.cartCount&&l.$Nav&&l.$Nav.when("api.setCartCount").run(function(a){a(d.cartCount)}))}});c.preventDefault()})},L=function(){if(a.$("#smartShelfDP_feature_div").children().length||
a.$("#smartShelfContent_feature_div").children().length){if("false"!==n.changeForm||a.$("#actionPanel").hasClass("ap-onetime")||a.$("#regularBuybox").hasClass("a-accordion-active")||a.$("#oneTimeBuyBox").hasClass("a-accordion-active")){var b="";p.length&&null!==p.prop("action")&&(b=p.prop("action"));var c="",d=b.search("ref=");p.length&&-1!==d&&(c=b.substr(d,b.length));b="/gp/consumables/add-to-cart-ajax.html/"+c;a.$("#addToCart").prop("action",b)}M();D()}},H=function(){I++;3>I&&A()},A=function(b){K||
(b.preventDefault(),a.$.ajax({timeout:5E3,url:"/gp/smartshelf/utility/trigger",success:function(b,c,d){var e;if(b&&b!==C&&""!==b.trim())try{var g=JSON.parse(b.trim());K="T1"===g.treatment||"C"===g.treatment;e="T1"===g.treatment}catch(h){H()}K?(e&&f(),a.$("#add-to-cart-button").click()):H()},error:function(a,b,c){H()}}))};return{init:function(b,c){h();K=!1;I=0;B=b;J=c;n=a.state("accessoryInfo");"true"===n.doTrigger?a.$("body").delegate("#add-to-cart-button","click",A):f()},undelegateATC:h}});
k.when("A","jQuery","pantryEnhancementMetrics").execute("dpv2-pantryEnhancement-metrics",function(a,b,d){d.registerCounters()});k.when("A","jQuery").register("pantryEnhancementMetrics",function(a,b){return{registerCounters:function(){var a=b("#pantry-store-message");a.length&&a.bind("click",function(a){if(a=l.ue){var b=a.count("pantryStoreMessageClick")||0;a.count("pantryStoreMessageClick",b+1)}})}}});k.when("A","jQuery","dualDimMetrics","atf").execute("dualdimInfo-metrics",function(a,
b,d){b(".dualDim-Swatch").length&&d.registerCounters()});k.when("A","jQuery","atf").register("dualDimMetrics",function(a,b){function d(a){var b=l.ue;if(b){var d=b.count(a)||0;b.count(a,d+1)}}return{registerCounters:function(){var a=b(".vodd-dim-wrapper").length,f=b(".twisterShelf_container").length,h=b(".twisterCounter_container").length;d("DualDimCount");1===a&&1===f+h?(d("DualDimOneVoddCount"),1===f?d("DualDimVoddShelfCount"):1===h&&d("DualDimVoddCounterCount")):2===a?d("DualDim2VoddCount"):2===
f?d("DualDimShelfCount"):2===h?d("DualDimCounterCount"):2===f+h&&d("DualDimShelfCounterCount")}}});k.when("A","action-panel","ready").register("aposWithBB",function(a,b){var d={mode:"onetime"},e={mode:"sns"},f={mode:"sampling"};return{init:function(){a.on("a:accordion:buybox-accordion:onetime-accordion:select",function(a){b.setPanelState(d)});a.on("a:accordion:buybox-accordion:sns-accordion:select",function(a){b.setPanelState(e)});a.on("a:accordion:buybox-accordion:sampling-accordion:select",function(a){b.setPanelState(f)})}}});
k.when("A","jQuery","ready","atf").execute(function(a,b){k.register("stickybuybox",function(){function d(){a.off("scroll",g);f();m=!1}function e(){var e=b("#csxfsSelectSampleButton"),f=b("input:radio[name=toggleBuyBox]");w.click(d);a.declarative("single-sample-widget-open-secondary-panel","click",d);e.click(d);f.change(function(){setTimeout(h,200)});b(l).resize(c);a.on("TwisterShelfExpanded",h);a.on("TwisterShelfCollapsed",h);a.on("TwisterCounterExpanded",h);a.on("TwisterCounterCollapsed",h);a.on.scroll(g)}
function f(){x.removeClass("stickybuybox");p.removeClass("stickybuybox");u.removeClass("stickybuybox")}function h(){f();v=t.offset();k=w.offset();q=G.offset();g()}function g(){var a=b(l).scrollTop(),c=b(l).scrollLeft(),d=r+a-38,e=n.offset().left,a=k?d-k.top:0,f=v?d-v.top:0,d=q?d-q.top:0;m&&(c=e-c,v&&0>f?(x.addClass("stickybuybox"),x.css({left:c+"px"})):(x.removeClass("stickybuybox"),k&&!v&&0>a?(p.addClass("stickybuybox"),p.css({left:c+"px"})):(p.removeClass("stickybuybox"),q&&0>d?(u.addClass("stickybuybox"),
u.css({left:c+"px"})):u.removeClass("stickybuybox"))))}function c(){r=b(l).height();g()}var k,v,q,r,t,w,G,m=!0,n=b("#actionPanel"),x,p,u;return{init:function(){t=b(".a-button-oneclick");w=b("#submit\\.add-to-cart").not(".a-button-preorder");G=b("#rcx-subscribe-submit-button");x=t.parent();p=w.parent();u=G.parent();r=b(l).height();h();e()}}})});k.when("A","jQuery","stickybuybox").register("stickybuybox-trigger",function(a,b,d){return{init:function(){if(b(".dualDim-Swatch").length)d.init();else{var e,
f=0,h=b(l).height(),g=b(".a-button-oneclick"),c=b("#submit\\.add-to-cart").not(".a-button-preorder"),k=b("#rcx-subscribe-submit-button"),v=b("input:radio[name=toggleBuyBox]"),q=function(){f++;3>f&&r()},r=function(){e||a.$.ajax({timeout:5E3,url:"/gp/stickyBuyBox/utility/trigger",success:function(a,b,c){var f;if(a&&a!==C&&""!==a.trim())try{var g=JSON.parse(a.trim());e="T1"===g.treatment||"C"===g.treatment;f="T1"===g.treatment}catch(h){q()}e?f&&d.init():q()},error:function(a,b,c){q()}})},t=function(){var a=
g.offset(),b=c.offset(),d=k.offset(),e=h-38,f=b?e-b.top:0,l=a?e-a.top:0,e=d?e-d.top:0;return a&&0>l||b&&0>f||d&&0>e?!0:!1};(t()||b("#twisterContainer .expanderButton")&&b("#twisterContainer .expanderButton").length)&&r();(function(){v.change(function(){setTimeout(function(){t()&&!e&&r()},200)})})()}}}})});
/* ******** */
(function(c){var g=window.AmazonUIPageJS||window.P,t=g._namespace||g.attributeErrors,a=t?t("FreshDetailPageCommonAssets"):g;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,g,t){c.when("A","jQuery","a-modal","afx-dp-uatc-proxy","afx-update-cart-count","a-dropdown","fresh-dp-double-click","afx-dp-csm-metrics-utils","fresh-show-atc-changeover","fresh-dp-quantity","afx-utils","ready").register("fresh-atc-handler",function(a,b,g,d,n,e,h,f,x,r,k){var q;c.when("EWC").execute(function(a){q=
a});c.when("nav.getFlyout").execute(function(a){a("ewc")});var z={"itemPrice:priceUnavailable:1":"PRICE_UNAVAILABLE","itemDeleted:itemCountOverflow:6":"QUANTITY_OVERFLOW"};return{addToFreshCart:function(e){function l(a,b,f,c){A(a);e.error(a,b,f,c)}function A(e,d){var h=d||{},n=e.data.sessionID;h.title=v(e.data.title);h.asin=e.data.asin;h.offerListingID=e.data.offerListingID;h.sessionID=n;switch(h.reasonCode?h.reasonCode:t){case w.itemNotAvailable:f.increment(p.freshUATCItemNotAvailableErrorCountMetric);
break;case w.itemPartiallyAvailable:f.increment(p.freshUATCItemPartiallyAvailableErrorCountMetric);break;case w.itemPartiallyAvailableForReservation:f.increment(p.freshUATCItemPartiallyAvailableForReservationErrorCountMetric);break;case w.itemNotAvailableForReservation:f.increment(p.freshUATCItemNotAvailableForReservationErrorCountMetric);break;case w.itemPriceUnavailable:f.increment(p.freshUATCItemPriceUnavailableErrorCountMetric);break;case w.itemCountOverflow:f.increment(p.freshUATCItemCountOverflowErrorCountMetric);
break;default:f.increment(p.freshUATCEmptyItemStatusCodeErrorCountMetric),c.log("fresh-atc-handler: No error status code.","ERROR")}h=b.param(h);g.create(e.$currentTarget,{name:"fresh-add-to-cart-modal",sessionID:n,url:"/afx/cart/reservation_conflict?"+h}).show();a.on("a:popover:afterHide:fresh-add-to-cart-modal",function(a){y(n);g.remove(a.popover)})}function v(a){var b={"&amp;":"&"},e;for(e in b)b.hasOwnProperty(e)&&(a=a.replace(e,b[e]));return a}function E(a){return a.filter(function(a){return a.statusKey in
z})}function B(a,b,e){e+=" returned by UATC is not an array";c.log(e,"Error",b);l(a,"","",e)}function C(e,h,g){g||(g=function(){});try{var n=e.data.asin;if(n)if(e.data.title){var k=e.data.offerListingID;if(k){var u=e.data.sessionID;if(u){var v=r.val();v||(c.log('fresh-atc-handler: "quantity" action parameter is missing.',"ERROR"),v=1);f.setWidgetClickTimestamp(p.freshUATCTCallScope);d({asin:n,offerListingID:k,sessionID:u,quantity:v,reftag:"afx-dp-addtocart",success:function(d){try{f.sendWidgetMetrics(p.freshUATCTCallScope);
var n;if(d&&d.isOK){var k=d.extraErrorInfos;if(k&&k.constructor===Array&&0<k.length)n=!0;else{var y=d.statusList,r;if(y&&y.constructor===Array&&0<y.length){var q=E(y);r=q&&0<q.length}else r=!1;n=r?!0:!1}}else n=!0;if(n)if(f.increment(p.freshUATCInvalidErrorResponseCountMetric),d)if(d.isOK){var m=d.extraErrorInfos,w=d.statusList;if(m&&m.constructor!==Array)B(e,m,"extraErrorInfos");else if(0<m.length){if(m&&!(0>=m.length)){var x=m[0];if("ADDRESS_NOT_SELECTED"===x.statusCode){f.increment(p.freshUATCAddressNotSelectedErrorCountMetric);
c.log("fresh-atc-handler: Address is not selected.","INFO");var t=b.param({asin:e.data.asin,offerListingID:e.data.offerListingID,quantity:1,redirectURL:document.location.href,ref:"afx_atfc_noaddress"});document.location.href="/afx/nc/chooseaddress?"+t}else A(e,{reasonCode:x.itemStatusCode,quantityAdded:x.availableQuantity,quantityRequested:x.requestedQuantity})}}else if(w&&w.constructor!==Array)B(e,w,"statusList");else if(0<w.length&&w&&!(0>=w.length)){var F=E(w);F&&0<F.length&&A(e,{reasonCode:z[F[0].statusKey]})}}else f.increment(p.freshUATCFailureCountMetric),
l(e,"","","isOK returned by UATC is false");else f.increment(p.freshUATCFailureCountMetric),l(e,"","","No response from UATC");else f.increment(p.freshUATCSuccessCountMetric),h(d,u,v)}catch(C){f.increment(p.freshAddToCartExceptionCountMetric),c.log("fresh-atc-handler exception: "+C,"ERROR")}finally{a.delay(g,D.reEnableDelay)}},error:function(b,d,h){try{f.sendWidgetMetrics(p.freshUATCTCallScope),f.increment(p.freshUATCFailureCountMetric),l(e,b,d,h)}catch(n){f.increment(p.freshAddToCartExceptionCountMetric),
c.log("fresh-atc-handler exception: "+n,"ERROR")}finally{a.delay(g,D.reEnableDelay)}}})}else c.log('fresh-atc-handler: Required "sessionID" action parameter is missing.',"ERROR"),f.increment(p.freshAddToCartMissingParameterCountMetric),l(e)}else c.log('fresh-atc-handler: Required "offerListingID" action parameter is missing.',"ERROR"),f.increment(p.freshAddToCartMissingParameterCountMetric),l(e)}else c.log('fresh-atc-handler: Required "title" action parameter is missing.',"ERROR"),f.increment(p.freshAddToCartMissingParameterCountMetric),
l(e);else c.log('fresh-atc-handler: Required "asin" action parameter is missing.',"ERROR"),f.increment(p.freshAddToCartMissingParameterCountMetric),l(e)}catch(y){f.increment(p.freshAddToCartExceptionCountMetric),c.log("fresh-atc-handler exception: "+y,"ERROR"),a.delay(g,D.reEnableDelay)}}function y(a){q&&"function"===typeof q.refresh?q.refresh():n(a)}var D={reEnableDelay:1E3},p={freshAddToCartClickCountMetric:"freshAddToCartClickCount",freshAddToCartMissingParameterCountMetric:"freshAddToCartMissingParameterCount",
freshAddToCartExceptionCountMetric:"freshAddToCartExceptionCount",freshUATCTCallScope:"freshUATCCall",freshUATCSuccessCountMetric:"freshUATCSuccessCount",freshUATCFailureCountMetric:"freshUATCFailureCount",freshUATCInvalidErrorResponseCountMetric:"freshUATCInvalidErrorResponseCount",freshUATCAddressNotSelectedErrorCountMetric:"freshUATCAddressNotSelectedErrorCount",freshUATCItemPartiallyAvailableErrorCountMetric:"freshUATCItemPartiallyAvailableErrorCount",freshUATCItemPartiallyAvailableForReservationErrorCountMetric:"freshUATCItemPartiallyAvailableForReservationErrorCount",
freshUATCItemNotAvailableErrorCountMetric:"freshUATCItemNotAvailableErrorCount",freshUATCItemNotAvailableForReservationErrorCountMetric:"freshUATCItemNotAvailableForReservationErrorCount",freshUATCEmptyItemStatusCodeErrorCountMetric:"freshUATCEmptyItemStatusCodeErrorCount",freshUATCItemPriceUnavailableErrorCountMetric:"freshUATCItemPriceUnavailableErrorCount",freshUATCItemCountOverflowErrorCountMetric:"freshUATCItemCountOverflowErrorCount"},w={itemNotAvailable:"ITEM_NOT_AVAILABLE",itemPartiallyAvailable:"ITEM_PARTIALLY_AVAILABLE",
itemPartiallyAvailableForReservation:"ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION",itemNotAvailableForReservation:"ITEM_NOT_AVAILABLE_FOR_RESERVATION",itemPriceUnavailable:"PRICE_UNAVAILABLE",itemCountOverflow:"QUANTITY_OVERFLOW"},F=function(a,b,f){x(f);y(b);e.success(a)};a.declarative("fresh-atc-handler","click",h(function(a,b){r.valid()?(k.vibrate(),f.increment(p.freshAddToCartClickCountMetric),C(a,F,b)):b()}))}}});c.when("A","jQuery","a-button","fresh-show-atl-changeover","ready").register("FreshAddToShoppingList",
function(a,b,g,d){function n(a){b("#"+a.asin+"-afx-atl-dropdown").change(function(b){a.$alreadyInMessage.addClass("aok-hidden");a.$errorMessage.addClass("aok-hidden")})}function e(b){var e=(a.state("baseWidgetState")||{}).csrfToken;a.post("/afx/lists/json/shoppinglists/additem",{cache:!1,timeout:5E3,params:{asin:b.asin,listID:b.shoppingListID,token:e},success:function(a){b.addButtonInstance.enable();a.successful?(b.$modalParent.find("#"+b.cancelButtonID).click(),d()):1===a.errorCodes[0]?b.$alreadyInMessage.removeClass("aok-hidden"):
h(b)},error:function(){b.addButtonInstance.enable();h(b)}})}function h(a){a.$errorMessage.removeClass("aok-hidden");c.log("Failed to add asin "+a.asin+" to shopping list "+a.shoppingListID,"ERROR")}a.declarative("add-to-list","click",function(a){var b=a.$currentTarget.closest(".a-popover-wrapper");if(1>b.length)c.log("Could not find the element that parents this modal (it should contain class a-popover wrapper)","FATAL");else{var d=b.find("#"+a.data.addButtonID),h;1>d.length?(c.log("Could not find the button that will add the item. This is required for preventing double clicks",
"ERROR"),h=!1):a.data.asin?h=!0:(c.log("ASIN was blank. Please supply the ASIN you wish to add to the list.","ERROR"),h=!1);h&&(d=g(d),d.isEnabled()&&(d.disable(),a={asin:a.data.asin,addButtonInstance:d,$modalParent:b,cancelButtonID:a.data.cancelButtonID,shoppingListID:b.find("#"+a.data.asin+"-afx-atl-dropdown").val(),$alreadyInMessage:b.find("#afx-atl-already-in"),$errorMessage:b.find("#afx-atl-service-error")},a.$alreadyInMessage.addClass("aok-hidden"),a.$errorMessage.addClass("aok-hidden"),n(a),
e(a)))}})});c.when("A","jQuery","a-dropdown","fresh-dp-constants","fresh-add-to-cart","a-button").register("fresh-dp-quantity",function(a,b,c,d,g,e){return function(){var h,f,x,r,k,q,z,m,l,A,v,t,B,C=function(){if(!h){f=b(d.addToCartButtonSelector);k=c.getSelect(d.dropdownID);if(x=!!k){r=b(d.dropdownDivSelector);var a=k.getOptions().size();a&&(z=a-1)}m=b(d.freeTextDivSelector);if(q=0!==m.length)l=b(d.freeTextInputSelector),A=b(d.freeTextErrorDivsSelector),v=b(d.freeTextErrorMsgMin),t=b(d.freeTextErrorMsgMax)}},
y=function(){a.on(d.dropdownSelectedID,function(a){b(a.nativeItemNode).index()===z?(l.attr("validValue",B),l.val(B),m.show(),A.hide(),r.hide(),l.focus().select(),k.val("1")):B=k.val()});var e=function(){var a=l.attr("validValue");a&&(k.val(a),k.val()===a?(B=a,r.show(),m.hide()):(g.updateQuantity("freshAddToCartButton",a),f.focus()))},c=function(){var a=D(l.val());l.attr("validValue",a?a:"")};l.change(c);l.keyup(c);l.keypress(function(a){if(0===a.which||8===a.which||a.ctrlKey||a.altKey||d.rxNumbersOnly.test(String.fromCharCode(a.which)))return!0;
13===a.which&&(e(),f.click());return!1});l.blur(e)},D=function(){var a;a:{a=l.val();if(d.rxNumbersOnly.test(a)&&(a=parseInt(a,10),!isNaN(a)))break a;a=!1}A.hide();var b=e(d.addToCartButtonSelector);if(!1===a||0>=a)v.show(),b.isEnabled()&&b.disable();else if(1E3<=a)t.show();else return b.isEnabled()||b.enable(),String(a);return!1};return{init:function(){h=!1;C();h=!0;if(q){m.hide().removeClass(d.auiHiddenClass);A.hide().removeClass(d.auiHiddenClass);var a=k.getOption(z),e=a.info()[0].text;a.update({value:"0",
text:b.trim(e)+"+"});B=k.val();y()}},valid:function(){C();return q&&m.is(":visible")?!1!==D():!0},val:function(){C();return q&&m.is(":visible")?l.attr("validValue"):x?k.val():1}}}()});c.register("fresh-dp-constants",function(){return{actionPanelStateData:"apstate",actionPanelFreshState:"fresh",mobileNavSearchFormSelector:'#nav-search-form, form[role="search"], #searchForm',rxNumbersOnly:/^\d+$/,auiHiddenClass:"aok-hidden",addToCartButtonSelector:"#freshAddToCartButton",dropdownID:"freshQuantity",
dropdownSelectedID:"a:dropdown:selected:freshQuantity",dropdownDivSelector:"#quantitySelect",freeTextDivSelector:"#quantityText",freeTextInputSelector:"#quantityTextInput",freeTextErrorDivsSelector:"#quantityTextErrors > div",freeTextErrorMsgMin:"#quantityFreeTextErrorMsgMin",freeTextErrorMsgMax:"#quantityFreeTextErrorMsgMax"}});c.when("A","ready").register("fresh-dp-prevent-atc-default",function(a){return{init:function(){a.$("#addToFreshCart").submit(function(a){a.preventDefault()})}}});
c.when("A","jQuery","a-button","ready").register("fresh-multiselleroffers-pagination-handler",function(a,b,c){function d(a){var e=parseInt(h.attr("data-currentPage"),10),d=parseInt(h.attr("data-pageCount"),10),e="next"===a?e+1:e-1;h.attr("data-currentPage",e);0===e?f.disable():f.enable();e===d-1?x.disable():x.enable();b(".freshMultiSellerOffer").addClass("hidden");b('.freshMultiSellerOffer[data-page="'+e+'"]').removeClass("hidden")}var g=b("#freshMultiSellerOffersPreviousPage"),e=b("#freshMultiSellerOffersNextPage"),
h=b("#freshMultiSellerOffersPagination"),f=c(g),x=c(e);a.declarative.create(g,"fresh-multiselleroffers-previous-page",{});a.declarative.create(e,"fresh-multiselleroffers-next-page",{});a.declarative("fresh-multiselleroffers-previous-page","click",function(a){f.isEnabled()&&d("previous")});a.declarative("fresh-multiselleroffers-next-page","click",function(a){x.isEnabled()&&d("next")})});c.when("A").register("afx-dp-uatc-proxy",function(a){return function(b){var c="/gp/add-to-cart/json";
b.reftag!==t&&(c+="/ref="+b.reftag);a.post(c,{timeout:5E3,params:{"session-id":b.sessionID,clientName:"SharedFreshHandler",nextPage:"cartitems",ASIN:b.asin,offerListingID:b.offerListingID,useUber:"1",source:"Fresh",ruleSet:"FreshGet",quantity:b.quantity},success:b.success,error:b.error})}});c.when("A").register("afx-dp-get-cart-count",function(a){return function(b){a.get("/gp/api/cart/1.0/get-cart-count.json",{timeout:5E3,params:{sessionID:b.sessionID,clientName:"sharedFreshHandler"},
success:b.success,error:b.error})}});c.when("A").register("afx-dp-get-cart-item-count",function(a){return function(a,c){if(c&&c.items){var d;for(d=0;d<c.items.length;++d){var g=c.items[d];if(g&&g.ASIN===a)return g.quantity}}}});c.register("afx-dp-csm-metrics-utils",function(){return{setWidgetClickTimestamp:function(a){g.ue&&g.uet&&a&&g.uet("bb",a,{wb:1})},setWidgetTimestamp:function(a,b){g.ue&&g.uet&&a&&b&&g.uet(a,b,{wb:1})},increment:function(a){g.ue&&g.ue.count&&a&&g.ue.count(a,
(g.ue.count(a)||0)+1)},setCount:function(a,b){g.ue&&g.ue.count&&a&&b&&g.ue.count(a,b)},sendWidgetMetrics:function(a){g.ue&&g.uex&&a&&g.uex("ld",a,{wb:1})}}});c.when("A","jQuery","a-button","ready").register("fresh-dp-double-click",function(a,b,c){return function(b){var c={disabled:"true"},e={};return function(h){var f=a.state("fresh-atc-status");f&&f.disabled||(f&&a.state("fresh-atc-status",c),b(h,function(){(f=a.state("fresh-atc-status"))&&a.state.replace("fresh-atc-status",e)}))}}});
c.register("afx-utils",function(){return{isFunction:function(a){return"function"===typeof a},isDefined:function(a){return"undefined"!==typeof a},vibrate:function(){return g.amazon&&g.amazon.cordova&&g.amazon.cordova.notification&&g.amazon.cordova.notification.vibrate&&g.amazon.cordova.notification.vibrate(50)}}})});
/* ******** */
(function(f){var e=window.AmazonUIPageJS||window.P,h=e._namespace||e.attributeErrors,c=h?h("FreshExperienceAddToCartAssets"):e;c.guardFatal?c.guardFatal(f)(c,window):c.execute(function(){f(c,window)})})(function(f,e,h){f.when("A","jQuery").register("afx-add-all-helper",function(c,d){return{updateQuantityForAsin:function(a,b,c){a&&b&&!isNaN(c)&&d("#"+a).closest("form").find("#afx-add-all-"+b+"-quantity").attr("value",c)}}});f.when("A","jQuery","a-button").register("fx-atfc-button-utils",
function(c,d,a){var b=!1;return{hideButtonAndRenderSpinner:function(a){var c=a.$currentTarget.find(".a-button");c&&c.length&&(b=!0,a="atfc-spinner-"+a.data.asin,c.wrap('<div id="'+a+'" class="atfc-spinner"></div>'),d("#"+a).css({width:c.outerWidth()+"px"}),d("#"+a).css({height:c.outerHeight()+"px"}),c.css("visibility","hidden"))},showButtonAndRemoveSpinner:function(a){var c=a.$currentTarget.find(".a-button");a=d("#atfc-spinner-"+a.data.asin);c&&c.length&&a&&a.length&&(b=!1,c.css("visibility","visible"),
c.unwrap())},shouldDisableButtonClicks:function(){return b}}});f.when("fresh-shared-add-to-cart-v2","ready").register("fresh-add-to-cart",function(c){function d(a){c.attachCallbacks(a)}c.initialize("desktop");return{addToFreshCart:function(a){d(a)},attachCallbacks:d,updateAddAllQuantityForAsin:c.updateAddAllQuantityForAsin,updateQuantity:c.updateQuantity}});f.when("A","jQuery").register("afx-atfc-v2-proxy",function(c,d){return{addToFreshCart:function(a){var b="/fpx/addtofreshcart";
a.reftag!==h&&(b+="/ref="+a.reftag+"/");d.ajax(b,{type:"POST",contentType:"application/json",data:JSON.stringify(a.data)}).done(a.success).fail(a.error)},showGenericErrorModal:function(a){c.post("/fpx/atfcGenericErrorModal/",{timeout:5E3,success:a.success,error:a.error})}}});f.when("A","jQuery").register("fx-atfo-proxy",function(c,d){return{addToFreshOrder:function(a){var b="/fom/add-to-fresh-order";a.reftag!==h&&(b+="/ref="+a.reftag);a.data!==h&&a.data.csrfToken&&(b+="?csrf="+encodeURIComponent(a.data.csrfToken));
c.post(b,{success:a.success,error:a.error,params:JSON.stringify(a.data),paramsFormat:"json",contentType:"application/json"})},getFallbackErrorModalHtml:function(){return{header:"Item was not added to the order",errorMessage:"We're sorry, there was an error and <b>this item was not added to your order.</b> Please try again.",footer:'<span class="a-declarative" data-action="a-popover-close"data-a-popover-close="{}">\n<span class="a-button primary-fresh-btn"><span class="a-button-inner"><input class="a-button-input"type="submit"><span class="a-button-text" aria-hidden="true">OK\n    </span></span></span>\n</span>'}}}});
f.when("A","jQuery").register("afx-atfc-cart-conflicts-proxy",function(c,d){return{getConflictSummary:function(a){c.post("/afx/cartconflicts/getconflictsummary",{timeout:5E3,success:a.success,error:a.error,params:{oldRegionId:a.data.oldRegionId,oldAddressId:a.data.oldAddressId,newRegionId:a.data.newRegionId,newAddressId:a.data.newAddressId,client:"atfc",ref:a.data.reftag}})},resolve:function(a){c.post("/afx/cartconflicts/resolve",{timeout:5E3,success:a.success,error:a.error,params:{oldRegionId:a.data.oldRegionId,
oldAddressId:a.data.oldAddressId,newRegionId:a.data.newRegionId,newAddressId:a.data.newAddressId,client:"atfc",ref:a.data.reftag}})},substitute:function(a){a="/afx/cartconflicts/resolve/substitute?"+d.param({oldRegionId:a.data.oldRegionId,oldAddressId:a.data.oldAddressId,newRegionId:a.data.newRegionId,newAddressId:a.data.newAddressId,ref:a.data.reftag,client:"atfc",sourceUrl:e.location.pathname+e.location.search});e.location.href=a}}});f.when("A").register("afx-get-cart-count",function(c){return function(d){c.post("/gp/api/cart/1.0/get-cart-count.json",
{timeout:5E3,params:{sessionID:d.sessionID,clientName:"SharedFreshHandler"},success:d.success,error:d.error})}});f.register("afx-callbacks-helper",function(c){function d(b){var c=b in a;!c&&f.log("Unable to retrieve callback for "+b,"Error");return c}var a={};return{addCallbacks:function(b){a[b.clientID||"default"]=b},success:function(b,c,e){b=b in a?b:"default";d(b)&&a[b].success&&a[b].success(c,e)},error:function(b,c,e,f){b=b in a?b:"default";d(b)&&a[b].error&&a[b].error(c,e,f)}}});
f.register("afx-csm-metrics-utils",function(){var c={},d=function(a,b){e.ue&&e.ue.count&&a&&b&&e.ue.count(a,b)};return{startWidgetTimer:function(a){c[a]=Date.now()},endWidgetTimer:function(a,b){var e=Date.now()-c[a];d(b,e)},setWidgetClickTimestamp:function(a){e.ue&&e.uet&&a&&e.uet("tc",a,{wb:1})},setWidgetTimestamp:function(a,b){e.ue&&e.uet&&a&&b&&e.uet(a,b,{wb:1})},increment:function(a){e.ue&&e.ue.count&&a&&e.ue.count(a,(e.ue.count(a)||0)+1)},setCount:d,sendWidgetMetrics:function(a){e.ue&&
e.uex&&a&&e.uex("ld",a,{wb:1})}}});f.when("A","jQuery","a-modal","afx-atfc-v2-proxy","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper","fresh-atfc-ewc-helper","ready").register("fresh-atfc-error-modal-utils",function(c,d,a,b,e,k,g,h){function r(b,d,e){d||n(b);b.data.quantity&&(g.updateQuantity("fresh-clear-slot-button",b.data.quantity),g.updateQuantity("alcohol-warning-fresh-add-to-cart-button",b.data.quantity));d={name:"fresh-add-to-cart-modal",header:d.header,inlineContent:d.errorMessage,
footer:d.footer};"desktop"===e&&(d.width=325);a.create(b.$currentTarget,d).show();c.on("a:popover:afterHide:".concat("fresh-add-to-cart-modal"),function(c){h.refreshCart(b.data.sessionID);a.remove(c.popover)})}function n(a,c){b.showGenericErrorModal({success:function(b,e,f){b&&(b=d.parseJSON(f.http.response),y(a,b,c))},error:function(){f.log("Failed to get the generic error modal","Error");r(a,{header:"Item was not added to the cart",errorMessage:"We're sorry, there was an error and <b>this item was not added to your cart.</b> Please try again.",
footer:'<span class="a-declarative" data-action="a-popover-close"data-a-popover-close="{}">\n<span class="a-button primary-fresh-btn"><span class="a-button-inner"><input class="a-button-input"type="submit"><span class="a-button-text" aria-hidden="true">OK\n    </span></span></span>\n</span>'},c)}})}function y(a,b,c){var d=b.errorModalHtml,f=k.getMetricsForDevice(c);b.clientResponseModel&&b.clientResponseModel.uberCartStatus&&b.clientResponseModel.uberCartStatus.errorStatusCode in f&&e.increment(f[b.clientResponseModel.uberCartStatus.errorStatusCode]);
r(a,d,c)}return{removeModal:function(){var b=a.get("fresh-add-to-cart-modal");b&&a.remove(b)},showModal:r,showGenericErrorModal:n,parseResponseAndShowErrorModal:y}});f.when("A","jQuery","afx-atfc-v2-proxy","afx-get-cart-count","ready").register("fresh-atfc-ewc-helper",function(c,d,a,b){function e(a){b({sessionID:a,success:function(a){a&&a.isOK&&a.total&&k(a.total.numActiveItem)},error:function(){f.log("Failed to get cart count","Error",a)}})}function k(a){f.when("nav.setCartCount").execute(function(b){b(a)});
f.when("mash").execute(function(b){b.cart&&"function"===typeof b.cart.didUpdate&&b.cart.didUpdate({newCartQuantity:a})})}var g;f.when("EWC").execute("add-to-cart-refresh",function(a){g=a});f.when("nav.getFlyout").execute(function(a){a("ewc")});return{refreshCart:function(a){g!==h&&"function"===typeof g.refresh?g.refresh():e(a)}}});f.register("afx-metrics-helper",function(){var c={ATFC_COUNT:"afxAddToFreshCartCount",ATFC_SUCCESSFUL_ADD_COUNT:"afxAddToFreshCartSuccessfulAddCount",ATFC_ERROR_MODAL_COUNT:"afxAddToFreshCartErrorModalCount",
ATFC_UNEXPECTED_ERROR_COUNT:"afxAddToFreshCartUnexpectedErrorCount",ATFC_LATENCY_SCOPE:"afxAddToFreshCartLatencyScope",ATFC_ERROR_MODAL_LATENCY_SCOPE:"afxAddToFreshCartErrorModalLatencyScope",ATFC_CTCF:"afxAddToFreshCartCTCF",CLEAR_SLOT_ATFC_CTCF:"afxClearSlotAndAddToFreshCartCTFC",CART_SERVICE_RESPONSE_FALSE:"afxCartServiceResponseIsNotOKErrorCount",ITEM_NOT_AVAILABLE:"afxItemNotAvailableErrorModalCount",ITEM_PARTIALLY_AVAILABLE:"afxItemPartiallyAvailableErrorModalCount",ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION:"afxItemPartiallyAvailableErrorModalCount",
ADDRESS_NOT_SELECTED:"afxAddressNotSelectedErrorCount",INPUT_INVALID:"afxGeneralErrorModalCount",ITEM_NOT_AVAILABLE_FOR_RESERVATION:"afxItemNotAvailableForReservationErrorModalCount",INTERNAL_SERVER_ERROR:"afxGeneralErrorModalCount",PRICE_UNAVAILABLE:"afxItemNotAvailableErrorModalCount",QUANTITY_OVERFLOW:"afxUniqueItemQuantityOverflowErrorModalCount"};return{getMetricsForDevice:function(d){var a={};Object.keys(c).forEach(function(b){a[b]=c[b]+":"+d});return a}}});f.when("A").register("afx-quantity-helper",
function(c){var d={};return{updateQuantity:function(a,b){"undefined"!==typeof a&&null!==a&&!isNaN(b)&&0<b&&(d[a]=b||1)},getQuantity:function(a){a=a.closest(".a-button");return 0<a.length?d[a.attr("id")]||1:1}}});f.when("afx-atfc-cart-conflicts-proxy").register("afx-atfc-cart-conflicts-executor",function(c){return{execute:function(d){c.getConflictSummary({data:d.data,success:function(a,b,e){!0===a.isSuccess?!0===a.hasConflicts?c.substitute({data:d.data}):c.resolve({data:d.data,success:function(){location.reload()},
error:d.error}):d.error(e,b,"Failed to call getconflictsummary")},error:d.error})}}});f.when("A","jQuery","afx-atfc-v2-proxy","fx-atfo-proxy","afx-get-cart-count","fx-atfc-button-utils","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper","afx-callbacks-helper","afx-atfc-cart-conflicts-executor","fresh-atfc-error-modal-utils","fresh-atfc-ewc-helper","afx-add-all-helper","ready").register("fresh-shared-add-to-cart-v2",function(c,d,a,b,h,k,g,u,r,n,y,m,v,p){return{updateQuantity:r.updateQuantity,
attachCallbacks:n.addCallbacks,updateAddAllQuantityForAsin:p.updateQuantityForAsin,initialize:function(h){function p(b,e,f,q){b.data.quantity=r.getQuantity(b.$target);a.addToFreshCart({data:b.data,reftag:b.data.reftag,success:function(a,d,h){200===h.status&&(g.increment(l.ATFC_SUCCESSFUL_ADD_COUNT),d=l.ATFC_CTCF+":lineItemBucket:"+w(a),g.endWidgetTimer(e,d),v.refreshCart(b.data.sessionID),n.success(b.data.clientID,b,a.clientResponseModel),c.trigger("fresh-atfc:success"));m.removeModal();k.showButtonAndRemoveSpinner(b);
f&&f()},error:function(a,c,f){var p=l.ATFC_CTCF,t=a.responseText,u;m.removeModal();t&&(u=JSON.parse(t),p=l.ATFC_CTCF+":lineItemBucket:"+w(u.clientResponseModel));300===a.status?(g.increment(l.ATFC_ERROR_MODAL_COUNT),a={asin:b.data.asin,offerListingID:b.data.offerListingID,quantity:r.getQuantity(b.$target),redirectURL:document.location.href,ref:"afx_atfc_noaddress"},g.increment(l.ADDRESS_NOT_SELECTED),a=d.param(a),document.location.href="/afx/nc/chooseaddress?"+a):400===a.status?(g.increment(l.ATFC_ERROR_MODAL_COUNT),
m.parseResponseAndShowErrorModal(b,u,h)):(g.increment(l.ATFC_UNEXPECTED_ERROR_COUNT),m.showGenericErrorModal(b,h),n.error(b.data.clientID,b,a,c,f));g.endWidgetTimer(e,p);k.showButtonAndRemoveSpinner(b);q&&q()}})}function q(a,b){g.startWidgetTimer(b);c.post("/afx/slotselection/cancel",{timeout:5E3,params:{token:a.data.additionalParams.csrfToken},success:function(){p(a,b,function(){location.reload()})},error:function(){f.log("Failed to clear reservation");m.showGenericErrorModal(a,h)}})}function x(){return e.amazon&&
e.amazon.cordova&&e.amazon.cordova.notification&&e.amazon.cordova.notification.vibrate&&e.amazon.cordova.notification.vibrate(50)}function w(a){return a.items&&Math.ceil(a.items.length/5)}var l=u.getMetricsForDevice(h),t=l.ATFC_LATENCY_SCOPE+Date.now();c.declarative("fresh-clear-slot","click",function(a){a.$currentTarget.context.disabled=!0;q(a,t)});c.declarative("fresh-add-to-cart","click",function(a){g.startWidgetTimer(t);g.increment(l.ATFC_COUNT);k.shouldDisableButtonClicks()||a.$currentTarget.find("input").is(":disabled")||
(k.hideButtonAndRenderSpinner(a),x(),p(a,t))});c.declarative("fresh-add-to-cart-alcohol","click",function(a){a.$currentTarget.context.disabled=!0;g.startWidgetTimer(t);p(a,t)});c.declarative("fresh-add-to-cart-regions-resolve","click",function(a){a.$currentTarget.context.disabled=!0;y.execute({data:a.data,error:function(b,c,d){m.showGenericErrorModal(a,h);n.error(a.data.clientID,a,b,c,d)}})});c.declarative("fresh-add-to-order","click",function(a){k.shouldDisableButtonClicks()||(k.hideButtonAndRenderSpinner(a),
x(),b.addToFreshOrder({data:a.data,reftag:a.data.reftag,success:function(b,c,d){200===d.http.status&&n.success(a.data.clientID,a,b.clientResponseModel);k.showButtonAndRemoveSpinner(a)},error:function(c,d,e){m.removeModal();if(400===c.http.status)c=JSON.parse(c.responseText),m.parseResponseAndShowErrorModal(a,c,h);else if(401===c.http.status)location.reload();else{var f=b.getFallbackErrorModalHtml();m.showModal(a,f,h);n.error(a.data.clientID,a,c,d,e)}k.showButtonAndRemoveSpinner(a)}}))})}}})});
/* ******** */
(function(m){var k=window.AmazonUIPageJS||window.P,n=k._namespace||k.attributeErrors,a=n?n("DetailPageAlohaAssets"):k;a.guardFatal?a.guardFatal(m)(a,window):a.execute(function(){m(a,window)})})(function(m,k,n){k.alohaBuyBoxUSLoadDone||(k.alohaBuyBoxUSLoadDone=!0,m.when("A","a-dropdown","alohaBuyBoxJS","aloha-base","ready").execute(function(a,h,e){var c=a.$,b=this;b.buyboxJs=new e;b.buyboxRefreshDone=!1;b.pricingRefreshDone=!1;b.availabilityRefreshDone=!1;b.buyboxJs.getLinkOffDisplayed()&&(e=b.buyboxJs.getSessionId(),
b.buyboxJs.logLinkOffMetrics("IMPRESSION",e));a.on("aloha:buyboxRefreshComplete",function(){b.buyboxRefreshDone=!0;b.updateWidgets()});a.on("aloha:pricingRefreshComplete",function(){b.pricingRefreshDone=!0;b.updateWidgets()});a.on("aloha:availabilityRefreshComplete",function(){b.availabilityRefreshDone=!0;b.updateWidgets()});b.updateWidgets=function(){if(b.pricingRefreshDone&&b.buyboxRefreshDone&&b.availabilityRefreshDone){var a=b.selectedTransaction,e=b.selectedContractType!==n?b.selectedContractType:
b.selectedConditionType;/^financing.+/.test(e)&&(e="financing");var f;f="linkOff"===a?c("#linkOffSection"):c("#alohaBuyBoxWidget #contract-container-"+a);var g;switch(e){case "m2m":g=c("#alohaBuyBoxWidget #"+a+"-m2m-info");break;case "twoYear":g=c("#alohaBuyBoxWidget #"+a+"-info");break;case "financing":g=c("#alohaBuyBoxWidget #financing-contract-"+a+" ."+b.selectedContractType);break;case "new":g=c("#alohaBuyBoxWidget #DEVICE_ONLY-new-info");break;case "used":g=c("#alohaBuyBoxWidget #DEVICE_ONLY-used-info");
break;case "refurbished":g=c("#alohaBuyBoxWidget #DEVICE_ONLY-refurbished-info")}b.selectedTransaction=b.selectedContractType=b.selectedConditionType=n;f!==n&&f.length&&h.getSelect("transaction-selector").setValue(a);g!==n&&g.length&&g.trigger("click");b.pricingRefreshDone=b.buyboxRefreshDone=b.availabilityRefreshDone=!1}};c(document).delegate("li[id^='transaction-selector'] a.a-active","click",function(){var a=c("#alohaBuyBoxWidget div .contract-container:visible .selected");a!==n&&a.length&&a.trigger("click")});
a.declarative("select-transaction","change click",function(a){var e=h.getSelect("transaction-selector").val(),f=a.data.sessionId;""!==e&&e!==n&&(b.buyboxJs.hideTransactionAlertMessage(),"linkOff"===e?(b.buyboxJs.showLinkOffButton(),b.buyboxJs.hideFastTrackMessage(),b.buyboxJs.hideTransactionContainer(),b.buyboxJs.hideAddToCartWithoutContractButton(),b.buyboxJs.hideAddToCartWithContractButton(),b.buyboxJs.hideAvailabilityMessage(),b.buyboxJs.showLinkOffPrice(),b.buyboxJs.showLinkOffAvailability(),
b.buyboxJs.updatePricingContainer(),b.buyboxJs.logLinkOffMetrics("IMPRESSION",f),b.selectedTransaction=e,b.selectedContractType=b.selectedConditionType=n):(b.buyboxJs.showFastTrackMessage(),b.buyboxJs.hideLinkOffButton(),b.buyboxJs.hideLinkOffAvailability(),b.buyboxJs.hideLinkOffPrice(),b.buyboxJs.displayTransactionContainer(e),b.buyboxJs.updatePricingContainer(e),b.buyboxJs.updateTaxInfoForTransaction(e),"change"===a.type?(b.buyboxJs.disableAddToCartButton(e),b.selectedTransaction=e,b.selectedContractType=
b.selectedConditionType=n,c("#alohaBuyBoxWidget #contract-container-"+e+" .selected").trigger("click")):"click"===a.type&&b.buyboxJs.showMorePricingOption()))});a.declarative("link-off-click","click",{allowLinkDefault:!0},function(a){b.buyboxJs.logLinkOffMetrics("CLICK",a.data.sessionId)});a.declarative("select-contract","click",function(a){var e=a.data.transaction,f=a.data.discriminator;c("#contract-container-"+e+" .selected").removeClass("selected");a.$currentTarget.addClass("selected");var g=a.data.offerListingType;
b.buyboxJs.hideAvailabilityMessage();if("PURCHASABLE"===g){b.buyboxJs.showFastTrackMessage();b.buyboxJs.hideLinkOffButton();var x="true"===a.data.financingContract?!0:!1,h="true"===a.data.twoYearContract?!0:!1,w="true"===a.data.m2mContract?!0:!1;b.selectedContractType=a.data.contractType;b.buyboxJs.updateM2MSelectedField("false");b.buyboxJs.updateFinancingOptionField("");x?(a=a.data.asin,b.buyboxJs.updateFinancingOptionField(a),b.buyboxJs.updateTaxInfoForFinancingTerm(a),b.buyboxJs.enableAddToCartButton(e,
a)):h?(b.buyboxJs.updateTaxInfoForTransaction(e),b.buyboxJs.enableAddToCartButton(e)):w&&(b.buyboxJs.updateM2MSelectedField("true"),b.buyboxJs.enableAddToCartButton(e,"",w));b.buyboxJs.hideMorePricingOption()}else"ADVERTISEMENT"===g&&(b.buyboxJs.hideFastTrackMessage(),b.buyboxJs.hideAddToCartButton(),b.buyboxJs.showLinkOffButton(),b.buyboxJs.hideMorePricingOption());b.buyboxJs.updatePricingContainer(e,g,f);b.buyboxJs.updateAvailabilityMessage(e,g,f)});a.declarative("select-device-only","click",function(a){var e=
a.data.transaction,f=a.data.condition,g=a.data.discriminator,x=a.data.offerListingType;b.selectedConditionType=f;b.buyboxJs.hideAddToCartButton();b.buyboxJs.toggleAddToCartWithoutContractButton(f);c("#device-only-container .selected, #contract-container-DEVICE_ONLY .selected").removeClass("selected");"new"===f&&(b.buyboxJs.hideAvailabilityMessage(),b.buyboxJs.updatePricingContainer(e,x,g),b.buyboxJs.updateAvailabilityMessage(e,x,g));a.$currentTarget.addClass("selected")});a.declarative("checkout-with-popover",
"click",function(d){var e=[];c("#aloha-cart-details .deviceContainer").each(function(a){a=c(this);e.push(a.find(".lineId").val())});var f={"operations[]":["REMOVE_DEVICE","ADD_DEVICE"]};f["lineid[]"]=e;d=c("#aloha-atc-fields");c.extend(f,b.buyboxJs.serializeInputs(d));d=b.buyboxJs.buildExternalAlohaPath("/rbi/aloha/alohaCartPopoverHandler");a.ajax(d,{method:"post",params:f,success:function(a){b.buyboxJs.handleAddToCartAjaxSuccess(a,f.transaction)},error:function(a){b.buyboxJs.handleAjaxFailure()}})});
a.declarative("tax-info-popup","click",function(a){var b=a.data.id;a="/gp/help/customer/display.html/ref="+a.data.refTag+"?ie=UTF8&pop-up=1&nodeId=";var e=800,g=540,x=(k.screenX?k.screenX:k.screenLeft)+(c(k).width()-e)/2,h=(k.screenY?k.screenY:k.screenTop)+(c(k).height()-g)/2;k.outerWidth&&k.innerWidth&&(x+=(k.outerWidth-k.innerWidth)/2);k.outerHeight&&k.innerHeight&&(h+=k.outerHeight-k.innerHeight);k.open(a+b,"newwindow","height="+(g-172)+",width="+(e-16)+",left="+x+",top="+h+",location=no,scrollbars=yes,toolbar=no,menubar=no,directories=no,status=yes,resizable=yes")});
a.declarative("add-to-cart-with-no-contract","click",function(a){b.buyboxJs.resetTransactionDropdown()})}),m.when("A","a-modal","aloha-base").register("alohaBuyBoxJS",function(a,h){return function(){var e=a.$,c=this;c.settings={DEFAULT_ERROR_HEADER_MESSAGE:e("#alohaBuyBoxWidget input[name=aloha-default-error-message-header]").val(),DEFAULT_ERROR_MESSAGE:e("#alohaBuyBoxWidget input[name=aloha-error-message").val(),TRANSACTION_ALERT_SELECTOR:".select-transaction-alert",ADD_TO_CART_BUTTON_WITH_CONTRACT:"#add-to-cart-with-contract-btn",
ADD_TO_CART_NEW_WITHOUT_CONTRACT_FORM_CONTAINER:"#new-add-to-cart",ADD_TO_CART_USED_WITHOUT_CONTRACT_FORM_CONTAINER:"#used-add-to-cart",ADD_TO_CART_REFURBISHED_WITHOUT_CONTRACT_FORM_CONTAINER:"#refurbished-add-to-cart",CONTRACT_SALES_TAX_INFO_DIV:"#aloha-bb-contract-links",FINANCING_SALES_TAX_INFO_DIV:"#aloha-bb-financing-links",LINKOFF_URL_SECTION:"#alohaBuyBoxWidget #linkOffSection",ADD_TO_CART_BUTTON:"#alohaBuyBoxWidget .add-to-cart",SESSION_ID_CONTAINER:"#page-session-id",EXISTING_ADD_TO_CART_POPOVER_LABEL:"#existingCartPopoverLabel",
DP_ADD_TO_CART_ERROR_LABEL:"#dpAddToCartErrorLabel",FASTRACK_MESSAGE_DIV:"#dpFastTrack_feature_div",LINK_OFF_PRICE:"#link-off-price",LINK_OFF_AVAILABILITY:".link-off-availability",LINK_OFF_LINKS:".link-off-url",CARRIER_CODE:"#aloha-carriercode"};c.getSessionId=function(){return e(c.settings.SESSION_ID_CONTAINER).val()};c.getLinkOffDisplayed=function(){return e(c.settings.LINKOFF_URL_SECTION).is(":visible")};c.showLinkOffPrice=function(){e(c.settings.LINK_OFF_PRICE).removeClass("aok-hidden")};c.hideLinkOffPrice=
function(){e(c.settings.LINK_OFF_PRICE).addClass("aok-hidden")};c.showLinkOffAvailability=function(){e(c.settings.LINK_OFF_AVAILABILITY).removeClass("aok-hidden");e(c.settings.LINK_OFF_AVAILABILITY).removeClass("a-hidden")};c.hideLinkOffAvailability=function(){e(c.settings.LINK_OFF_AVAILABILITY).addClass("aok-hidden")};c.hideFastTrackMessage=function(){e(c.settings.FASTRACK_MESSAGE_DIV).addClass("aok-hidden")};c.UNKNOWN_CARRIER_CODE="UNKNOWN";c.getCurrentCarrierCode=function(){return a.$(c.settings.CARRIER_CODE).val()||
c.UNKNOWN_CARRIER_CODE};c.logLinkOffMetrics=function(a,d){k.ue&&"function"===typeof k.ue.count&&k.ue.count("Aloha.LINKOFF."+c.getCurrentCarrierCode()+"."+a+".JS",1)};c.showFastTrackMessage=function(){e(c.settings.FASTRACK_MESSAGE_DIV).removeClass("aok-hidden")};c.getExistingAddToCartLabel=function(){return e(c.settings.EXISTING_ADD_TO_CART_POPOVER_LABEL).val()};c.getDPAddToCartErrorLabel=function(){return e(c.settings.DP_ADD_TO_CART_ERROR_LABEL).val()};c.hideAddToCartButton=function(){e(c.settings.ADD_TO_CART_BUTTON).addClass("a-hidden")};
c.hideAddToCartWithoutContractButton=function(){e(c.settings.ADD_TO_CART_NEW_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden");e(c.settings.ADD_TO_CART_USED_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden");e(c.settings.ADD_TO_CART_REFURBISHED_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden")};c.hideAddToCartWithContractButton=function(){e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).addClass("a-hidden")};c.showAddToCartButton=function(){e(c.settings.ADD_TO_CART_BUTTON).removeClass("a-hidden")};
c.hideLinkOffButton=function(){e(c.settings.LINKOFF_URL_SECTION).addClass("a-hidden")};c.showLinkOffButton=function(){e(c.settings.LINKOFF_URL_SECTION).removeClass("a-hidden")};c.displayTransactionContainer=function(a){e(".contract-container").addClass("a-hidden");e("#contract-container-"+a).removeClass("a-hidden");e("#contract-container-"+a).removeClass("aok-hidden")};c.hideTransactionContainer=function(a){e(".contract-container").addClass("aok-hidden")};c.hideTransactionAlertMessage=function(){e(c.settings.TRANSACTION_ALERT_SELECTOR).addClass("a-hidden")};
c.enableAddToCartButton=function(a,d,p){e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).hasClass("a-hidden")&&e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).removeClass("a-hidden");e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).hasClass("a-button-disabled")&&e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).removeClass("a-button-disabled");c.setTransactionType(a);c.updateM2MSelectedField(p);d!==n&&""!==d?(c.setFinancingOptionAsin(d),c.setM2MContractSelected("")):p!==n&&""!==p&&(c.setM2MContractSelected(p),
c.setFinancingOptionAsin(""))};c.setTransactionType=function(a){e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).find("input").data("add-to-cart").transaction=a;e("#aloha-atc-fields input#transactionTypeSelected").val(a)};c.setFinancingOptionAsin=function(a){e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).find("input").data("add-to-cart").financingOptionAsin=a};c.setM2MContractSelected=function(a){e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).find("input").data("add-to-cart").m2mSelected=a};c.updatePricingContainer=
function(a,d,c){e(".pricing-info").addClass("a-hidden");d!==n&&c!==n?e("#"+c+"-"+d).removeClass("a-hidden"):e(".pricing-detail-"+a).removeClass("a-hidden")};c.hideMorePricingOption=function(){e(".more-pricing-option").addClass("a-hidden")};c.showMorePricingOption=function(){e(".more-pricing-option").removeClass("a-hidden")};c.updateFinancingOptionField=function(a){e("input[name=financingOptionAsin]").val(a)};c.updateM2MSelectedField=function(a){e("input[name=m2mSelected]").val(a)};c.disableAddToCartButton=
function(a){e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).hasClass("a-button-disabled")||e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).addClass("a-button-disabled");"ALL"===a||"DEVICE_ONLY"===a?e(c.settings.ADD_TO_CART_BUTTON_WITH_CONTRACT).addClass("a-hidden"):(e(c.settings.ADD_TO_CART_NEW_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden"),e(c.settings.ADD_TO_CART_USED_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden"),e(c.settings.ADD_TO_CART_REFURBISHED_WITHOUT_CONTRACT_FORM_CONTAINER).addClass("a-hidden"))};
c.hideDeviceOnlyAddToCartButton=function(a){e("#alohaBuyBoxWidget .aloha-no-contract-cart-button").addClass("a-hidden")};c.updateAvailabilityMessage=function(a,d,c){e("#availabilityInfo").removeClass("a-hidden");e("#availabilityInfo-"+c+"-"+d).removeClass("a-hidden")};c.hideAvailabilityMessage=function(a){e(".availability").addClass("a-hidden")};c.handleAddToCartAjaxSuccess=function(a,d,p){var f="http://"+location.host+"/wl/rbi/puc",g="https://"+location.host+"/wl/co/uew",x="INDIVIDUAL_NEW"===d?!1:
!0;"SUCCESS"===a.status?(a=!0===x?g:f,c.resetTransactionDropdown(),location.href=a):a.cartAdditionConflictOccurred?(f=e("#alohaShortDeviceTitle").val(),g={},g.conflictType=a.cartAdditionConflictType,g.deviceTitle=f,g.transaction=d,g.requiresAui="true",g.vid=p,a=c.buildExternalAlohaPath("/rbi/aloha/existingOrderInAlohaCartPopover")+"?"+e.param(g),d=c.getExistingAddToCartLabel(),p=e("#aloha-cart-popover-trigger"),h.create(p,{url:a,position:"triggerTop",width:900,hiddenOnClick:"true",popoverLabel:d}).show()):
c.handleAjaxFailure(a.errorType,a.errorDetailMessage)};c.handleAjaxFailure=function(a,d){var p=e("#aloha-cart-error-failure-message-trigger"),f=c.getDPAddToCartErrorLabel();h.create(p,{header:a!==n?a:c.settings.DEFAULT_ERROR_HEADER_MESSAGE,inlineContent:d!==n?d:c.settings.DEFAULT_ERROR_MESSAGE,position:"triggerVertical",width:400,popoverLabel:f}).show()};c.updateTaxInfoForTransaction=function(a){"ALL"===a||"DEVICE_ONLY"===a?(e(c.settings.CONTRACT_SALES_TAX_INFO_DIV).addClass("a-hidden"),e(c.settings.FINANCING_SALES_TAX_INFO_DIV).addClass("a-hidden")):
(e(c.settings.CONTRACT_SALES_TAX_INFO_DIV).removeClass("a-hidden"),e(c.settings.FINANCING_SALES_TAX_INFO_DIV).removeClass("a-hidden"))};c.updateTaxInfoForFinancingTerm=function(a){a!==n&&""!==a?(e(c.settings.CONTRACT_SALES_TAX_INFO_DIV).addClass("a-hidden"),e(c.settings.FINANCING_SALES_TAX_INFO_DIV).removeClass("a-hidden")):(e(c.settings.CONTRACT_SALES_TAX_INFO_DIV).removeClass("a-hidden"),e(c.settings.FINANCING_SALES_TAX_INFO_DIV).addClass("a-hidden"))};c.serializeInputs=function(a){var d={};a.find("input").each(function(a,
b){d[b.name]=b.value});return d};c.buildExternalAlohaPath=function(a){return"/wl"+a};c.toggleAddToCartWithoutContractButton=function(a){e("#alohaBuyBoxWidget .aloha-no-contract-cart-button").addClass("a-hidden");e("#alohaBuyBoxWidget #"+a+"-add-to-cart").removeClass("a-hidden")};c.resetTransactionDropdown=function(){e("#transaction-selector-dropdown").prop("selectedIndex",-1);e("#transaction-selector").prop("selectedIndex",-1)}}}));m.when("aloha.carriercompatibility.model","aloha.dp.carriercompatibility.view",
"A").execute(function(a,h,e){a=new a;h=new h(a);e.declarative("swatchthumb-action","mouseenter",h.onTwisterMouseEnter);e.declarative("swatchthumb-action","mouseleave",h.onTwisterMouseLeave);e.declarative("swatchthumb-action","click",h.onTwisterClick);e.on("a:pageUpdate",h.onTwisterRefresh);e.declarative("a-modal","click",h.onModalClick);e.declarative("sortByCarrier","click",h.onCarrierHeaderClick);e.declarative("sortByCompatibility","click",h.onCompatibilityHeaderClick);e.on("a:dropdown:aloha-carrier-compatibility-country-dropdown-overview:select",
h.onDropdownSelect);e.on("a:dropdown:aloha-carrier-compatibility-country-dropdown-modal:select",h.onDropdownSelect)});m.when("A","ready").execute("aloha.carrierCompatibility.onStart",function(a){a.objectIsEmpty(a.state("current-asin"))||a.objectIsEmpty(a.state("default-country"))||a.objectIsEmpty(a.state("all-carriers-by-country-and-asin"))||a.objectIsEmpty(a.state("top-carriers-by-country-and-asin"))||m.declare("aloha.carrierCompatibility.ready")});m.declare("aloha.carrierCompatibility.SortByEnum",
{compatibility:0,carrierName:1});m.when("A","aloha.carrierCompatibility.SortByEnum","aloha.carrierCompatibility.ready").register("aloha.carriercompatibility.model",function(a,h){var e={"Fully Compatible":0,"4G/LTE Compatible":1,"Limited Data Speed":2,"Text and Voice Only":3,"Data Only":4,"No Service":5},c=function(){this.getCountries=function(d){return(d=this.allCarriersByCountryAndAsin[d])?a.map(d,function(a,d){return d}):[]};this.getModalDescription=function(){var d=a.$("#productTitle").text();
return this.modalDescriptionFormat.replace("${product_title}",d)};this.isAsinValid=function(a){return this.allCarriersByCountryAndAsin[a]&&this.topCarriersByCountryAndAsin[a]};this.setAsin=function(a){this.previousAsin=this.asin;this.asin=a;a=this.getCountries(a);0<=a.indexOf(this.country)||(this.country=0<=a.indexOf(this.defaultCountry)?this.defaultCountry:a[0])};this.sortBy=function(a){b(!1,a)};this.sortByDescending=function(a){b(!0,a)};var b=function(a,b){this.sortByType={type:b,isDescending:a};
d(this.allCarriersByCountryAndAsin,b,this.sortByType.isDescending);d(this.topCarriersByCountryAndAsin,b,this.sortByType.isDescending)}.bind(this),d=function(a,d,b){for(var c in a)if(a.hasOwnProperty(c))for(var e in a[c])if(a[c].hasOwnProperty(e)){var h=a[c][e];b?this.sorter.sortCarriersByDescending(h,d):this.sorter.sortCarriersBy(h,d)}}.bind(this);this.previousAsin=null;this.asin=a.state("current-asin").asin;this.country=this.defaultCountry=a.state("default-country").country;this.allCarriersByCountryAndAsin=
a.state("all-carriers-by-country-and-asin");this.topCarriersByCountryAndAsin=a.state("top-carriers-by-country-and-asin");this.modalDescriptionFormat=a.state("modalDescription").format};c.prototype.sorter=new function(){this.sortCarriersBy=function(d,c){a(d,c,!1)};this.sortCarriersByDescending=function(d,c){a(d,c,!0)};var a=function(a,b,c){switch(b){case h.carrierName:a.sort(function(a,b){return c?d(b.carrierName,a.carrierName):d(a.carrierName,b.carrierName)});break;default:a.sort(function(a,b){return c?
d(e[b.compatibilityRatingSummary],e[a.compatibilityRatingSummary])||d(b.carrierName,a.carrierName):d(e[a.compatibilityRatingSummary],e[b.compatibilityRatingSummary])||d(a.carrierName,b.carrierName)})}},d=function(a,d){return a>d?1:a<d?-1:0}};return c});m.when("jQuery","A","a-dropdown","aloha.carrierCompatibility.SortByEnum").register("aloha.dp.carriercompatibility.view",function(a,h,e,c){return function(b){this.model=b;this.csmKeys={modalDisplayed:"alohaCarrierCompatibilityModalDisplayed"};
this.selectors={overviewDropdownId:"aloha-carrier-compatibility-country-dropdown-overview",modalDropdownId:"aloha-carrier-compatibility-country-dropdown-modal",carrierNameClass:".carrier-name",carrierRatingSummaryClass:".carrier-rating-summary",carrierRatingSummary:"carrier-rating-summary",colorClass:"a-color-",textBoldClass:"a-text-bold",downArrowClass:"a-icon a-icon-section-expand selector-arrow",upArrowClass:"a-icon selector-arrow a-icon-section-collapse",compatibleVoiceText:".compatible-voice-text",
compatible2G:".compatible-2G",compatible3G:".compatible-3G",compatible4GLTE:".compatible-4GLTE",check:"aloha-carrier-compatibility-check-icon"};this.$webElements={compatibilityWidget:a("#aloha-carrier-compatibility-widget"),overviewTableRows:a(".aloha-carrier-compatibility-overview-table-row"),modalTableRows:a(".aloha-carrier-compatibility-modal-table-row"),carrierSortIcon:a(".aloha-carrier-compatibility-carrier-sort-icon"),compatibilitySortIcon:a(".aloha-carrier-compatibility-compatibility-sort-icon"),
modalDescription:a("#aloha-carrier-compatibility-modal-table-description").find("> span")};this.onTwisterMouseEnter=function(){var a=r();d(a)}.bind(this);this.onTwisterMouseLeave=function(){d(this.model.previousAsin)}.bind(this);this.onTwisterClick=function(){var a=k.DetailPage.StateController.getState().current_asin;d(a)}.bind(this);this.onTwisterRefresh=function(){this.$webElements.modalDescription.text(this.model.getModalDescription())}.bind(this);this.onModalClick=function(){var a=k.ue;if(a&&
a.count){var d=this.csmKeys.modalDisplayed,b=a.count(d)||0;a.count(d,b+1)}}.bind(this);this.onCarrierHeaderClick=function(){f(c.carrierName);l();p()}.bind(this);this.onCompatibilityHeaderClick=function(){f(c.compatibility);l();p()}.bind(this);this.onDropdownSelect=function(a){a=a.value;this.model.country=a;l(a);e.getSelect(this.selectors.overviewDropdownId).setValue(a);e.getSelect(this.selectors.modalDropdownId).setValue(a)}.bind(this);var d=function(a){this.model.setAsin(a);this.model.isAsinValid(a)?
(B(a),l(),g()):x()}.bind(this),p=function(){this.$webElements.carrierSortIcon.removeClass(this.selectors.upArrowClass+" "+this.selectors.downArrowClass);this.$webElements.compatibilitySortIcon.removeClass(this.selectors.upArrowClass+" "+this.selectors.downArrowClass);(this.model.sortByType.type===c.carrierName?this.$webElements.carrierSortIcon:this.$webElements.compatibilitySortIcon).addClass(this.model.sortByType.isDescending?this.selectors.upArrowClass:this.selectors.downArrowClass)}.bind(this),
f=function(a){this.model.sortByType.type===a&&this.model.sortByType.isDescending||this.model.sortByType.type!==a?this.model.sortBy(a):this.model.sortByDescending(a)}.bind(this),g=function(){this.$webElements.compatibilityWidget.show()}.bind(this),x=function(){this.$webElements.compatibilityWidget.hide()}.bind(this),h=function(d,b,c){d=a(d.find(this.selectors.carrierRatingSummaryClass));c=c?b.modalCompatibilityRatingSummary:b.compatibilityRatingSummary;d.removeClass();d.addClass(this.selectors.carrierRatingSummary);
d.addClass(this.selectors.colorClass+b.compatibilityRatingSummaryColor);d.text(c);b.compatibilityRatingIsBold&&d.addClass(this.selectors.textBoldClass)}.bind(this),w={compatibleVoiceText:this.selectors.compatibleVoiceText,compatible2G:this.selectors.compatible2G,compatible3G:this.selectors.compatible3G,compatible4GLTE:this.selectors.compatible4GLTE},m=function(d,b){var c=this.selectors.check;a.each(w,function(a){var g=b[a];a=d.find(w[a]);"Check"===g?(a.addClass(c),a.empty()):(a.removeClass(c),a.html(g))})}.bind(this),
z=function(a,d){a.show();a.find(this.selectors.carrierNameClass).text(d.carrierName);h(a,d)}.bind(this),u=function(a,d){a.show();a.find(this.selectors.carrierNameClass).text(d.carrierName);h(a,d,!0);m(a,d)}.bind(this),r=function(){var d=k.DetailPage.StateController.getState(),b=d.asin_variation_values,c=d.variation_label_order,g=d.hovered_variations,e;for(e in b)if(b.hasOwnProperty(e)){var f=b[e];if(a.grep(c,function(b){var c=f[b];b=a.inArray(g[b],d.variation_values[b]);return c==b}).length===c.length)return f.ASIN}return null},
l=function(d,b){d||(d=this.model.country);b||(b=this.model.asin);var c=this.model.allCarriersByCountryAndAsin[b][d],g=this.model.topCarriersByCountryAndAsin[b][d];this.$webElements.overviewTableRows.each(function(d,b){var c=g[d],e=a(b);c?z(e,c):e.hide()});this.$webElements.modalTableRows.each(function(d,b){var g=c[d],e=a(b);g?u(e,g):e.hide()})}.bind(this),B=function(a){}.bind(this)}});m.when("A","a-modal").register("aloha.utils",function(a,h){return{showAjaxErrorModal:function(a,c,b){var d=
h.get(a);null===d?d=h.create(a,{content:b,header:c}):d.update({content:b,header:c});d.show().refresh()}}});m.when("A","a-modal","a-checkbox","aloha-simplebundle-common","ready").execute(function(a,h,e,c){function b(){a.declarative("show-review-tab","click",function(b){a.$(b.$target).closest(d.AUI_PAGE_ROOT).find(".popoverReviewsTab").click()});a.declarative("add-to-cart","click",function(b){a.$(d.SB_ROOT+" "+d.SB_BUYBOX_ITEM_CHECKBOX+" "+d.INPUT_TYPE_CHECKBOX).filter(function(){return a.$(this).data("asin")===
b.data.asin}).prop("checked",!0).change();a.$("[id^=popover-simpleBundle-]").each(function(){var d=h.get(a.$(this));d.isActive()&&d.hide()})});a.declarative("focus-image","mouseenter",function(a){var b=a.$target,c=b.parents(d.AUI_PAGE_ROOT);a=a.data;c.find("#productImageMain-"+a.asin).attr("src",a.imageUrl);c.find(".thumbnail-group").removeClass("a-button-selected");c.find("#"+b.prop("name")).addClass("a-button-selected")})}var d={ADD_TO_CART_FORM:"#addToCart",SESSION_ID:"#session-id",OFFER_LISTING_ID:"#offerListingID",
AUI_MODAL_SCROLLER:".a-modal-scroller",AUI_PAGE_ROOT:"#a-page",INPUT_TYPE_CHECKBOX:"input[type='checkbox']",BASE_PRODUCT_PRICE:"#base-product-price",BASE_PRODUCT_PRICE_DATA:"base-product-price",SB_ROOT:".showBundleAsins.simpleBundleFeatureContainer",SB_EXPANDED_MODAL_EXPANDER_HEADER_PREFIX:".simple-bundle-item-expand-header-",SB_EXPANDED_MODAL_EXPANDER_CONTENT_PREFIX:".simple-bundle-item-expander-content-",SB_EXPANDED_MODAL_LINK:".simple-bundle-buybox-expanded-modal-link",SB_EXPANDED_MODAL_ITEM_LINK_PREFIX:".simple-bundle-item-link-",
SB_ACCESSORY_ITEM_LINK_PREFIX:".popover-simpleBundle-link-",SB_BUYBOX_ITEM_CHECKBOX:".simple-bundle-buybox-item-checkbox",SB_BUYBOX_CHECKBOX_PREFIX:".simple-bundle-item-",SB_EXPANDED_CHECKBOX_PREFIX:".simple-bundle-modal-item-",SB_EXPANDER_TITLE:".aloha-simple-bundle-expand-header-title"},p=!1;e=a.debounce(function(){var e=a.$(d.SB_ROOT);if(e.length){var g=a.$(d.ADD_TO_CART_FORM);if(g.find(":submit").length&&g.find(d.OFFER_LISTING_ID).val()){b();var x=c.getSimpleBundlePageState()||{},h=x.expandedBuyboxEnabled,
w=x.selectionMode||"SINGLE",k=x.items||[],m=[],u=a.$(d.SESSION_ID).val(),r=e.find(d.SB_EXPANDED_MODAL_LINK),l,B={baseAsin:x.baseAsin,baseItemPrice:a.$(d.BASE_PRODUCT_PRICE).data(d.BASE_PRODUCT_PRICE_DATA),clientType:"aloha-simplebundle-desktop"},q=c.createMetricsLogger(B);p||(p=!0,a.defer(function(){q.logNexusImpression(k);q.logImpressionRefTag()}));r.click(function(a){a.originalEvent&&q.logExpandedLink()});k.forEach(function(b,g){function p(){var b=!1;E.click(function(){b=!b});e.find(d.SB_EXPANDED_MODAL_ITEM_LINK_PREFIX+
g).click(function(){b||E.click();r.click();l=l||a.$(d.AUI_MODAL_SCROLLER);l.scrollTop(E.offset().top-l.offset().top+l.scrollTop())})}function k(){var c=e.find(d.SB_EXPANDED_MODAL_EXPANDER_CONTENT_PREFIX+g),p="/gp/product/features/aloha-ppd/udp-ajax-handler/minidp.html?asin="+b.asin+"&marketplaceId="+x.marketPlaceId+"&offerId="+b.offerListingId+"&activeTab=0",l="a:expander:simple-bundle-item-expander-"+g+":toggle",h=a.once(function(){c.load(p,null,function(d,b,g){a.$.trim(c.html())?(c.find(".a-span-last > .a-spacing-top-base").remove(),
c.find(".popover-add-to-cart-button").remove(),d=c.find("#a-page > div > div.a-row"),b=c.find(".popover-in-stock"),b.remove(),b.addClass("aloha-simple-bundle-modal-detailed-info-header-row-text"),d.append(b),b=c.find(".popover-ship-sold-by"),b.remove(),b.addClass("aloha-simple-bundle-modal-detailed-info-header-row-text"),d.append(b),b=c.find(".popover-retail-domain"),b.remove(),d.append(b),d=c.find("#a-page > div > div.a-column.a-span9"),d.removeClass("a-span9"),d.addClass("a-span12")):c.text(x.ajaxFailMsg)})}),
w=l+":expand";a.off(w);a.on(w,function(b){q.logItemLink(g);E.find(d.SB_EXPANDER_TITLE).removeClass("aloha-simple-bundle-expand-header-title-truncate");a.$.trim(c.html())||h()});l+=":collapse";a.off(l);a.on(l,function(a){E.find(d.SB_EXPANDER_TITLE).addClass("aloha-simple-bundle-expand-header-title-truncate")})}var E=e.find(d.SB_EXPANDED_MODAL_EXPANDER_HEADER_PREFIX+g);if(h)p(),k();else{var u=e.find(d.SB_ACCESSORY_ITEM_LINK_PREFIX+g);u.unbind("click.MiniDpClickHandler");u.bind("click.MiniDpClickHandler",
function(){q.logItemLink(g);q.logNexusOpenMiniDP(g,b);q.logMiniDPRefTag(g)})}c.setupCheckboxes(m,g,h,b.asin,x.maxBuyboxItemsDesktop,d.SB_BUYBOX_CHECKBOX_PREFIX+g+" "+d.INPUT_TYPE_CHECKBOX,d.SB_EXPANDED_CHECKBOX_PREFIX+g+" "+d.INPUT_TYPE_CHECKBOX,d.SB_BUYBOX_CHECKBOX_PREFIX+g,d.SB_EXPANDED_CHECKBOX_PREFIX+g,w)});c.setupAddToCart(g,m,k,q,u,h)}else e.hide()}},200);e();a.on("a:pageUpdate",e)});m.when("A","a-checkbox","aloha-uatc","aloha-buy-now-integration").register("aloha-simplebundle-common",
function(a,h,e,c){function b(d,b){var c=a.$(d);c.change(function(){c.prop("checked",this.checked)});var e=a.$(b);e.length||(e=c);return{$element:c,$container:e,api:h(d),show:function(){e.hasClass(f.AUI_HIDDEN)&&e.removeClass(f.AUI_HIDDEN);e.show()},hide:function(){e.hasClass(f.AUI_HIDDEN)||e.addClass(f.AUI_HIDDEN)},isVisible:function(){return!e.hasClass(f.AUI_HIDDEN)}}}function d(a,d,b){d.forEach(function(d){a.addItem(d.asin,d.offerListingId,d.quantity);b.logCheckboxSelected(d.index,d.quantity);b.logAddToCartRefTag(d.index)})}
function p(a,d,b){var c=[],e=[];d.forEach(function(d,f){var p=a[f];d.api.isChecked()?c.push({asin:p.asin,offerListingId:p.offerListingId,ourPrice:p.ourPrice,index:f,quantity:b}):e.push({asin:p.asin,ourPrice:p.ourPrice,index:f,isVisible:d.isVisible()})});return{selectedLineItems:c,unselectedItems:e}}var f={AUI_HIDDEN:"aok-hidden"};return{createMetricsLogger:function(d){function b(a,d){k.ue&&k.ue.count&&k.ue.count("aloha-simplebundle-"+a,d)}function c(a,d){k.ue&&k.ue.event&&k.ue.event(a,"atch",d)}function e(d){a.ajax("/gp/product/ajax-handlers/reftag.html?ref_="+
d,{method:"get"})}a.defer(function(){b("view",1)});return{logAddToCart:function(a){b("addtocart",a)},logExpandedLink:function(){b("buybox-expanded-link",1)},logCheckboxSelected:function(a,d){b("checkbox-"+(a+1),d)},logItemLink:function(a){b("link-"+(a+1),1)},logImpressionRefTag:function(){e("dp_atch_abb_i")},logAddToCartRefTag:function(a){e("dp_atch_abb_atc_"+(a+1))},logMiniDPRefTag:function(a){e("dp_atch_abb_smdp_"+(a+1))},logNexusImpression:function(a){a={baseAsin:d.baseAsin,baseItemPrice:d.baseItemPrice,
clientType:d.clientType,accessories:a.map(function(a,d){return{asin:a.asin,displayPosition:d+1,price:a.ourPrice}})};c(a,"attach.ABBImpression.2")},logNexusAddBaseToCart:function(a,b,e){a={baseAsin:d.baseAsin,baseItemPrice:d.baseItemPrice,clientType:d.clientType,baseQuantity:Number(e),accessoriesAdded:a.map(function(a){return{asin:a.asin,price:a.ourPrice,displayPosition:a.index+1,quantity:Number(a.quantity)}}),accessoriesNotAdded:b.map(function(a){return{asin:a.asin,price:a.ourPrice,displayPosition:a.index+
1}})};c(a,"attach.ABBAddBaseToCart.5")},logNexusOpenMiniDP:function(a,b){c({baseAsin:d.baseAsin,baseItemPrice:d.baseItemPrice,clientType:d.clientType,accessoryAsin:b.asin,accessoryPrice:b.ourPrice,accessoryDisplayPosition:Number(a)+1},"attach.ABBShowMiniDP.2")}}},getSimpleBundlePageState:function(){var d=a.$(".simpleBundleJavascriptParameters").find("script").html();return a.parseJSON(d)},getCheckboxCollectionObject:b,setupAddToCart:function(b,f,h,w,m,z){function u(b,g){function v(){g()}function u(){k.ueLogError&&
k.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"});g()}if(!r){var t=e.createAddToCartRequest(m,v,u),y=z?1:l.find("*[name='quantity']").val()||1,n=p(h,f,y);d(t,n.selectedLineItems,w);var A=n.unselectedItems.filter(function(a){return a.isVisible});w.logNexusAddBaseToCart(n.selectedLineItems,A,y);y=t.count();0!==y&&(A=a.$(b.currentTarget),c.isBuyNow(A)?c.checkoutWith(n.selectedLineItems,A):(r=
!0,b.preventDefault(),w.logAddToCart(y),t.call()))}}var r=!1,l=b;b.unbind("submit.SimpleBundleSubmitHandler");b.bind("submit.SimpleBundleSubmitHandler",function(d){var b=a.$(this),c=b.closest(".a-accordion-row-container");c.length&&(l=c);u(d,function(){b.submit()})})},setupAddToCartForDeclarative:function(a,b,c,f,h,m,u){a.unbind("click.SimpleBundleClickHandler");a.bind("click.SimpleBundleClickHandler",function(a){a=e.createAddToCartRequest(h,null,function(){k.ueLogError&&k.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},
{logLevel:"ERROR",attribution:"SimpleBundle"})});var g=m?1:u.find("*[name='quantity']").val()||1,B=p(c,b,g);d(a,B.selectedLineItems,f);var q=B.unselectedItems.filter(function(a){return a.isVisible});f.logNexusAddBaseToCart(B.selectedLineItems,q,g);if(g=a.count())f.logAddToCart(g),a.call()})},setupCheckboxes:function(a,d,c,e,f,p,h,k,l,m){var q=b(p,k);a.push(q);q.api.enable();q.$element.data("asin",e);if(c){var v=b(h,l);v.api.enable();v.api.check(q.api.isChecked());v.$element.change(function(){var a=
v.api.isChecked();q.api.check(a)});q.$element.change(function(){var d=q.api.isChecked();v.api.check(d);var b=0;a.forEach(function(a){b<f&&a.api.isChecked()?(b++,a.show()):a.hide()});b<f&&a.forEach(function(a){b<f&&a.api.isUnchecked()&&(b++,a.show())})})}else"SINGLE"===m&&q.$element.change(function(){q.api.isChecked()&&a.forEach(function(a,b){d!==b&&a.api.uncheck()})});0<a.length&&a[0].$element.change()}}});m.when("A").register("aloha-uatc",function(a){function h(e,c,b,d,p){var f=0;p=
p||5E3;d=d||b;var g={clientName:"AmazonWireless"};g.verificationSessionID=e;return{count:function(){return f},call:function(){f&&a.post("/gp/add-to-cart/json",{timeout:p,params:g,success:c,error:b,abort:d})},addItem:function(a,d,b){g["ASIN."+f]=a;g["offerListingID."+f]=d;g["quantity."+f]=b||1;f++}}}return{createAddToCartRequest:h,createSingleFinalCallbackAddToCartRequest:function(a,c){return h(a,c,c,c)}}});m.when("ready").register("aloha-buy-now-integration",function(){var a={};m.when("turbo-checkout-buy-now-integration").execute(function(h){a=
h});return{isBuyNow:function(h){return"function"===typeof a.isBuyNow&&a.isBuyNow(h)},checkoutWith:function(h,e){return a.checkoutWith(h,e)}}})});
/* ******** */
(function(g){var l=window.AmazonUIPageJS||window.P,p=l._namespace||l.attributeErrors,b=p?p("SamplingDesktopAssets"):l;b.guardFatal?b.guardFatal(g)(b,window):b.execute(function(){g(b,window)})})(function(g,l,p){g.when("A","action-panel-secondary-panel","twister-aui-page-state","ready").register("single-sample-widget-desktop-utils",function(b,e,f){function h(){var a=b.state("singleSampleWidgetSecondaryPanelSettings");a||(a={panelId:"singleSampleWidgetSecondaryPanel",headingContentId:"singleSampleWidgetHeadingContent",
contentId:"singleSampleWidgetContentBlock"});return a}function v(a,c,w){g.when("a-alert").execute(function(e){g.when("a-button").execute(function(a){a("#add-single-sample-variations-to-cart-button").hide()});e=e("#single-sample-widget-samples-added-to-cart-msg");e.text(a);e.type(c);e.show();b.fadeToggle(d("#single-sample-widget-samples-added-to-cart-msg"),2500,"ease-out",function(){w&&w();g.when("a-button").execute(function(a){a("#add-single-sample-variations-to-cart-button").show()})})})}function q(){var a=
b.state("selectedSingleSampleVariations");a||(a=m());return a}function m(){var a={};a.asinList=JSON.stringify([]);a.asinIndexMap=JSON.stringify({});a.offerListingIdMap=JSON.stringify({});a.count=0;a.totalPrice=0;a.totalCredit=0;return a}function z(a,c){g.when("a-button").execute(function(c){c=c("#add-single-sample-variations-to-cart-button");c.enable();c.text(a)});x().html(c)}function p(a,c){g.when("a-button").execute(function(c){c=c("#add-single-sample-variations-to-cart-button");c.disable();c.text(a)});
x().html(c);var d=q();d.asinList="[]";d.asinIndexMap="{}";d.count=0;d.totalPrice=0;d.totalCredit=0;b.state("selectedSingleSampleVariations",d)}function x(){return d("#add-single-sample-variations-to-cart-info")}var d=b.$;b.on("renderPrimeSampleWidget",function(){var a=d(".single-sample-widget-container"),c=d(".single-sample-widget-container-btf");if(c){var w=c.html();w&&(a.html(w),c.html(""))}a.removeClass("aok-hidden");f.updatePageState();a=h();b.state("singleSampleWidgetSecondaryPanelSettings",
a);e.init(a)});b.on("a:pageUpdate",function(){b.state("singleSampleWidgetSecondaryPanelSettings",h());b.state("selectedSingleSampleVariations",m())});b.on("a:popover:afterShow:single-sample-widget-learn-more",function(a){g.when("samplingLog").execute(function(a){a.postCountMetric("smp_fswidget_details")})});g.when("action-panel-secondary-panel").execute(function(a){b.declarative("single-sample-widget-open-secondary-panel","click",function(c){a.animateIn(c.data.secondaryPanelId);d(l).scrollTop(0);
g.when("samplingLog").execute(function(a){a.postCountMetric("smp_fswidget_choose")})})});b.declarative("expand-sample-variation-list","click",function(a){a=d(".single-sample-variation-list-container .show-by-default-false");d(".single-sample-variation-list-container").addClass("single-sample-variation-list-container-enable-scroll");d(".single-sample-widget-collapse-button").removeClass("aok-hidden");d(".single-sample-widget-expand-button").addClass("aok-hidden");d.each(a,function(){d(this).addClass("single-sample-variation-row-visible");
d(this).removeClass("aok-hidden")});d("#single-sample-variation-list-container").animate({scrollTop:0})});b.declarative("collapse-sample-variation-list","click",function(a){a=d(".single-sample-variation-list-container .show-by-default-false");d(".single-sample-variation-list-container").removeClass("single-sample-variation-list-container-enable-scroll");d(".single-sample-widget-collapse-button").addClass("aok-hidden");d(".single-sample-widget-expand-button").removeClass("aok-hidden");d.each(a,function(){d(this).addClass("aok-hidden");
d(this).removeClass("single-sample-variation-row-visible")})});b.declarative("single-sample-variation-add","click",function(a){a=a.data;var c=a.asin,e=a.offerListingId,f=a.currencyCode,h=a.locale,g=Number(a.variationPrice),l=Number(a.variationCredit),y=d("#single-sample-variation-button-"+c),k=q(),n=JSON.parse(k.asinList),r=JSON.parse(k.asinIndexMap),m=JSON.parse(k.offerListingIdMap),v=Number(k.count),t=Number(k.totalPrice),u=Number(k.totalCredit);r.hasOwnProperty(c)&&0<=r[c]?(y.removeClass("single-sample-variation-button-selected"),
y.addClass("single-sample-variation-button"),e=r[c],n[e]=n[n.length-1],n.pop(),r[n[e]]=e,delete r[c],delete m[c],t-=g,u-=l,v--):(y.removeClass("single-sample-variation-button"),y.addClass("single-sample-variation-button-selected"),r[c]=n.length,m[c]=e,n.push(c),t+=g,u+=l,v++);k.asinList=JSON.stringify(n);k.asinIndexMap=JSON.stringify(r);k.offerListingIdMap=JSON.stringify(m);k.count=v;k.totalPrice=t;k.totalCredit=u;b.state("selectedSingleSampleVariations",k);c=a.totalCreditInfoText;c=c.replace("#PRICE#",
Number(t).toLocaleString(h,{style:"currency",currency:f}));c=c.replace("#CREDIT#",Number(u).toLocaleString(h,{style:"currency",currency:f}));f=n.length;0<f?(a=1===f?a.addSingleSampleToCartButtonText.replace("#COUNT#",f):a.addSamplesToCartButtonText.replace("#COUNT#",f),z(a,c)):(a=a.noSampleSelectedButtonText,p(a,c),d.each(d(".single-sample-variation-button-selected"),function(a,c){d(this).removeClass("single-sample-variation-button-selected");d(this).addClass("single-sample-variation-button")}))});
b.declarative("single-sample-variation-add-to-cart","click",function(a){var c=a.data,d=q();a=JSON.parse(d.asinList);if(0!==a.length){for(var d=JSON.parse(d.offerListingIdMap),e={"session-id":c.sessionId,clientName:"Sampling"},f=0;f<a.length;f++){var h=a[f],g=d[h],m="offerListingID."+f,k="quantity."+f;e["ASIN."+f]=h;e[m]=g;e[k]=1}b.post("/gp/add-to-cart/json/?ref_=smp_fswidget_atc",{timeout:5E3,params:e,success:function(a){l.location.href="/gp/huc/view.html/ref=smp_fswidget_atc"},error:function(a){v(c.samplesNotAddedToCartMessage,
"error")}})}});b.on("a:sheet:afterShow:single-sample-widget-bottom-sheet",function(a){d("#single-sample-variation-carousel").addClass("a-carousel-static");g.when("a-carousel-framework").execute(function(a){a.createAll();a.initializeAll()})})});g.when("A","action-panel","ready").register("sampling-buybox-utils",function(b,e){function f(d){d=d.selectedRow.rowName;q("#LDBuybox").length&&("sampling-accordion"===d?(e.setPanelState(A),l(p),h(m)):(e.setPanelState(x),l(m),h(p)))}function h(d){for(var a=
0;a<d.length;a++){var c=q(d[a]);c.length&&c.hasClass("aok-hidden")&&c.removeClass("aok-hidden")}}function l(d){for(var a=0;a<d.length;a++){var c=q(d[a]);c.length&&!c.hasClass("aok-hidden")&&c.addClass("aok-hidden")}}var q=b.$,m=["#samplingPrice"],p=["#price table"],A={mode:"sampling"},x={mode:"deal"};b.on("a:accordion:buybox-accordion:select",f);b.on("a:accordion:buybox_accordion:select",f);b.on("a:popover:afterShow:samplingPopoverContent",function(d){g.when("samplingLog").execute(function(a){a.postCountMetric("smp_dp_details")})})});
g.now().register("samplingLog",function(){var b=[];return{postCountMetric:function(b){if("undefined"!==typeof b){var f=l.ue;if(f){var h=f.count(b)||0;f.count(b,h+1)}}},widgetLoadStarted:function(e,f){b[e]||(b[e]={});b[e].startTime=f},widgetLoadFinished:function(e,f){b[e]&&(b[e].endTime=f)},postWidgetLatency:function(e){if("undefined"!==typeof e&&b[e]){var f=l.ue;if(f){var h=b[e],h=h.endTime-h.startTime;0<h&&f.count(e,h)}}}}});g.when("A","ready").register("sampling-udp",function(b){function e(){var b=
f("#centerCol");b.length&&b.addClass("sampling-only")}var f=b.$;b.on("a:pageUpdate",function(){if(f(".sampling-buybox-sample-only").length)e();else{var b=f("#centerCol");b.length&&b.removeClass("sampling-only")}});return{hasOnlySamplingOffer:function(){e()}}})});
/* ******** */
(function(h){var e=window.AmazonUIPageJS||window.P,n=e._namespace||e.attributeErrors,b=n?n("PrivateLabelDesktopAssets"):e;b.guardFatal?b.guardFatal(h)(b,window):b.execute(function(){h(b,window)})})(function(h,e,n){h.when("A","jQuery","twister-aui-page-state","ready").register("cross-sell-recommendations",function(b,k,C){function h(d){return k("#crossSellCheckbox"+d)}function e(){for(var d=0,b=0;b<p;b++)h(b).prop("checked")&&d++;k("#crossSellAddToCart").find("span.a-button-text").text(l["addToCartText"+
(d+1)]);k("#crossSellAddToList").find("span.a-button-text").text(l["addToWishlistText"+(d+1)]);k("#crossSellPriceLabel").text(l["priceText"+(d+1)]);d+=1;k("#crossSellForm").attr("action",q+d);d="";for(b=0;b<p;b++)d+=h(b).prop("checked")?"1":"0";d=parseInt(d,2);d=u[d];k("#crossSellPrice").html(d)}var v,l,p,u,q;return{init:function(){C.updatePageState();v=b.state("crossSellData");l=b.state("crossSellStrings");if(v&&l){p=v.numRecommendations;u=v.possibleSums;q=k("#crossSellForm").attr("action");for(var d=
0;d<p;d++)h(d).change(e);k("#crossSellPricePara").removeClass("a-hidden");e()}}}});h.when("A","atf","ready").execute(function(b){var k=b.$("#heroVideo");b=b.state("hero-video-state");k.length&&"undefined"!==b&&b.url&&k.attr("src",b.url)});h.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils","postMetric").register("ImageBlockHeroVideoView",function(b,k,h,e,n){function v(a,b,d){if(!h.isjQueryObjDefined(a.find(".a-button-selected"))){var f=m.getCurrentItem(),y=0,t=b+y,g=e.getHeroImageHash(c,
f.color,y);-1!==g&&(t>=d&&(y=0,t=b),l(f.color)&&(x.dispatch("updateModel",{data:{index:y,thumbnailIndex:t,variant:g.variant,type:"hero-video"}}),b=a.find(".item").get(t),h.selectGivenThumbnail(k(b),a)))}}function l(a){null===c.heroVideo[a]&&a===c.landingAsinColor?a=c.heroVideo[c.defaultColor]:(a=c.heroVideo[a],a instanceof Array&&(a=a.length?a[0]:null));return a}function p(){if(c.repositionHeroImage){var a=e.getHeroDimParams(c,m.getCurrentItem());f.length&&h.isDefined(a)&&(a.xPos&&"undefined"!==typeof a.xPos&&
f.css({left:a.xPos+"px "}),f.css({top:a.yPos+"px","max-width":a.width+"px","min-height":a.height+"px",width:a.width+"px",height:a.height+"px"}))}}function u(){f.length&&f.hasClass("aok-hidden")&&0===m.getCurrentItem().thumbnailIndex&&f.removeClass("aok-hidden")}function q(){f.length&&!f.hasClass("aok-hidden")&&f.addClass("aok-hidden")}function d(a){f.length&&a&&(f.attr("poster",a.large),f.attr("src",a.url),f.get(0)&&(f.get(0).oncanplay=function(){u()}))}function B(a){if(a){var b;if(a.thumbUrl){b=
{thumb:a.thumbUrl,large:a.slateUrl,variant:a.variant,url:a.url};var c={};c[a.slateUrl]=[a.videoWidth,a.videoHeight];b.main=c}return b}}var z,c,m,x,A,w,f;return function(a,e,n,D){z=this;c=a;m=e;x=D;A=c.heroVideoVariant;c.heroImage[c.landingAsinColor]=c.heroImage[c.defaultColor];c.heroVideo[c.defaultColor]&&!Array.isArray(c.heroVideo[c.defaultColor])&&(a=B(c.heroVideo[c.defaultColor]),c.heroVideo[c.landingAsinColor]=a);z.render=function(a,t,g,e,p,q,n){w=e;k("#heroImage");f=k("#heroVideo");if(!l(a)){g=
void 0;e=m.getCurrentItem();g=e.color;p=[];if(c.colorToVideo[g])for(q=c.colorToVideo[g],n=q.length-1;0<=n;n--){var u=q[n];A&&u.variant===A&&(p.push(u),q.splice(n,1))}var r;p.length&&(r=B(p[0]));e="hero-video"===e.type||"hero-image"===e.type;r&&e&&(c.heroVideo[g]=r,d(l(g)),g=w.find(".heroImageThumbnail"),b.declarative.remove(g,"thumb-action"),r.type="hero-video",b.declarative.create(g,"thumb-action",r),r=m.getCurrentItem(),g={data:{index:r.index,thumbnailIndex:r.thumbnailIndex,variant:r.variant,type:"hero-video"}},
x.dispatch("updateModel",g),v(w,0,0,!1,!0),w.find(".a-button-selected").closest(".a-declarative").click())}r=t;if(g=l(a))e=g.thumb,c.heroImage&&c.heroImage[a].length&&(e=c.heroImage[a][0].thumb),a={type:"hero-video",index:0,thumbnailIndex:t,variant:g.variant},d(g),h.createThumbnail(a,e,w),t++,v(w,r,t);return t};z.update=function(a){if("mouseenter"===a.type)"ingress"===a.data.type?f.hasClass("aok-hidden")||(a.captured=!0):"hero-video"!==a.data.type&&q();else{var b;if(b="swatchHover"===a.type)a.data.color!==
m.getCurrentItem().color?b=!0:(b=l(m.getCurrentItem().color),b=f.length&&b&&f.attr("src")===b.url?!0:!1);b||q()}"swatchHover"===a.type?a.captured||("hero-video"!==m.getCurrentItem().type&&"hero-image"!==m.getCurrentItem().type?b=-1:l(a.data.color)?((a.data.color!==m.getCurrentItem().color||f.hasClass("aok-hidden"))&&d(l(a.data.color)),b=void 0):(q(),b=m.getCurrentItem(),x.dispatch("updateModel",{data:{index:b.index,thumbnailIndex:b.thumbnailIndex,variant:b.variant,type:"hero-image"}}),b=-1),-1!==
b&&(a.captured=!0)):"hero-video"===a.data.type&&(u(),"click"!==a.type&&c.usePeekHover||h.selectGivenThumbnail(a.$declarativeParent,w))};x.register("resize",p)}})});
/* ******** */
(function(e){var c=window.AmazonUIPageJS||window.P,g=c._namespace||c.attributeErrors,a=g?g("DetailPageTwisterDPv2Assets"):c;a.guardFatal?a.guardFatal(e)(a,window):a.execute(function(){e(a,window)})})(function(e,c,g){e.when("A","jQuery","a-popover","cf").register("burj-twister-utils",function(a,d,e){var b;return{getActivePopover:function(){b||(b=d("#twister").find("[id^=vodd-button-]"));var a=null;b.length&&b.each(function(d,c){var b=c.id.split("vodd-button-");if((b=e.get("vodd-popover-"+b[b.length-
1]))&&b.isActive())return a=b,!1});return a},getPageOffset:function(){var b,a;c.pageYOffset?(b=c.pageYOffset,a=c.pageXOffset):"CSS1Compat"===(document.compatMode||"")?(b=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):(b=document.body.scrollTop,a=document.body.scrollLeft);return{top:b,left:a}}}});e.when("A","jQuery","a-popover","burj-twister-utils","cf").execute(function(a,d,e,b){function g(){a.on.scroll(function(){var a=b.getActivePopover();if(a){var c=h.get(0).getBoundingClientRect(),
d=a.$container.get(0).getBoundingClientRect();0>c.bottom&&0>d.bottom&&(a.attrs("originalFocus",null),a.hide())}})}function l(){var a=m.offset().top+m.height()-f.offset().top,b=f.height()-a;d("#twisterOverlay").css({height:b+"px",top:a+"px"})}function n(){var a=document.createElement("div");a.id="twisterOverlay";d(a).addClass("twister-overlay").css({width:f.outerWidth()}).bind("touchend click",function(a){return!1});f.append(a)}function p(a,b){l();f.addClass("twister-popover-visible");d("#twisterOverlay").show()}
function q(a,b){f.removeClass("twister-popover-visible");d("#twisterOverlay").hide()}var f=d("#actionPanel"),m=f.find("#twister_feature_div"),h=d(".burj #twister"),k;(function(){if(h.length&&(k=h.find("[id^=vodd-button-]"),k.length)){n();var e=function(){b.getActivePopover()&&l()};a.on("a:pageUpdate",e);d(c).resize(e);k.bind("TwisterVODD.showPopup",p).bind("TwisterVODD.hidePopup",q);g()}})()})});
/* ******** */
(function(q){var n=window.AmazonUIPageJS||window.P,w=n._namespace||n.attributeErrors,e=w?w("VasUpsellWidgetAsset",""):n;e.guardFatal?e.guardFatal(q)(e,window):e.execute(function(){q(e,window)})})(function(q,n,w){q.when("A","ready").register("vas-metrics-publisher",function(e){var c=e.$,a=function(b,a){if(b&&32>=b.length){var d="?",g="";a&&(a.additionalRequestData&&(g+=d+"additionalRequestData\x3d"+JSON.stringify(a.additionalRequestData),d="\x26"),a.productAsin&&(g+=d+"pageAsin\x3d"+a.productAsin,
d="\x26"),a.upsellAsin&&(g+=d+"pageTypeId\x3d"+a.upsellAsin,d="\x26"),a.pageType&&(g+=d+"pageType\x3d"+a.pageType,d="\x26"),a.subPageType&&(g+=d+"subPageType\x3d"+a.subPageType,d="\x26"),g=a.hitType?g+(d+"hitType\x3d"+a.hitType):g+(d+"hitType\x3dpopUp"),d="\x26",a.merchantId&&(g+=d+"merchantId\x3d"+a.merchantId,d="\x26"),a.upsellAsinPrice&&(g+=d+"sdpMinimumPriceNew\x3d"+a.upsellAsinPrice,d="\x26"),a.productAsinPrice&&(g+=d+"merchantAsinPrice\x3d"+a.productAsinPrice));c.get("/gp/ls/impress.html/ref\x3d"+
b+g)}},f=function(a,d,c){var g="";a&&d&&c&&(g=a+"_"+d+"_"+c);return g},d=function(a,d,c,g){var e="";a&&d&&c&&g&&(e=a+"_"+d+"_"+c+"_"+g);return e},h=function(a,d){"undefined"!==typeof n.ue&&"undefined"!==typeof n.ue.count&&("undefined"===typeof d?n.ue.count(a,1):n.ue.count(a,d))};return{metric:function(a){"undefined"!==typeof n.ue&&"undefined"!==n.ue.count&&n.ue.count("vas_ppd_"+a,1)},increaseMetricBy:function(a,d){"undefined"!==typeof n.ue&&"undefined"!==n.ue.count&&n.ue.count("vas_ppd_"+a,d)},log:function(a){n.ueLogError&&
n.ueLogError(a,{logLevel:"ERROR",attribution:"ppd-bundles"})},logRefTag:function(a,d,e,g,f,t,p,r,y){if(a){var h="?",v="";d&&(v+=h+"pageType\x3d"+d,h="\x26");e&&(v+=h+"subPageType\x3d"+e,h="\x26");g&&(v+=h+"pageTypeId\x3d"+g,h="\x26");v=f?v+(h+"hitType\x3d"+f):v+(h+"hitType\x3dpopUp");h="\x26";t&&(v+=h+"merchantId\x3d"+t,h="\x26");p&&(v+=h+"pageAsin\x3d"+p,h="\x26");r&&(v+=h+"sdpMinimumPriceNew\x3d"+r,h="\x26");y&&(v+=h+"merchantAsinPrice\x3d"+y);c.get("/gp/ls/impress.html/ref\x3d"+a+v);"undefined"!==
typeof n.ue&&"undefined"!==n.ue.count&&n.ue.count(a,1)}},logUeMetricIncreaseCount:h,getCSMName:f,getRefMarker:d,increaseCSMCounterBy:function(a,d){a&&"undefined"!==typeof n.ue&&"undefined"!==typeof n.ue.count&&n.ue.count(a,(n.ue.count(a)||0)+d)},logCSMCounter:function(a){a&&"undefined"!==typeof n.ue&&"undefined"!==typeof n.ue.count&&n.ue.count(a,(n.ue.count(a)||0)+1)},createCSMNameAndLog:function(a,d,c){a=this.getCSMName(a,d,c);this.logCSMCounter(a);return a},logHit:a,createRefMarkerAndLog:function(a,
d,c,g,e){a=this.getRefMarker(a,d,c,g);this.logHit(a,e);return a},logReftagAndCSMMetricForWidgetAction:function(b,c,e,g,m){var t=f(g,c,b);h(t);b=d(g,e,c,b);a(b,m)},hitParameterKeys:{upsellAsin:"upsellAsin",productAsin:"productAsin",pageType:"pageType",subPageType:"subPageType",upsellAsinPrice:"upsellAsinPrice",productAsinPrice:"productAsinPrice",hitType:"hitType",additionalRequestData:"additionalRequestData",merchantId:"merchantId"},CSMActionTypes:{glanceView:"gv",addToCart:"att",serviceIncluded:"incl",
serviceNotIncluded:"cncl",expandBulletPoints:"expbp",collapseBulletPoints:"colbp",redirect:"redir",skip:"skip",escape:"escape"},RefmarkerActionTypes:{glanceView:"gv",addToCart:"att",serviceIncluded:"incl",serviceNotIncluded:"cncl",expandBulletPoints:"expbp",collapseBulletPoints:"colbp",redirect:"redir"}}});q.register("vas-utilities",function(e){return{generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var a=16*Math.random()|0;return("x"===c?a:a&3|8).toString(16)})},
getPriceValue:function(c){var a=/[+-]?\d+(\.\d+)?/g;if(null!==c.match(a))return c.match(a).map(function(a){return parseFloat(a)})[0]},validateZipCode:function(c,a){return(new RegExp(a.val())).test(c)?!0:!1}}});q.when("A","vas-common-settings","vas-metrics-publisher","vas-mobile-config").register("vas-metric-utils",function(e,c,a,f){var d=f.mobileMetricConstants;return{createHitParameters:function(d){var b=c.getSetting("widgetCommonVM"),e=c.getSetting("winningWidgetVM"),f={},g={};g[d.additionalRequestDataKeys.zipCode]=
b.zipCode;f[a.hitParameterKeys.upsellAsin]=e.upsellAsin;f[a.hitParameterKeys.productAsin]=b.productAsin;f[a.hitParameterKeys.merchantId]=b.merchantId;f[a.hitParameterKeys.productAsinPrice]=b.buyboxPrice;f[a.hitParameterKeys.upsellAsinPrice]=e.winningServiceMinPrice;f[a.hitParameterKeys.pageType]=d.hitRecordConstants.pageType;f[a.hitParameterKeys.subPageType]=d.hitRecordConstants.subPageType;f[a.hitParameterKeys.additionalRequestData]=g;return f},getMobileMetricConstants:function(){c.getSetting("widgetCommonVM").isApp?
(d.metricPrefixes.widget="mobiletwister"===c.getSetting("winningWidgetVM").winningWidgetName?"aft":"aftxl",d.refmarkerPrefixes.widget="mobiletwister"===c.getSetting("winningWidgetVM").winningWidgetName?"aft":"aftxl"):(d.metricPrefixes.widget="mobiletwister"===c.getSetting("winningWidgetVM").winningWidgetName?"mft":"mftxl",d.refmarkerPrefixes.widget="mobiletwister"===c.getSetting("winningWidgetVM").winningWidgetName?"mft":"mftxl");return d}}});q.when("A","vas-metrics-publisher","ready").register("vas-weblab-trigger",
function(e,c){return{triggerWeblab:function(a,f,d){e.ajax("/gp/ls/vas-ajax-handlers/vas-weblab-trigger.html",{method:"get",params:{weblab:a,weblabTreatment:f},success:function(){c.createCSMNameAndLog("vas",d,"weblabTriggerSuccess")},error:function(){c.createCSMNameAndLog("vas",d,"weblabTriggerFailure")}})}}});q.when("A","vas-metrics-publisher","ready").register("vas-atc-tracker",function(e,c){var a=e.$,f=!1,d=null,h=null,b=0,k=null,l=null,g=!1,m,t=function(){return 0===b?!1:!0},p=function(a,b){"undefined"!==
typeof b?c.logUeMetricIncreaseCount(a+(m.showSTSServiceInterstitial||m.isParentServiceAsin?"_sts":""),b):c.logUeMetricIncreaseCount(a+(m.showSTSServiceInterstitial||m.isParentServiceAsin?"_sts":""))},r=function(){if(f){var a=d;null!==a&&(a=((new Date).getTime()-a)/1E3,p("vas_si_hijack_interval_time",a),300<a&&c.logRefTag("vas_si_hijack_interval_time_5M_"+m.productAsin+"_"+m.serviceAsin))}},y=function(){if(t()){var a=h;null!==a&&(a=((new Date).getTime()-a)/1E3,p("vas_si_dismissal_interval_time",a),
30<a&&c.logRefTag("vas_si_hijack_dismissal_time_30S_"+m.productAsin+"_"+m.serviceAsin))}},x=function(){if(!g&&(g=!0,f)){p("vas_si_hijack_unload");c.logRefTag("vas_si_hijack_unload"+m.productAsin+"_"+m.serviceAsin);var a=d;null!==a&&(a=(new Date).getTime()-a,p("vas_si_hijack_unload_total_time",a))}return!0};a(n).unbind("beforeunload");a(n).bind("beforeunload",x);a(n).unbind("unload");a(n).bind("unload",x);return{isHijacked:function(){return f},setHijacked:function(){f||(f=!0,p("vas_si_atcHijack"),
c.logRefTag("vas_si_atcHijack"),d=(new Date).getTime(),k=n.setInterval(r,6E4),l=n.setInterval(y,2E4))},unsetHijacked:function(){if(f){if(null!==d){var a=((new Date).getTime()-d)/1E3;p("vas_si_hijack_total_time",a)}f=!1;p("vas_si_atcUnHijack");c.logRefTag("vas_si_atcUnHijack");d=null;b=0;h=null;null!==k&&(n.clearInterval(k),k=null);null!==l&&(n.clearInterval(l),l=null)}},getHijackTime:function(){return d},logHijackMetricOnPageUnload:x,setHijackDismissalAttempt:function(){0===b&&(h=(new Date).getTime());
b++;1<b?p("vas_si_dismissal_count",1):p("vas_si_dismissal_count",0)},getDismissalTime:function(){return h},isDismissalAttempted:t,setWidgetMetaData:function(a){m=a},logMetric:p}});q.when("A","vas-metrics-publisher","vas-atc-tracker","ready").register("vas-atc-helper",function(e,c,a){var f=e.$,d,h=function(){a.logMetric("vas_si_atcClick_returnFalse");return!1},b=function(){a.logMetric("vas_si_safeATC_click");d.atcEventInProgress||k()},k=function(){a.logMetric("vas_si_forceSafeATC_click");d.isMBCClick&&
d.atcButton.bind("click",function(){var a=f(this).find("a")[0];a&&a.href&&(n.location.href=a.href)});d.atcButton&&d.atcButton.unbind("click.lsatc").click().bind("click.lsatc",h)},l=function(){return{"session-id":f("#session-id").attr("value"),ASIN:d.productAsin,offerListingID:f("#offerListingID").attr("value"),isMerchantExclusive:f("#isMerchantExclusive").attr("value"),merchantID:f("#merchantID").attr("value"),isAddon:f("#isAddon").attr("value"),nodeID:f("#nodeID").attr("value"),sellingCustomerID:f("#sellingCustomerID").attr("value"),
qid:f("#qid").attr("value"),sr:f("#sr").attr("value"),storeID:f("#storeID").attr("value"),tagActionCode:f("#tagActionCode").attr("value"),viewID:f("#viewID").attr("value"),rsid:f("#rsid").attr("value"),sourceCustomerOrgListID:f("#sourceCustomerOrgListID").attr("value"),sourceCustomerOrgListItemID:f("#sourceCustomerOrgListItemID").attr("value"),wlPopCommand:"",quantity:f("#quantity").attr("value"),"submit.add-to-cart":"Submit+Query"}},g=function(b,c,g){document.body.style.cursor="default";a.logMetric(g,
0);if(d.productAsin&&d.serviceAsin){g={dsc:1,productASIN:d.productAsin};var e=d.zipCode,k="";b=f(b);if(b=(b=(b=(b=(b=f(".giftableItem, .nonGiftableItem",b))&&b[0])&&b.outerHTML)&&f(b))&&b.attr("itemid"))g.itemID=b,g.newItems=b+",1",g.isHUC="true";e&&(g.area=e);g=JSON.stringify(g).replace(/"/g,"'");k="?vas\x3d"+encodeURIComponent(g)+"\x26psc\x3d1";a.unsetHijacked();n.location.href="/gp/product/"+d.serviceAsin+"/ref\x3d"+c+k;a.logMetric("vas_siatc_sdp_redirect")}else a.logMetric("vas_siatc_huc_redirect"),
a.unsetHijacked(),n.location.href="/gp/cart/view.html";return!1},m=function(b){a.logMetric(b);document.body.style.cursor="default";k();return!1},t=function(){var a,b,c,g;d.isMBCClick&&"undefined"!==typeof d.offerListingID&&(c=d.atcButton.find("a")[0])&&c.href&&(a=c.href,d.showSIATC&&(b=2,(g=a.match(/itemCount=([0-9]+)/i))&&g[1]&&(g=parseInt(g[1],10))&&(b=g+1),a=a.replace(/itemCount=([0-9]+)/i,"itemCount\x3d"+b)+"\x26offeringID."+b+"\x3d"+d.offerListingID,c.href=a));return a},p=function(){var a={};
a.upsellAsin=d.serviceAsin;a.offerlistingId=d.offerListingID;a.merchantId=d.merchantId;e.trigger("vas:add-service-asin-buybox-event",a)};return{addServiceToCart:function(c){var e=t();if(d.showSIATC)p(),a.logMetric("vas_siatc_service_added"),b();else{if(d.atcEventInProgress)return!1;d.atcEventInProgress=!0;a.logMetric("vas_si_addProduct");var k=function(a){g(a,c,"vas_siatc_sdp_redirect_ajaxFail")},h=function(a){m("vas_siatc_sdp_redirect_ajaxFail")};d.isMBCClick?f.get(e).done(k).fail(h):(e=l(),f.post("/gp/product/handle-buy-box/ref\x3dvas_dphbb_"+
d.productAsin+"_"+d.serviceAsin,e).done(k).fail(h));document.body.style.cursor="progress"}return!1},addProductToCartAndGoToSDP:function(a){var b,c=function(b){g(b,a,"vas_siatc_handle_buybox_ajax_fail")},e=function(a){m("vas_siatc_handle_buybox_ajax_fail")};if(d.isMBCClick){var k=d.atcButton.find("a")[0];k&&k.href&&(b=k.href);f.get(b).done(c).fail(e)}else b=l(),f.post("/gp/product/handle-buy-box/ref\x3dvas_dphbb_"+d.productAsin+"_"+d.serviceAsin,b).done(c).fail(e);document.body.style.cursor="progress";
return!1},lsATCHandlerSuppressATC:h,safeATCClick:b,forceSafeATCClick:k,setWidgetMetaData:function(a){d=a}}});q.when("A","vas-metrics-publisher","ready").register("vas-service-quantity-helper",function(e,c){var a=e.$;return{getServiceQuantity:function(e,d){if(!e)return 1;var h;h=a("#quantity");1!==h.length?(c.createCSMNameAndLog("vas","qtyCapture",d+"_fail"),h=1):(h=Number(h.val()),isNaN(h)||0>=h?(c.createCSMNameAndLog("vas","qtyEval",d+"_fail"),h=1):c.createCSMNameAndLog("vas","qty",d+"_success"));
return h}}});q.when("A","vas-metrics-publisher","vas-utilities","vas-common-settings","vas-service-quantity-helper").register("vas-core-buybox",function(e,c,a,f,d){function h(b){try{var e=f.getSetting("widgetCommonVM"),k=l(g.ADD_TO_CART_FORM_ID),h=k.find("input[name^\x3d'offeringID']").length+1,p=d.getServiceQuantity(e.multiQuantityPurchaseEnabled,"desktop"),r=e.showUnifiedGuruExperience,q=a.generateUUID(),n=h+1,F=e.shouldAddItemAssociation,D=e.isShipToStore,u=k.find('input[name\x3d"itemCount"]');
"undefined"!==typeof b.offerlistingId&&(k.append('\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"quantity.'+h+'" name\x3d"quantity.'+h+'" value\x3d"'+p+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"asin.'+h+'" name\x3d"asin.'+h+'" value\x3d"'+b.upsellAsin+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"offeringID.'+h+'" name\x3d"offeringID.'+h+'" value\x3d"'+b.offerlistingId+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"merchantID.'+
h+'" name\x3d"merchantID.'+h+'" value\x3d"'+b.merchantId+'" /\x3e'),(D||F||r)&&k.append('\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-name.'+n+'.1" name\x3d"custom-name.'+n+'.1" value\x3d"itemAssoc" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-value.'+n+'.1" name\x3d"custom-value.'+n+'.1" value\x3d"'+q+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-name.1.1" name\x3d"custom-name.1.1" value\x3d"itemAssoc" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-value.1.1" name\x3d"custom-value.1.1" value\x3d"'+
q+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-name.1.2" name\x3d"custom-name.1.2" value\x3d"UNIQ-itemAssoc" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"custom-value.1.2" name\x3d"custom-value.1.2" value\x3d"'+q+'" /\x3e'),0===u.length?k.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+h+'"\x3e'):u[0].value=h,t(r)&&m("add",b.offerlistingId));c.increaseMetricBy("a2cFormAppend_fail",0);c.metric("a2cFormAppend_success")}catch(B){c.increaseMetricBy("a2cFormAppend_success",
0),c.metric("a2cFormAppend_fail"),c.log(B)}}function b(){try{l(".atcFormServiceAsinData").remove();var a=l(g.ADD_TO_CART_FORM_ID),b=f.getSetting("widgetCommonVM").showUnifiedGuruExperience,d=a.find('input[name\x3d"itemCount"]');0!==d.length&&1<=d[0].value&&--d[0].value;t(b)&&m("remove");c.increaseMetricBy("a2cFormRemove_fail",0);c.metric("a2cFormRemove_success")}catch(e){c.increaseMetricBy("a2cFormRemove_success",0),c.metric("a2cFormRemove_fail"),c.log(e)}}function k(a){var b=l(g.BUY_BACK_FORM_ID),
c=l(g.ADD_TO_CART_FORM_ID),c=Math.max(c.find("input[name^\x3d'asin']").length+1,b.find("input[name^\x3d'asin']").length+1);if(b.length){var e=d.getServiceQuantity(f.getSetting("widgetCommonVM").multiQuantityPurchaseEnabled,"desktop");b.append('\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"quantity.'+c+'" name\x3d"quantity.'+c+'" value\x3d"'+e+'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"asin.'+c+'" name\x3d"asin.'+c+'" value\x3d"'+a.upsellAsin+
'" /\x3e\x3cinput type\x3d"hidden" class\x3d"atcFormServiceAsinData" id\x3d"offeringID.'+c+'" name\x3d"offeringID.'+c+'" value\x3d"'+a.offerlistingId+'" /\x3e')}}var l=e.$,g={PRODUCT_QUANTITY_ID:"#quantity",ADD_TO_CART_FORM_ID:"#addToCart",BUY_BACK_FORM_ID:"#buyBackBuyNow"},m=function(a,b){l("#mbc .a-button").each(function(){var c=l(this),d=c.text(),c=c.find("a")[0],g,e;if(d&&d.match(/cart/i)&&c&&c.href){var f=c.href;(d=f.match(/itemCount=([0-9]+)/i))&&d[1]&&((e=parseInt(d[1],10))&&"add"===a?g=e+
1:e&&"remove"===a&&(g=e-1));g&&(f=f.replace(/itemCount=([0-9]+)/i,"itemCount\x3d"+g),"add"===a&&b?f+="\x26offeringID."+g+"\x3d"+b:"remove"===a&&(f=f.replace(new RegExp("\x26offeringID."+e+"\x3d[^\x26]*"),"")),c.href=f)}})},t=function(a){var b=f.getSetting("widgetCommonVM");return(b.populateMBCATC||b.showFakeTwisterBundles||b.showEnhancedUpsellBundle)&&!a},p=function(a){b();h(a.data.asinOfferData);k(a.data.asinOfferData)},r={addServiceAsinBuybox:function(a){h(a);f.getSetting("widgetCommonVM").multiQuantityPurchaseEnabled&&
(l(document.body).undelegate(g.PRODUCT_QUANTITY_ID,"change",p),l(document.body).delegate(g.PRODUCT_QUANTITY_ID,"change",{asinOfferData:a},p))},removeServiceAsinBuybox:function(){b();l(document.body).undelegate(g.PRODUCT_QUANTITY_ID,"change",p)},addServiceAsinToBuyBack:function(a){k(a)}};return{registerBuyboxEventHandlers:function(){e.off("vas:add-service-asin-buybox-event");e.on("vas:add-service-asin-buybox-event",function(a){r.addServiceAsinBuybox(a)});e.off("vas:remove-service-asin-buybox-event");
e.on("vas:remove-service-asin-buybox-event",function(){r.removeServiceAsinBuybox()});e.off("vas:add-service-asin-buyback-form-event");e.on("vas:add-service-asin-buyback-form-event",function(a){r.addServiceAsinToBuyBack(a)})}}});q.when("A","vas-metrics-publisher","vas-common-settings","vas-atc-tracker","vas-atc-helper","vas-service-interstitial").register("vas-core-interstitial",function(e,c,a,f,d,h){var b=e.$,k,l,g=!1,m,t=function(){var a=b("#ppdb-add-service-checkbox");if(!g){f.setHijacked();b(document.body).undelegate("#mbc .a-button",
"click.lsatc");f.logMetric("vas_si_atcClick");g=!0;k.isMBCClick=!1;k.atcButton=b(this);var h=k.atcButton.attr("id");if(h&&"add-to-cart-button"!==h&&(k.isMBCClick=!0,(h=k.atcButton.text())&&!h.match(/cart/i)))return document.body.style.cursor="default",d.safeATCClick(),!1;if(0<a.length&&a.is(":checked"))return a=!0===k.isUpsellCritical?"1":"0",h="vas_bdlppd_",k.isMBCClick&&(h+="mbc_"),c.logRefTag(h+"checked_atc_"+a+"_"+k.productAsin+"_"+k.serviceAsin),f.logMetric("vas_bdlppd_atc_click"),document.body.style.cursor=
"default",d.safeATCClick(),g?!0:!1;b(document.body).undelegate("#add-to-cart-button","click.lsatc");if(k.productAsin&&k.serviceAsin&&1===k.atcButton.length&&1===m.length){k.atcButton.bind("click.lsatc",d.lsATCHandlerSuppressATC);if(a=b.parseJSON(b("#vasServiceInterstitial").attr("data-a-modal"))){if(a={name:a.name,header:a.header},b("#vasServiceInterstitial").attr("data-a-modal",JSON.stringify(a)).click(),e.$(".a-popover-inner").addClass("pdp-service-modal-instance"),k.showSTSServiceInterstitial&&
(a=k.selectedOfferFulfillmentType,(h=b("#"+(k.showSTSServiceInterstitial?"sts-":"")+"pdp-service-siatc-modal-content"))&&h.length)){var t=h.find("."+a);t.length&&(h.find("."+k.selectedOfferFulfillmentType).addClass("vas-hidecomponent"),t.removeClass("vas-hidecomponent"),k.selectedOfferFulfillmentType=a)}}else d.safeATCClick();return!1}document.body.style.cursor="default";d.safeATCClick();return!1}},p=function(){m=b("#addToCart");m.submit(function(){f.unsetHijacked();return!0});k.hijackMBCATC&&(b(document).undelegate("#mbc .a-button",
"click.lsatc"),b(document.body).delegate("#mbc .a-button","click.lsatc",t),b.get("/gp/ls/impress.html/ref\x3dvas_mbc_ld_"+k.productAsin+"_"+k.serviceAsin));b(document).undelegate("#add-to-cart-button","click.lsatc");b(document.body).delegate("#add-to-cart-button","click.lsatc",t)};return{registerSIEventHandlers:function(){b(document.body).undelegate("add-to-cart-button","click.lsatc");var c;c="undefined"!==typeof a.getSetting("winningWidgetVM")?a.getSetting("widgetCommonVM").hijackATC:!1;c&&(k=a.getSetting("widgetCommonVM"),
k.isShipToStoreAsinSelected="in_store"===k.selectedOfferFulfillmentType,k.atcEventInProgress=!1,k.isMBCClick=!1,l=k.isWarrantyPresent,d.setWidgetMetaData(k),f.setWidgetMetaData(k),h.setWidgetMetaData(k),k.doRedirect&&null===document.getElementById("servicesInterstitial")&&!l&&(p(),h.registerSIEventHandlers()))}}});q.when("A","vas-metrics-publisher").register("vas-addUpsell-to-cart",function(e,c){return{addUpsell:function(a,f,d,h){e.ajax("/gp/product/handle-buy-box/",{method:"POST",params:{"session-id":d,
"quantity.1":h,itemCount:1,"submit.add-to-cart":"Add to Cart","asin.1":a,"offeringID.1":f},success:function(){c.logUeMetricIncreaseCount("vas_addupsell_cart_success",1);c.logUeMetricIncreaseCount("vas_addupsell_cart_fail",0);e.trigger("vas:ldbb-upsell-added:desktop")},error:function(){c.logUeMetricIncreaseCount("vas_addupsell_cart_fail",1);c.logUeMetricIncreaseCount("vas_addupsell_cart_success",0)}})}}});q.register("vas-mobile-config",function(){return{mobileMetricConstants:{refmarkerPrefixes:{tenant:"vas"},
hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isCritical:"crtcl"},metricPrefixes:{tenant:"vas"}}}});q.register("vas-widget-const",function(){return{COMMON:{DOM:{ADDSERVICE_SLOT:"addServices_feature_div",VAS_BUYBOX_SLOT:"vasBuyBox_feature_div",STS_BUYBOX_SLOT:"shipToStoreBuyBox_feature_div"},EVENT_NAME:{NO_BUYBOX:"vas:metrics:nobuybox",NO_PRODUCT:"vas:metrics:noproduct"},REFTAG_PREFIX:{NO_BUYBOX:"vas_nobb_d_ppd_",WIDGET_SUPRESSED:"vas-ppd-widget-suppressed",
WIDGET_NO_PRODUCT:"vas-ppd-widget-should-suppressed"}},METRICS:{WIDGET_NAMES:{TABLET_PPD_BUNDLES:"tabbdl"},ACTION_NAMES:{GLANCE_VIEWS:"gv",ADD_TO_CART:"atc",REDIRECTION:"redir",UPSELL_INCLUDED:"incl",UPSELL_EXCLUDED:"cncl"},TENANT_NAMES:{VAS:"vas"}}}});q.register("vas-common-settings",function(e){var c={};return{getSetting:function(a){return a?c[a]:c},setSetting:function(a,e,d){a&&d?c[a][d]=e:a&&(c[a]=e)},clearSettings:function(){c={}}}});q.when("A","vas-metrics-publisher","vas-common-settings","vas-widget-const",
"ready").register("vas-common-metrics",function(e,c,a,f){e.off(f.COMMON.EVENT_NAME.NO_BUYBOX);e.on(f.COMMON.EVENT_NAME.NO_BUYBOX,function(){var d=f.COMMON.REFTAG_PREFIX.NO_BUYBOX,e=a.getSetting("widgetCommonVM").productAsin,b=a.getSetting("widgetCommonVM").zipCode;c.logRefTag(d+e+"_"+b,"LocalServicesWidget")});e.off(f.COMMON.EVENT_NAME.NO_PRODUCT);e.on(f.COMMON.EVENT_NAME.NO_PRODUCT,function(){var d=a.getSetting("widgetCommonVM").shouldSuppressWidget,e=a.getSetting("widgetCommonVM").isProductAvailable,
b;d?b=f.COMMON.REFTAG_PREFIX.WIDGET_SUPRESSED:e||(b=f.COMMON.REFTAG_PREFIX.WIDGET_NO_PRODUCT);c.logRefTag(b,"LocalServicesWidget")})});q.when("A","vas-common-settings","vas-core-buybox","vas-core-interstitial","vas-widget-const","attach-to-ldbb","ready").register("vas-widgets",function(e,c,a,f,d,h){var b=e.$,k=function(){c.clearSettings();var a,g;e.each(b("#"+d.COMMON.DOM.ADDSERVICE_SLOT).find("[data-a-state]"),function(d,f){g=e.parseJSON(b(d).attr("data-a-state")).key;"vas-common-vm"===g?(a=e.parseJSON(b(d).html()),
c.setSetting("widgetCommonVM",a)):"vas-winning-widget-vm"===g&&(a=e.parseJSON(b(d).html()),c.setSetting("winningWidgetVM",a))})};return{initialize:function(){k();a.registerBuyboxEventHandlers();f.registerSIEventHandlers();if("undefined"!==typeof c.getSetting("winningWidgetVM")){var b=c.getSetting("winningWidgetVM").winningWidgetName;e.trigger("vas:widgetname:"+b)}else e.trigger(d.COMMON.EVENT_NAME.NO_BUYBOX);e.trigger(d.COMMON.EVENT_NAME.NO_PRODUCT);h.attachToLdbb()}}});q.when("A","vas-common-settings",
"vas-service-quantity-helper").register("attach-to-ldbb",function(e,c,a){var f=e.$,d=function(){f(document.body).undelegate(".gb-btn-atc","click.attachServicesHandler");var d=a.getServiceQuantity(c.getSetting("widgetCommonVM").multiQuantityPurchaseEnabled,"ldbb");e.trigger("vas:ldbb-a2c-event:desktop",d)};return{attachToLdbb:function(){c.getSetting("widgetCommonVM").attachToLdbb&&(f(document.body).undelegate(".gb-btn-atc","click.attachServicesHandler"),f(document.body).delegate(".gb-btn-atc","click.attachServicesHandler",
d))}}});q.register("vas-si-config",function(){return{siMetricConstants:{hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isMBC:"mbc"},bsi_prefixes:{refmarkerPrefixes:{tenant:"vas",widget:"dbsi"},metricPrefixes:{tenant:"vas",widget:"dbsi"}},rsi_prefixes:{refmarkerPrefixes:{tenant:"vas",widget:"drsi"},metricPrefixes:{tenant:"vas",widget:"drsi"}}}}});q.when("A","vas-metrics-publisher","vas-utilities","ready").register("vas-zipcode-helper",
function(e,c,a){var f=e.$,d,h,b,k,l,g,m,t,p,r,y,x,v,q,n,H,I,w,F,D,u,B,z,G,K=function(a,b){"undefined"!==typeof b?c.logUeMetricIncreaseCount(a+(u.showSTSServiceInterstitial||u.isParentServiceAsin?"_sts":""),b):c.logUeMetricIncreaseCount(a+(u.showSTSServiceInterstitial||u.isParentServiceAsin?"_sts":""))},M=function(){l.hide();I.hide();H.hide();x.addClass("a-button-disabled").prop("disabled",!0)},P=function(){M();t.hide();g.hide();p.show()};e.on("a:popover:show:VAS-SI-Zip-Update",function(a){G=a.popover});
return{vasSIZipCodeUpdate:function(C,J){var L=C.bsi_prefixes.refmarkerPrefixes,Q=C.additionalRequestDataKeys,E=C.bsi_prefixes.metricPrefixes;c.createCSMNameAndLog(E.tenant,E.widget,"updateZip");var R=n.val();if(a.validateZipCode(R,w)){z=n.val();var N=u.zipCode,S="vas_sx_zc_"+N+"_"+z,O="undefined"!==typeof u.childServiceAsins?u.childServiceAsins:[u.serviceAsin];c.logRefTag(S);if(z===B)return!1;e.ajax("/gp/ls/vas-ajax-handlers/vas-zipcode-refresh.html",{method:"get",params:{asinlist:O.join(","),vasZipcode:z,
clientName:"vasBuyableSiZipRefresh",includeMerchantAddress:u.showSTSServiceInterstitial},success:function(a){var n,A,w=!(f.isEmptyObject(a)||"1"===a.hasError);if(w)for(var C=0;C<O.length;C++)if(A=O[C],a[A]&&!n||!n.merchantId||u.showSTSServiceInterstitial&&"in_store"===a[A].fulfillmentType)n=a[A],u.serviceAsin=A;A=f(".vas-siatc-zip");A.length&&A.text(z);if(!w||e.objectIsEmpty(a)||1===a.hasError||e.objectIsEmpty(a[u.serviceAsin])||1===a[u.serviceAsin].hasError)return P(),c.logRefTag("vas_sx_zaf_"+N+
"_"+z),K("vas-si-atc-zip-ajaxFail"),c.createCSMNameAndLog(E.tenant,E.widget,"updateZipFail"),!1;e.objectIsEmpty(n.offerListingId)?(J.additionalRequestData[Q.zipCode]=z,c.createRefMarkerAndLog(L.tenant,u.mappingSet,L.widget,"zprfrsh0",J),M(),g.hide(),p.hide(),m.length&&m.text(z),t.show(),u.showSTSServiceInterstitial&&F.hide(),c.logRefTag("vas_sx_zfl_"+N+"_"+z),K("vas-si-atc-zipchange-nooffer")):(J.additionalRequestData[Q.zipCode]=z,c.createRefMarkerAndLog(L.tenant,u.mappingSet,L.widget,"zprfrsh1",
J),G&&G.hide(),a=n,u.offerListingID=a.offerListingId,u.isCBM=a.isCBM,u.merchantId=a.merchantId,u.isShipToStoreAsinSelected="in_store"===a.fulfillmentType,u.shouldAddItemAssociation=u.isShipToStoreAsinSelected,a=n.isCBM,k.html(n.positiveRatingHtml),r.text(n.merchantName).prop("href",n.sellerReviewLink),d.html(n.price).className+="a-color-price",b.html(n.price).className+="a-color-price",a?(I.hide(),H.show(),v.hide(),q.show()):(H.hide(),I.show(),q.hide(),v.show()),e.objectIsEmpty(n.nextOfferPrice)||
a?l.hide():(y.html(n.nextOfferPrice).className+="a-color-price",l.show()),t.hide(),g.hide(),x.removeClass("a-button-disabled").prop("disabled",!1),c.logRefTag(S),K("vas-si-atc-zipchange-offeravailable"),n.fulfillmentType&&(a=n.fulfillmentType,h&&h.length&&(w=h.find("."+a),w.length&&(h.find("."+u.selectedOfferFulfillmentType).addClass("vas-hidecomponent"),w.removeClass("vas-hidecomponent"),u.selectedOfferFulfillmentType=a))),u.showSTSServiceInterstitial&&(F.show(),e.objectIsEmpty(n.merchantAddress)?
D.hide():(D.text(n.merchantAddress.AddressLine1+", "+n.merchantAddress.City+", "+n.merchantAddress.StateOrRegion+" "+n.merchantAddress.PostalCode),D.show())));B=z},error:function(){B=z;P();c.createCSMNameAndLog(E.tenant,E.widget,"updateZipFail");K("vas-si-atc-zip-ajaxFail");G&&G.hide()}})}else B=R,M(),p.hide(),t.hide(),g.show();return!1},setZipCodeValuesFromDOM:function(){d=f("#vas-siatc-bestoffer-obm");b=f("#vas-siatc-bestoffer-cbm");k=f("#vas-siatc-ratingandreview");l=f("#vas-si-atc-remainingoffers");
g=f("#vas-siatc-invalidzip-message");m=f("#vas-siatc-nooffer-zip");t=f("#vas-siatc-offerunavailable-message");p=f("#vas-siatc-zip-ajaxfail-message");r=f("#vas-siatc-merchantname");y=f("#vas-si-atc-remainingoffer-price");x=f("#btnVasModalContinue");v=f("#vas-siatc-howitworks-obm");q=f("#vas-siatc-howitworks-cbm");H=f("#vas-siatc-cbm-gridrow");I=f("#vas-siatc-obm-gridrow");n=f("#vas-siatc-zip-input");w=f("#vas-zipCodeValidationRegexString");u.showSTSServiceInterstitial&&(h=f("#sts-pdp-service-siatc-modal-content"),
f("#vas-sts-zip-update-modal"),h&&h.length&&(F=h.find(".vas-si-merchant"),D=h.find(".vas-si-merchant-address")))},setWidgetMetaData:function(a){u=a;B=u.zipCode}}});q.when("A","vas-common-settings","vas-atc-helper","vas-zipcode-helper","vas-atc-tracker","vas-metrics-publisher","vas-si-config","vas-weblab-trigger","ready").register("vas-service-interstitial",function(e,c,a,f,d,h,b,k){var l=e.$,g,m,t=b.siMetricConstants.hitRecordConstants,p,r,y=b.siMetricConstants.additionalRequestDataKeys,n={addProductToCartAndGoToSDP:function(b,
c){h.createRefMarkerAndLog(p.tenant,g.mappingSet,p.widget,h.RefmarkerActionTypes.redirect,g.hitParameters);h.createCSMNameAndLog(r.tenant,r.widget,h.CSMActionTypes.redirect);d.setHijackDismissalAttempt();d.logMetric(b);var e;g.atcEventInProgress?e=!0:(g.atcEventInProgress=!0,e=!1);if(!e)return a.addProductToCartAndGoToSDP(c),!1},triggerMetricsForPopoverShow:function(){d.logMetric("vas_si_show");var a=m+"show_"+g.serviceAsin;g.showSIATC?(d.logMetric("vas_buyable_si_show"),a=m+g.zipCode+"_"+g.merchantId):
d.logMetric("vas_normal_si_show");h.createCSMNameAndLog(r.tenant,r.widget,h.CSMActionTypes.glanceView);h.createRefMarkerAndLog(p.tenant,g.mappingSet,p.widget,h.RefmarkerActionTypes.glanceView,g.hitParameters);h.logRefTag(a);c.getSetting("widgetCommonVM").vasPromoPrice&&c.getSetting("widgetCommonVM").vasPromoStrikethroughWeblab&&k.triggerWeblab("DP_VAS_BUYABLE_SI_STRIKETHROUGH_LAUNCH_WEBLAB_148643",c.getSetting("widgetCommonVM").vasPromoStrikethroughWeblab,"dbsi")},triggerMetricsForPopoverhide:function(){d.setHijackDismissalAttempt();
d.logMetric("vas_si_hide_click");h.createCSMNameAndLog(r.tenant,r.widget,h.CSMActionTypes.escape);var b=m+"x1_"+g.productAsin+"_"+g.serviceAsin;g.showSIATC&&(b=m+"no_"+g.productAsin+"_"+g.serviceAsin);h.logRefTag(b);h.createRefMarkerAndLog(p.tenant,g.mappingSet,p.widget,h.RefmarkerActionTypes.serviceNotIncluded,g.hitParameters);a.safeATCClick();return!1}};return{registerSIEventHandlers:function(){m="vas_si_";g.showSIATC&&(m="vas_sx_");g.isMBCClick&&(m+="mbc_");if(g.showSIATC){var c=l("#vas-siatc-zip-input");
f.setZipCodeValuesFromDOM();c.keyup(function(a){13===a.keyCode&&l("#vas-siatc-zip-update").click()});l(document).undelegate("#vas-siatc-zip-update","click.vas-siatc-zip-refresh");l(document).delegate("#vas-siatc-zip-update","click.vas-siatc-zip-refresh",function(a){f.vasSIZipCodeUpdate(b.siMetricConstants,g.hitParameters)});l(document).undelegate("#vas-si-moredetails","click.sdpredir");l(document).delegate("#vas-si-moredetails","click.sdpredir",function(a){n.addProductToCartAndGoToSDP("vas_siatc_see_more_details",
m+"sm_"+g.productAsin+"_"+g.serviceAsin)});l(document).undelegate("#vas-si-otheroffers","click.sdpredir");l(document).delegate("#vas-si-otheroffers","click.sdpredir",function(a){n.addProductToCartAndGoToSDP("vas_siatc_otherOffersclick",m+"so_"+g.productAsin+"_"+g.serviceAsin)});l(document).undelegate("#vas-si-estimate-SDP","click.sdpredir");l(document).delegate("#vas-si-estimate-SDP","click.sdpredir",function(a){n.addProductToCartAndGoToSDP("vas_siatc_priceclick",m+"p_"+g.productAsin+"_"+g.serviceAsin)})}l(document).undelegate("#btnVasModalSkip",
"click");l(document).delegate("#btnVasModalSkip","click",function(b){d.setHijackDismissalAttempt();d.logMetric("vas_si_skip_click");h.createCSMNameAndLog(r.tenant,r.widget,h.CSMActionTypes.skip);b=m+"x2_"+g.productAsin+"_"+g.serviceAsin;g.showSIATC&&(b=m+"no_"+g.productAsin+"_"+g.serviceAsin);h.logRefTag(b);h.createRefMarkerAndLog(p.tenant,g.mappingSet,p.widget,h.RefmarkerActionTypes.serviceNotIncluded,g.hitParameters);a.safeATCClick();return!1});l(document).undelegate("#btnVasModalContinue","click.pdpVasNext");
l(document).delegate("#btnVasModalContinue","click.pdpVasNext",function(b){d.setHijackDismissalAttempt();d.logMetric("vas_si_yes_click");b=m+"y1_"+g.productAsin+"_"+g.serviceAsin;var c,e;g.showSIATC?(b=m+"atc_"+g.productAsin+"_"+g.serviceAsin,c=h.CSMActionTypes.addToCart,e=h.RefmarkerActionTypes.addToCart):(c=h.CSMActionTypes.redirect,e=h.RefmarkerActionTypes.redirect);h.createRefMarkerAndLog(p.tenant,g.mappingSet,p.widget,e,g.hitParameters);h.createCSMNameAndLog(r.tenant,r.widget,c);a.addServiceToCart(b);
return!1});e.off("a:popover:hide:vasServiceInterstitial");e.on("a:popover:hide:vasServiceInterstitial",function(a){n.triggerMetricsForPopoverhide()});e.off("a:popover:afterShow:vasServiceInterstitial");e.on("a:popover:afterShow:vasServiceInterstitial",function(a){n.triggerMetricsForPopoverShow()});l("#buyableSIAsinRatingLink").unbind("click");l("#buyableSIAsinRatingLink").bind("click",function(){d.logMetric("vas_sx_sdp_rating_redirect");h.createRefMarkerAndLog(p.tenant,g.mappingSet,p.widget,h.RefmarkerActionTypes.redirect,
g.hitParameters);h.createCSMNameAndLog(r.tenant,r.widget,h.CSMActionTypes.redirect)});l("#siAsinRatingLink").unbind("click");l("#siAsinRatingLink").bind("click",function(){d.logMetric("vas_si_sdp_rating_redirect");h.createRefMarkerAndLog(p.tenant,g.mappingSet,p.widget,h.RefmarkerActionTypes.redirect,g.hitParameters);h.createCSMNameAndLog(r.tenant,r.widget,h.CSMActionTypes.redirect)})},setWidgetMetaData:function(a){g=a;f.setWidgetMetaData(a);g.showSIATC?(p=b.siMetricConstants.bsi_prefixes.refmarkerPrefixes,
r=b.siMetricConstants.bsi_prefixes.metricPrefixes):(p=b.siMetricConstants.rsi_prefixes.refmarkerPrefixes,r=b.siMetricConstants.rsi_prefixes.metricPrefixes);p.tenant=g.showSTSServiceInterstitial||g.isParentServiceAsin?"sts":"vas";r.tenant=g.showSTSServiceInterstitial||g.isParentServiceAsin?"sts":"vas";a=g;var c={},d={};d[y.zipCode]=g.zipCode;d[y.isMBC]=g.isMBCClick?1:0;c[h.hitParameterKeys.upsellAsin]=g.serviceAsin;c[h.hitParameterKeys.productAsin]=g.productAsin;c[h.hitParameterKeys.merchantId]=g.merchantId;
c[h.hitParameterKeys.pageType]=t.pageType;c[h.hitParameterKeys.subPageType]=t.subPageType;c[h.hitParameterKeys.additionalRequestData]=d;a.hitParameters=c}}});q.register("vas-twister-config",function(){return{vasTwisterMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"dft"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isPromo:"promo",isCritical:"crtcl"},metricPrefixes:{tenant:"vas",widget:"dft"}}}});q.when("A","vas-common-settings",
"vas-metrics-publisher","vas-twister-config","vas-metric-utils","ready").register("vas-twister-setting",function(e,c,a,f,d){var h=e.$,b={baseAsinMetaData:{},isUpsellCritical:"",hasPrecheckEnabled:""},k=f.vasTwisterMetricConstants.refmarkerPrefixes,l=f.vasTwisterMetricConstants.additionalRequestDataKeys,g=f.vasTwisterMetricConstants.metricPrefixes;return{getSettings:function(a){return"undefined"!==typeof a?b[a]:b},fetchTwisterSetting:function(){var m=h("#ppdb-add-service-checkbox");m.is(":checked")&&
m.prop("checked",!1);var m=c.getSetting("winningWidgetVM"),t=m.winningServicePriceWithPromotionApplied;b.baseAsinMetaData.upsellAsin=m.upsellAsin;b.upsellAsin=m.serviceAsinToOffer;b.baseAsinMetaData.offerlistingId=m.offerListingID;b.baseAsinMetaData.merchantId=m.merchantId;b.baseAsinMetaData.price=m.winningServiceMinPrice;b.isUpsellCritical=m.isUpsellCritical;b.hasPrecheckEnabled=m.hasPrecheckEnabled;b.dynamicStringChangeOnTwisterSelection=m.dynamicStringChangeOnTwisterSelection;b.disableTwisterOnLoad=
"undefined"!==typeof m.disableTwisterOnLoad?m.disableTwisterOnLoad:!1;b.promotionMessagingWeblab="undefined"!==typeof m.promotionMessagingWeblab?m.promotionMessagingWeblab:!1;b.isPromoPriceDisplayed=!e.objectIsEmpty(h.trim(t));b.productAsin=c.getSetting("widgetCommonVM").productAsin;b.zipCode=c.getSetting("widgetCommonVM").zipCode;b.buyboxPrice=c.getSetting("widgetCommonVM").buyboxPrice;b.mappingSet=c.getSetting("widgetCommonVM").mappingSet;b.sessionId=c.getSetting("widgetCommonVM").sessionId;b.vasTwisterMetricConstants=
f.vasTwisterMetricConstants;b.hitParameters=d.createHitParameters(b.vasTwisterMetricConstants);m=b.hitParameters[a.hitParameterKeys.additionalRequestData];m[l.isPromo]=b.isPromoPriceDisplayed;m[l.isCritical]=b.isUpsellCritical;b.hitParameters[a.hitParameterKeys.additionalRequestData]=m;var m=b.upsellAsin,t=b.productAsin,p=b.baseAsinMetaData.price,r=b.baseAsinMetaData.merchantId,y="vas_bdlppd_fake_twister_"+(!0===b.isUpsellCritical?"1":"0")+"_a_"+b.zipCode;a.createCSMNameAndLog(g.tenant,g.widget,a.CSMActionTypes.glanceView);
a.createRefMarkerAndLog(k.tenant,b.mappingSet,k.widget,a.RefmarkerActionTypes.glanceView,b.hitParameters);a.metric("vas_bdlppd_fake_twister_");a.logRefTag(y,"LocalServicesWidget","Impression",m,"popUp",r,t,p,b.buyboxPrice)},logTwisterInteractionReftag:function(c){var d=!0===b.isUpsellCritical?"1":"0",e=b.upsellAsin,f=b.productAsin,h=b.baseAsinMetaData.price,l=b.baseAsinMetaData.merchantId,n="vas_bdlppd_fake_twister_";b.isPromoPriceDisplayed&&(n="vas_bdplppd_fake_twister_promo_");a.logRefTag(n+(c?
"y":"n")+"_"+d+"_a","LocalServicesWidget","AddServiceCheck",e,"popUp",l,f,h);a.createCSMNameAndLog(g.tenant,g.widget,c?a.CSMActionTypes.serviceIncluded:a.CSMActionTypes.serviceNotIncluded);a.createRefMarkerAndLog(k.tenant,b.mappingSet,k.widget,c?a.RefmarkerActionTypes.serviceIncluded:a.RefmarkerActionTypes.serviceNotIncluded,b.hitParameters)},logTwisterATCReftag:function(){var c=!0===b.isUpsellCritical?"1":"0",d="vas_bdlppd_fake_twister_atc_"+c,e=b.upsellAsin,f=b.productAsin,h=b.baseAsinMetaData.price,
l=b.baseAsinMetaData.merchantId;b.isPromoPriceDisplayed&&(d="vas_bdlppd_fake_twister_atc_promo_"+c);a.createCSMNameAndLog(g.tenant,g.widget,a.CSMActionTypes.addToCart);a.logRefTag(d,"LocalServicesWidget","CartAdd",e,"popUp",l,f,h,b.buyboxPrice);a.createRefMarkerAndLog(k.tenant,b.mappingSet,k.widget,a.RefmarkerActionTypes.addToCart,b.hitParameters);return!0},logTwisterExpanderReftagAndMetric:function(c){var d=b.upsellAsin,e=b.productAsin,f=b.baseAsinMetaData.merchantId,h=c?"vas_bdlppd_fake_twister_sm_click":
"vas_bdlppd_fake_twister_sl_click";a.createCSMNameAndLog(g.tenant,g.widget,c?a.CSMActionTypes.expandBulletPoints:a.CSMActionTypes.collapseBulletPoints);a.createRefMarkerAndLog(k.tenant,b.mappingSet,k.widget,c?a.RefmarkerActionTypes.expandBulletPoints:a.RefmarkerActionTypes.collapseBulletPoints,b.hitParameters);a.increaseMetricBy(h,1);a.logRefTag(h,"LocalServicesWidget","SeeMoreClick",d,"popUp",f,e)},logTwisterSDPRedirectReftagAndMetric:function(){a.createCSMNameAndLog(g.tenant,g.widget,a.CSMActionTypes.redirect);
a.createRefMarkerAndLog(k.tenant,b.mappingSet,k.widget,a.RefmarkerActionTypes.redirect,b.hitParameters)}}});q.when("A","vas-twister-setting","vas-metrics-publisher","vas-addUpsell-to-cart","ready").execute("vas-twister-controller",function(e,c,a,f){var d=e.$,h=d("body"),b=!1,k=function(){c.logTwisterATCReftag()},l=function(){d("#ppdb-add-service-checkbox").prop("checked",!0);var b=c.getSettings("baseAsinMetaData");try{e.trigger("vas:add-service-asin-buybox-event",b),d("#addToCart").unbind("submit.ppdBundles"),
d("#addToCart").bind("submit.ppdBundles",k),a.increaseMetricBy("a2cFormAddEventSend_success",1),a.increaseMetricBy("a2cFormAddEventSend_fail",0)}catch(g){a.increaseMetricBy("a2cFormAddEventSend_success",0),a.increaseMetricBy("a2cFormAddEventSend_fail",1),a.log(g)}d("#vas-fake-twister-include-section").find("i").hasClass("a-icon-extender-collapse")||d("#vas-fake-twister-include-section").click();c.getSettings("isPromoPriceDisplayed")&&c.getSettings("promotionMessagingWeblab")&&(d("#vasTwisterSelectedPromotionMessage").removeClass("aok-hidden"),
d("#vasTwisterNotSelectedPromotionMessage").addClass("aok-hidden"))},g=function(a){c.getSettings("dynamicStringChangeOnTwisterSelection")&&d("#vas-service-title-text").html(a.attr("data-title"))},m={vasTwisterTrigger:function(b){d(".vas-ppd-swatch-item").removeClass("vas-ppd-swatch-select");b.addClass("vas-ppd-swatch-select");g(b);if("removeOffer"===b.attr("data-twister-action")){d("#ppdb-add-service-checkbox").prop("checked",!1);try{e.trigger("vas:remove-service-asin-buybox-event"),d("#addToCart").unbind("submit.ppdBundles"),
a.increaseMetricBy("a2cFormRemoveEventSend_fail",0),a.metric("a2cFormRemoveEventSend_success")}catch(f){a.increaseMetricBy("a2cFormRemoveEventSend_success",0),a.metric("a2cFormRemoveEventSend_fail"),a.log(f)}c.getSettings("isPromoPriceDisplayed")&&c.getSettings("promotionMessagingWeblab")&&(d("#vasTwisterSelectedPromotionMessage").addClass("aok-hidden"),d("#vasTwisterNotSelectedPromotionMessage").removeClass("aok-hidden"));c.logTwisterInteractionReftag(!1)}else l(),c.logTwisterInteractionReftag(!0)},
vasTwisterExpander:function(){d("#vas-fake-twister-include-section").find("i").hasClass("a-icon-extender-collapse")?c.logTwisterExpanderReftagAndMetric(!1):c.logTwisterExpanderReftagAndMetric(!0)}},t=function(){d("#vas-fake-twister-include-section").unbind("click");d("#vas-fake-twister-include-section").bind("click",function(a){m.vasTwisterExpander()});d("#vas-fake-twiseter-detailLink").unbind("click");d("#vas-fake-twiseter-detailLink").bind("click",function(a){c.logTwisterSDPRedirectReftagAndMetric()})},
p=function(){b||(h.undelegate(".vas-ppd-swatch-item","click"),h.delegate(".vas-ppd-swatch-item","click",function(a){a=d(a.currentTarget);a.hasClass("vas-ppd-swatch-select")||m.vasTwisterTrigger(a)}),b=!0)},r=function(){e.off("vas:ldbb-a2c-event:desktop");e.on("vas:ldbb-a2c-event:desktop",function(a){if(d("#ppdb-add-service-checkbox").is(":checked")){var b=c.getSettings("baseAsinMetaData");f.addUpsell(b.upsellAsin,b.offerlistingId,c.getSettings("sessionId"),a)}});e.off("vas:ldbb-upsell-added:desktop");
e.on("vas:ldbb-upsell-added:desktop",function(){c.logTwisterATCReftag()})};e.off("vas:widgetname:twister");e.on("vas:widgetname:twister",function(){d("#vas-service-title-text");p();c.fetchTwisterSetting();c.getSettings("hasPrecheckEnabled")&&(l(),g(d(".vas-ppd-swatch-select")));t();r();c.getSettings("disableTwisterOnLoad")&&d("#vasTwisterRow").removeClass("vas-twister-disabled")})});q.register("vas-twister-xl-config",function(){return{vasTwisterXLMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"dftxl"},
hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip"},metricPrefixes:{tenant:"vas",widget:"dftxl"}}}});q.when("A","vas-metrics-publisher","ready").register("vas-twister-page-refresh-common",function(e,c){var a=e.$,f=null,d=function(b){try{var d=b.pageRefreshData;b.featuresToRefresh.forEach(function(b){a(b).replaceWith(a(d).find(b).prop("outerHTML"))});e.trigger("vas:vas-twister-page-refresh-complete",b);c.increaseMetricBy("vasTwisterUpdateFeatures_success",
1);c.increaseMetricBy("vasTwisterUpdateFeatures_fail",0)}catch(f){e.trigger("vas:vas-twister-update-features-failed",b),c.increaseMetricBy("vasTwisterUpdateFeatures_success",0),c.increaseMetricBy("vasTwisterUpdateFeatures_fail",1),c.log(f)}},h=function(a){e.trigger("vas:vas-twister-page-refresh-start",a);null!==f&&f.abort();f=e.ajax(a.ajaxUrl,{method:"POST",timeout:"90000",params:{isVariationalParent:a.isVariationalParent},success:function(e){a.pageRefreshData=e;d(a);c.increaseMetricBy("vasTwisterPageRefresh_success",
1);c.increaseMetricBy("vasTwisterPageRefresh_fail",0)},error:function(){e.trigger("vas:vas-twister-page-refresh-failed",a);c.increaseMetricBy("vasTwisterPageRefresh_success",0);c.increaseMetricBy("vasTwisterPageRefresh_fail",1)}})};return{performPageRefresh:function(a){"undefined"===typeof a.pageRefreshData?h(a):d(a)},abortPageRefreshRequests:function(){null!==f&&f.abort()},restoreInitialData:function(b){try{var d=b.pageRefreshData;e.each(b.featuresToRefresh,function(b,c){"undefined"!==typeof d[b]&&
a(b).replaceWith(d[b])});c.increaseMetricBy("vasTwisterRestoreInitialData_success",1);c.increaseMetricBy("vasTwisterRestoreInitialData_fail",0);e.trigger("vas:vas-twister-initialdata-restore-complete")}catch(f){c.increaseMetricBy("vasTwisterRestoreInitialData_success",0),c.increaseMetricBy("vasTwisterRestoreInitialData_fail",1),c.log(f)}}}});q.when("A","vas-common-settings","vas-metrics-publisher","vas-twister-xl-config","vas-metric-utils","ready").register("vas-twister-xl-setting",function(e,c,a,
f,d){var h=e.$,b={vasTwisterOptions:{},baseAsinMetaData:{},productAsinAndOfferData:{},productPriceInTwisterVariation:{}},k=f.vasTwisterXLMetricConstants.refmarkerPrefixes,l=f.vasTwisterXLMetricConstants.metricPrefixes,g=function(){var c=b.productAsinAndOfferData.asin,d=b.productAsinAndOfferData.merchantId,e="vas_bdlppd_fake_twister_a_"+b.productAsinAndOfferData.zipCode;a.metric("vas_bdlppd_vas_twister_");a.logRefTag(e,"LocalServicesWidget","Impression","","popUp",d,c,"","");a.createCSMNameAndLog(l.tenant,
l.widget,a.CSMActionTypes.glanceView);a.createRefMarkerAndLog(k.tenant,b.mappingSet,k.widget,a.RefmarkerActionTypes.glanceView,b.hitParameters)},m=function(){try{var c=b.productAsinAndOfferData.asin,d=h("li[data-defaultasin\x3d"+c+"] .a-size-mini");d.length&&void 0===b.productPriceInTwisterVariation[c]&&(b.productPriceInTwisterVariation[c]=d.text());a.increaseMetricBy("saveInitialProductPriceContent_fail",0);a.metric("saveInitialProductPriceContent_success",1)}catch(e){a.createCSMNameAndLog(l.tenant,
l.widget,"saveInitialProductError"),a.increaseMetricBy("saveInitialProductPriceContent_success",0),a.metric("saveInitialProductPriceContent_fail",1),a.log(e)}};return{getProductAsinAndOfferData:function(a){return"undefined"!==typeof a?b.productAsinAndOfferData[a]:b.productAsinAndOfferData},getSettings:function(a){if("undefined"!==typeof a){a=b.vasTwisterOptions[a];var c={};c.asin=a.serviceAsin;c.offerlistingId=a.offerData.offerListingId;c.merchantId=a.offerData.merchantId;c.price=a.offerData.price;
return c}},hasPrecheckEnabled:function(){return b.hasPrecheckEnabled},disableTwisterOnLoad:function(){return b.disableTwisterOnLoad},getVasTwisterOption:function(a){if("undefined"!==typeof a)return b.vasTwisterOptions[a]},getInitialProductPriceContent:function(){return b.productPriceInTwisterVariation},setInitialWidgetSettings:function(){h("#ppdb-add-service-checkbox").is(":checked")&&h("#ppdb-add-service-checkbox").prop("checked",!1);var a=c.getSetting("winningWidgetVM"),k=a.vasTwisterOptions;b.productAsinAndOfferData=
a.vasUpsellProductAsinAndOfferData;b.mappingSet=c.getSetting("widgetCommonVM").mappingSet;b.buyboxPrice=c.getSetting("widgetCommonVM").buyboxPrice;e.each(k,function(a,c){b.vasTwisterOptions[c]=a});b.vasTwisterXLMetricConstants=f.vasTwisterXLMetricConstants;b.hitParameters=d.createHitParameters(b.vasTwisterXLMetricConstants);b.hasPrecheckEnabled=a.hasPrecheckEnabled;b.disableTwisterOnLoad="undefined"!==typeof a.disableTwisterOnLoad?a.disableTwisterOnLoad:!1;m();g()},logVasTwisterInteractionReftag:function(c,
d){var e;c&&(e=b.vasTwisterOptions[d].offerData.price,a.logRefTag("vas_bdlppd_vas_twister_a","LocalServicesWidget","AddServiceCheck",d,"popUp",b.vasTwisterOptions[d].offerData.merchantId,b.productAsinAndOfferData.asin,e),b.hitParameters[a.hitParameterKeys.upsellAsin]=d,b.hitParameters[a.hitParameterKeys.upsellAsinPrice]=e);e=a.CSMActionTypes.serviceIncluded;a.createRefMarkerAndLog(k.tenant,b.mappingSet,k.widget,a.RefmarkerActionTypes.serviceIncluded,b.hitParameters);a.createCSMNameAndLog(l.tenant,
l.widget,e)},logVasTwistetATCReftag:function(c){a.createCSMNameAndLog(l.tenant,l.widget,a.CSMActionTypes.addToCart);var d=b.productAsinAndOfferData.asin,e=b.vasTwisterOptions[c].offerData.price,g=b.vasTwisterOptions[c].offerData.merchantId;b.hitParameters[a.hitParameterKeys.upsellAsin]=c;b.hitParameters[a.hitParameterKeys.upsellAsinPrice]=e;a.createRefMarkerAndLog(k.tenant,b.mappingSet,k.widget,a.RefmarkerActionTypes.addToCart,b.hitParameters);a.logRefTag("vas_bdlppd_vas_twister_atc_","LocalServicesWidget",
"CartAdd",c,"popUp",g,d,e,"${buybox.priceViewModel.buyingPrice}");return!0},logTwisterExpanderReftagAndMetric:function(c,d){var e=b.vasTwisterOptions[d].offerData.price;a.createCSMNameAndLog(l.tenant,l.widget,c?a.CSMActionTypes.expandBulletPoints:a.CSMActionTypes.collapseBulletPoints);b.hitParameters[a.hitParameterKeys.upsellAsin]=d;b.hitParameters[a.hitParameterKeys.upsellAsinPrice]=e;a.createRefMarkerAndLog(k.tenant,b.mappingSet,k.widget,c?a.RefmarkerActionTypes.expandBulletPoints:a.RefmarkerActionTypes.collapseBulletPoints,
b.hitParameters)},getVasTwisterXLMetricConstants:function(){return b.vasTwisterXLMetricConstants},getHitParameters:function(){return b.hitParameters}}});q.when("A","vas-twister-page-refresh-common","vas-metrics-publisher","vas-twister-xl-setting","ready").register("vas-twister-page-refresh-webView",function(e,c,a,f){var d=e.$,h={},b={},k=function(a){a.pageRefreshData=h;c.restoreInitialData(a);g("1.0",a.featuresToRefresh)},l=function(){var a=f.getProductAsinAndOfferData().asin,b=d("#twister_feature_div"),
c=d("li[data-defaultasin\x3d"+a+"]"),a=d("li[data-defaultasin\x3d"+a+"] .a-size-mini"),e=d("#priceblock_ourprice"),g=d("#priceblock_saleprice");0>=b.length||0>=c.length||0>=a.length||(e.length?a.text(e.text()):g.length?a.text(g.text()):a.text(""))},g=function(a,b){e.each(b,function(b,c){d(b).css("opacity",a)})},m=function(){try{var b=f.getInitialProductPriceContent();e.each(b,function(a,b){var c=d("li[data-defaultasin\x3d"+b+"] .a-size-mini");c.length&&c.text(a)});a.increaseMetricBy("restoreInitialPriceInProductTwister_fail",
0);a.metric("restoreInitialPriceInProductTwister_success",1)}catch(c){a.increaseMetricBy("restoreInitialPriceInProductTwister_success",0),a.metric("restoreInitialPriceInProductTwister_fail",1),a.log(c)}};e.off("vas:vas-twister-page-refresh-start");e.on("vas:vas-twister-page-refresh-start",function(a){g("0.5",a.featuresToRefresh)});e.off("vas:vas-twister-page-refresh-complete");e.on("vas:vas-twister-page-refresh-complete",function(a){b[a.baseOfferMerchantId+a.asin]=a.pageRefreshData;l();g("1.0",a.featuresToRefresh);
e.trigger("vas:twister-update-widgets","hide");e.trigger("vas:add-asin-offer-data-to-cart",a.svcAsin)});e.off("vas:vas-twister-page-refresh-failed");e.on("vas:vas-twister-page-refresh-failed",function(a){g("1.0",a.featuresToRefresh)});e.off("vas:vas-twister-update-features-failed");e.on("vas:vas-twister-update-features-failed",function(a){k(a.featuresToRefresh);g("1.0",a.featuresToRefresh)});e.off("vas:vas-twister-initialdata-restore-complete");e.on("vas:vas-twister-initialdata-restore-complete",
function(){m();e.trigger("vas:remove-asin-offer-data-to-cart");e.trigger("vas:twister-update-widgets","show")});e.off("vas:twister-update-widgets");e.on("vas:twister-update-widgets",function(a){var b=d("#dpFastTrack_feature_div"),c=d("#moreBuyingChoices_feature_div");0<b.length&&("show"===a?b.show():b.hide());0<c.length&&("show"===a?c.show():c.hide())});return{setInitialFeaturesData:function(a){e.each(a,function(a,b){h[a]=d(a).prop("outerHTML")});e.trigger("vas:twister-update-widgets","show")},performPageRefresh:function(a){a.ajaxUrl=
"/gp/product/"+a.asin+"?m\x3d"+a.baseOfferMerchantId;a.pageRefreshData=b[a.baseOfferMerchantId+a.asin];c.performPageRefresh(a)},abortPageRefreshRequests:function(){c.abortPageRefreshRequests()},restoreInitialPriceInProductTwister:m,restoreInitialData:k,updatePriceInProductTwisterDesktop:l,hideOfferUpdateWidget:function(){d("#vas-twister-price-update-div").hide()},showOfferUpdateWidget:function(){d("#vas-twister-price-update-div").show()}}});q.when("A","vas-twister-xl-setting","vas-twister-page-refresh-webView",
"vas-metrics-publisher","ready").execute("vas-twister-xl-controller",function(e,c,a,f){var d=e.$,h="#buybox_feature_div #desktop_buybox #price_feature_div #unifiedPrice_feature_div #pmpux_feature_div #issuancePriceblockAmabot_feature_div #alternativeOfferEligibilityMessaging_feature_div #applicablePromotionList_feature_div #availability_feature_div #holidayDeliveryMessage_feature_div #dpFastTrack_feature_div #businessOnlyItem_feature_div #shipsFromSoldBy_feature_div #businessPricing_feature_div #smileEligibility_feature_div #holidayAvailabilityMessage_feature_div #moreBuyingChoices_feature_div".split(" "),
b=!1,k="",l="",g=function(){c.logVasTwistetATCReftag(l)},m=function(){try{e.trigger("vas:remove-service-asin-buybox-event"),d("#addToCart").unbind("submit.ppdBundles"),f.increaseMetricBy("a2cFormRemoveEventSend_fail",0),f.metric("a2cFormRemoveEventSend_success")}catch(a){f.increaseMetricBy("a2cFormRemoveEventSend_success",0),f.metric("a2cFormRemoveEventSend_fail"),f.log(a)}},n=function(a){try{e.trigger("vas:add-service-asin-buybox-event",a),d("#addToCart").bind("submit.ppdBundles",g),f.increaseMetricBy("a2cFormAddEventSend_success",
1),f.increaseMetricBy("a2cFormAddEventSend_fail",0)}catch(b){f.increaseMetricBy("a2cFormAddEventSend_success",0),f.increaseMetricBy("a2cFormAddEventSend_fail",1),f.log(b)}},p={vasTwisterExpander:function(a,b){d("#vas-fake-twister-includesection-"+a.attr("data-twister-svcAsin")).find("i").hasClass("a-icon-extender-collapse")?c.logTwisterExpanderReftagAndMetric(!1,b):c.logTwisterExpanderReftagAndMetric(!0,b)},ppdFakeTwisterTrigger:function(g){var f=g.attr("data-twister-svcAsin");if("undefined"===typeof f||
!0===c.getVasTwisterOption(f).isOfferAvailable)if(d(".vas-ppd-swatch-item").removeClass("vas-ppd-swatch-select"),g.addClass("vas-ppd-swatch-select"),d(".vas-twister-whatsincluded").hide(),d("#vas-twister-title").html(g.attr("data-twister-callToAction")),"removeOffer"===g.attr("data-twister-action")){a.abortPageRefreshRequests();d("#ppdb-add-service-checkbox").prop("checked",!1);l="undefined";if(k!==c.getProductAsinAndOfferData("merchantId")){var r={};r.featuresToRefresh=h;a.restoreInitialData(r);
k=c.getProductAsinAndOfferData("merchantId");a.showOfferUpdateWidget()}else a.hideOfferUpdateWidget();m();c.logVasTwisterInteractionReftag(!1,"ItemOnly");e.trigger("vas:twister-update-widgets","show")}else!1===b&&(a.setInitialFeaturesData(h),b=!0),d("#ppdb-add-service-checkbox").prop("checked",!0),m(),d("#vas-fake-twister-whatsincluded-"+g.attr("data-twister-svcAsin")).show(),d("#vas-fake-twister-includesection-"+g.attr("data-twister-svcAsin")).find("i").hasClass("a-icon-extender-collapse")||(d("#vas-fake-twister-includesection-"+
g.attr("data-twister-svcAsin")).unbind("click"),d("#vas-fake-twister-includesection-"+g.attr("data-twister-svcAsin")).bind("click",function(a){p.vasTwisterExpander(g,f)}),d("#vas-fake-twister-includesection-"+g.attr("data-twister-svcAsin")).click()),l=f,k!==c.getVasTwisterOption(f).baseOfferMerchantId?(r={},r.asin=c.getProductAsinAndOfferData("asin"),r.svcAsin=f,r.merchantId=c.getVasTwisterOption(f).offerData.merchantId,r.isVariationalParent=!1,r.featuresToRefresh=h,r.baseOfferMerchantId=c.getVasTwisterOption(f).baseOfferMerchantId,
a.performPageRefresh(r),k=c.getVasTwisterOption(f).baseOfferMerchantId,a.showOfferUpdateWidget()):(e.trigger("vas:twister-update-widgets","hide"),n(c.getSettings(g.attr("data-twister-svcAsin"))),a.hideOfferUpdateWidget()),c.logVasTwisterInteractionReftag(!0,f)}};e.off("vas:add-asin-offer-data-to-cart");e.on("vas:add-asin-offer-data-to-cart",function(a){n(c.getSettings(a))});e.off("vas:remove-asin-offer-data-to-cart");e.on("vas:remove-asin-offer-data-to-cart",function(){m()});var r=function(){d(".vas-ppd-swatch-item").unbind("click");
d(".vas-ppd-swatch-item").bind("click",function(a){a=d(a.currentTarget);a.hasClass("vas-ppd-swatch-select")||p.ppdFakeTwisterTrigger(a)})};e.off("vas:widgetname:twister_xl");e.on("vas:widgetname:twister_xl",function(){c.setInitialWidgetSettings();r();k=c.getProductAsinAndOfferData("merchantId");a.restoreInitialPriceInProductTwister();if(c.hasPrecheckEnabled()){a.hideOfferUpdateWidget();var b=d(".vas-ppd-swatch-select");p.ppdFakeTwisterTrigger(b)}c.disableTwisterOnLoad()&&d("#vasTwisterRow").removeClass("vas-twister-disabled")})});
q.when("A","dp-refresh-handler","vas-metrics-publisher").register("vas-upsell-page-refresh",function(e,c,a){var f=e.$,d={featureName:"upsell"},h=function(b){return{pageRefreshUrl:"/gp/page/refresh",ajaxOptions:{method:"POST",timeout:"90000",success:function(){"undefined"===typeof b.svcAsin?e.trigger("vas:twister-update-widgets","show"):(e.trigger("vas:add-asin-offer-data-to-cart",b.svcAsin),e.trigger("vas:twister-update-widgets","hide"));a.increaseMetricBy("vasUpsellPageRefresh_success",1);a.increaseMetricBy("vasUpsellPageRefresh_fail",
0)},error:function(){a.increaseMetricBy("vasUpsellPageRefresh_success",0);a.increaseMetricBy("vasUpsellPageRefresh_fail",1)}}}};return{performPageRefresh:function(a){var e=h(a),f=new c(d,void 0,e),g={};g.m=a.merchantId;g.triggerEvent=d.featureName;a=f.createCustomParamsMap({},g);f.doPageRefresh(a,e.ajaxOptions,!0)},hideOfferUpdateWidget:function(){f("#vas-twister-price-update-div").hide()},showOfferUpdateWidget:function(){f("#vas-twister-price-update-div").show()}}});q.register("vas-enhanceppd-config",
function(){return{enhancedPPDMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"eppdb"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isCritical:"crtcl"},metricPrefixes:{tenant:"vas",widget:"eppdb"}}}});q.when("A","vas-common-settings","vas-metrics-publisher","vas-utilities","vas-enhanceppd-config","vas-metric-utils","ready").register("vas-enhanceppd-setting",function(e,c,a,f,d,h){var b={enhancePpdViewModel:{}},k=d.enhancedPPDMetricConstants.refmarkerPrefixes,
l=d.enhancedPPDMetricConstants.metricPrefixes;return{getSettings:function(a){return b.hasOwnProperty(a)?b[a]:b},setSettings:function(a,c,d){a&&d?b[a][d]=c:a&&(b[a]=c)},fetchEnhancePpdSetting:function(){b.enhancePpdViewModel=c.getSetting("winningWidgetVM");b.productAsin=c.getSetting("widgetCommonVM").productAsin;b.zipCode=c.getSetting("widgetCommonVM").zipCode;b.buyboxPrice=c.getSetting("widgetCommonVM").buyboxPrice;b.shouldIntegrateWithBuyback=c.getSetting("widgetCommonVM").buybackIntegration;b.isEnhanceUpsellPresence=
"undefined"===typeof b.enhancePpdViewModel.upsellAsinOfferData?!1:!0;b.sessionId=c.getSetting("widgetCommonVM").sessionId;b.mappingSet=c.getSetting("widgetCommonVM").mappingSet;b.enhancedPPDMetricConstants=d.enhancedPPDMetricConstants;b.hitParameters=h.createHitParameters(d.enhancedPPDMetricConstants);var e,m=!0===b.enhancePpdViewModel.isUpsellCritical?"1":"0",n=b.enhancePpdViewModel.baseAsinOfferData.upsellAsin,p=b.enhancePpdViewModel.productAsin,r=f.getPriceValue(b.enhancePpdViewModel.winningServiceMinPrice),
q=b.enhancePpdViewModel.baseAsinOfferData.merchantId,x=f.getPriceValue(b.buyboxPrice),v=b.zipCode;e=!1===typeof b.isEnhanceUpsellPresence?"vas_bdlppd_enh_":"vas_bdlppd_enh_upsell_";e=e+m+"_a_"+v;a.logRefTag("vas_bdlppd_ld_"+m+"_a_"+v,"LocalServicesWidget","Impression",n,"popUp",q,p,r,x);a.logRefTag(e,"LocalServicesWidget","Impression",n,"popUp",q,p,r,x);m=b.isEnhanceUpsellPresence?"uppdb":l.widget;a.createCSMNameAndLog(l.tenant,m,a.CSMActionTypes.glanceView);a.createRefMarkerAndLog(k.tenant,b.mappingSet,
m,a.RefmarkerActionTypes.glanceView,b.hitParameters)},logPPDBundlesExpander:function(c){a.increaseMetricBy(!1===typeof b.isEnhanceUpsellPresence?"vas_ppd_bdl_sm_clicks":"vas_ppd_bdl_sm_upg_clicks",1);a.createRefMarkerAndLog(k.tenant,b.mappingSet,k.widget,c?a.CSMActionTypes.expandBulletPoints:a.CSMActionTypes.collapseBulletPoints,b.hitParameters);a.createCSMNameAndLog(l.tenant,l.widget,c?a.RefmarkerActionTypes.expandBulletPoints:a.RefmarkerActionTypes.collapseBulletPoints)},logPPDBundlesATCReftag:function(){var c=
"vas_bdlppd_atc_"+(!0===b.enhancePpdViewModel.isUpsellCritical?"1":"0"),d=b.enhancePpdViewModel.baseAsinOfferData.upsellAsin,e=b.enhancePpdViewModel.productAsin,h=f.getPriceValue(b.enhancePpdViewModel.winningServiceMinPrice);a.logRefTag(c,"LocalServicesWidget","CartAdd",d,"popUp",b.enhancePpdViewModel.baseAsinOfferData.merchantId,e,h);a.createCSMNameAndLog(l.tenant,l.widget,a.CSMActionTypes.addToCart);a.createRefMarkerAndLog(k.tenant,b.mappingSet,k.widget,a.RefmarkerActionTypes.addToCart,b.hitParameters)},
logCheckboxInteractionReftag:function(c){var d=!0===b.enhancePpdViewModel.isUpsellCritical?"1":"0",e=b.enhancePpdViewModel.baseAsinOfferData.upsellAsin,h=b.enhancePpdViewModel.productAsin,n=f.getPriceValue(b.enhancePpdViewModel.winningServiceMinPrice);a.logRefTag("vas_bdlppd_"+c+"_"+b.ppdBundlesInteractionSlice+"_"+d+"_a","LocalServicesWidget","AddServiceCheck",e,"popUp",b.enhancePpdViewModel.baseAsinOfferData.merchantId,h,n);a.createCSMNameAndLog(l.tenant,l.widget,"y"===c?a.CSMActionTypes.serviceIncluded:
a.CSMActionTypes.serviceNotIncluded);a.createRefMarkerAndLog(k.tenant,b.mappingSet,k.widget,"y"===c?a.RefmarkerActionTypes.serviceIncluded:a.RefmarkerActionTypes.serviceNotIncluded,b.hitParameters)},logBuyBackReftagHandler:function(){var c=b.enhancePpdViewModel.baseAsinOfferData.upsellAsin,d=b.enhancePpdViewModel.productAsin,e="vas_bbk_"+d+"_"+c,h=f.getPriceValue(b.enhancePpdViewModel.winningServiceMinPrice);a.logRefTag(e,"LocalServicesWidget","CartAdd",c,"popUp",b.enhancePpdViewModel.baseAsinOfferData.merchantId,
d,h);a.createRefMarkerAndLog(k.tenant,b.mappingSet,k.widget,"bbk",b.hitParameters);return!0}}});q.when("A","vas-enhanceppd-setting","vas-metrics-publisher","vas-addUpsell-to-cart","ready").execute("vas-enhanceppd-controller",function(e,c,a,f){var d=e.$,h=function(){c.logPPDBundlesATCReftag()},b=function(){c.logBuyBackReftagHandler()},k=function(){try{e.trigger("vas:remove-service-asin-buybox-event"),d("#addToCart").unbind("submit.ppdBundles"),c.getSettings("shouldIntegrateWithBuyback")&&d("#buyBackBuyNow").length&&
d(document.body).undelegate("#buyBackBuyNow","submit.vasBuyBackReftag"),a.increaseMetricBy("a2cFormRemoveEventSend_fail",0),a.metric("a2cFormRemoveEventSend_success")}catch(b){a.increaseMetricBy("a2cFormRemoveEventSend_success",0),a.metric("a2cFormRemoveEventSend_fail"),a.log(b)}},l=function(g){try{e.trigger("vas:add-service-asin-buybox-event",g),d("#addToCart").bind("submit.ppdBundles",h),c.getSettings("shouldIntegrateWithBuyback")&&(e.trigger("vas:add-service-asin-buyback-form-event",g),d(document.body).delegate("#buyBackBuyNow",
"submit.vasBuyBackReftag",b)),a.increaseMetricBy("a2cFormAddEventSend_success",1),a.increaseMetricBy("a2cFormAddEventSend_fail",0)}catch(f){a.increaseMetricBy("a2cFormAddEventSend_success",0),a.increaseMetricBy("a2cFormAddEventSend_fail",1),a.log(f)}},g={ppdBundlesCheckBoxHandler:function(){var a="",b=d("#ppdBundlesEnhancedWrapper"),e=d("#ppdBundlesEnhancedBox");d("#ppdb-add-service-checkbox").is(":checked")?(a="y",k(),c.getSettings("isEnhanceUpsellPresence")&&d("#ppdb-upsell-service-checkbox").is(":checked")?
l(c.getSettings("enhancePpdViewModel").upsellAsinOfferData):l(c.getSettings("enhancePpdViewModel").baseAsinOfferData),b.addClass("ppdBundlesOrangeBorder").removeClass("ppdBundlesGrayBorder"),e.addClass("ppdBundlesOrangeBox"),null===c.getSettings("ppdBundlesInteractionSlice")&&c.setSettings("ppdBundlesInteractionSlice",1),d("#ppdBundlesExpanderContent").is(":visible")||d("#ppdBundlesExpanderHeadingLink").click()):(a="n",b.addClass("ppdBundlesGrayBorder").removeClass("ppdBundlesOrangeBorder"),e.removeClass("ppdBundlesOrangeBox"),
c.getSettings("isEnhanceUpsellPresence")&&d("#ppdb-upsell-service-checkbox").is(":checked")&&d("#ppdb-upsell-service-checkbox").click(),k());c.logCheckboxInteractionReftag(a);c.setSettings("ppdBundlesInteractionSlice",1)},ppdBundlesUpsellCheckBoxHandler:function(){var a="";d("#ppdb-upsell-service-checkbox").is(":checked")?(d("#ppdb-add-service-checkbox").is(":checked")?(k(),l(c.getSettings("enhancePpdViewModel").upsellAsinOfferData)):d("#ppdb-add-service-checkbox").click(),a="y"):(k(),l(c.getSettings("enhancePpdViewModel").baseAsinOfferData),
a="n");c.logCheckboxInteractionReftag(a)}},m=function(){e.off("a:expander:ppdBundlesExpander:toggle:expand");e.on("a:expander:ppdBundlesExpander:toggle:expand",function(a){c.logPPDBundlesExpander(!0)});e.off("a:expander:ppdBundlesExpander:toggle:collapse");e.on("a:expander:ppdBundlesExpander:toggle:collapse",function(a){c.logPPDBundlesExpander(!1)});d("#ppdb-add-service-checkbox").unbind("change");d("#ppdb-add-service-checkbox").bind("change",function(){g.ppdBundlesCheckBoxHandler()});c.getSettings("isEnhanceUpsellPresence")&&
(d("#ppdb-upsell-service-checkbox").unbind("change"),d("#ppdb-upsell-service-checkbox").bind("change",function(){g.ppdBundlesUpsellCheckBoxHandler()}))},n=function(){e.off("vas:ldbb-a2c-event:desktop");e.on("vas:ldbb-a2c-event:desktop",function(a){if(d("#ppdb-add-service-checkbox").is(":checked")){var b;b=c.getSettings("isEnhanceUpsellPresence")&&d("#ppdb-upsell-service-checkbox").is(":checked")?c.getSettings("enhancePpdViewModel").upsellAsinOfferData:c.getSettings("enhancePpdViewModel").baseAsinOfferData;
f.addUpsell(b.upsellAsin,b.offerlistingId,c.getSettings("sessionId"),a)}});e.off("vas:ldbb-upsell-added:desktop");e.on("vas:ldbb-upsell-added:desktop",function(){h()})};e.off("vas:widgetname:enhancedPPD");e.on("vas:widgetname:enhancedPPD",function(){c.fetchEnhancePpdSetting();m();n();d("#ppdb-add-service-checkbox").is(":checked")?(k(),d("#ppdBundlesEnhancedWrapper").addClass("ppdBundlesOrangeBorder").removeClass("ppdBundlesGrayBorder"),d("#ppdBundlesEnhancedBox").addClass("ppdBundlesOrangeBox"),c.getSettings("isEnhanceUpsellPresence")&&
d("#ppdb-upsell-service-checkbox").is(":checked")?l(c.getSettings("enhancePpdViewModel").upsellAsinOfferData):l(c.getSettings("enhancePpdViewModel").baseAsinOfferData)):(d("#ppdBundlesEnhancedWrapper").addClass("ppdBundlesGrayBorder").removeClass("ppdBundlesOrangeBorder"),d("#ppdBundlesEnhancedBox").removeClass("ppdBundlesOrangeBox"))})});q.register("vas-ppdbundle-config",function(){return{ppdBundlesMetricConstants:{refmarkerPrefixes:{tenant:"vas",widget:"ppdb"},hitRecordConstants:{pageType:"DetailPage",
subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isCritical:"crtcl"},metricPrefixes:{tenant:"vas",widget:"ppdb"}}}});q.when("A","vas-common-settings","vas-metrics-publisher","vas-utilities","vas-ppdbundle-config","vas-metric-utils","ready").register("vas-ppdbundle-setting",function(e,c,a,f,d,h){var b=e.$,k={ppdBundleViewModel:{}},l=d.ppdBundlesMetricConstants.refmarkerPrefixes,g=d.ppdBundlesMetricConstants.metricPrefixes;return{getSettings:function(a){return k.hasOwnProperty(a)?
k[a]:k},setSettings:function(a,b,c){a&&c?k[a][c]=b:a&&(k[a]=b)},fetchPpdBundleSetting:function(){k.ppdBundleViewModel=c.getSetting("winningWidgetVM");k.productAsin=c.getSetting("widgetCommonVM").productAsin;k.zipCode=c.getSetting("widgetCommonVM").zipCode;k.buyboxPrice=c.getSetting("widgetCommonVM").buyboxPrice;k.sessionId=c.getSetting("widgetCommonVM").sessionId;k.mappingSet=c.getSetting("widgetCommonVM").mappingSet;k.ppdBundlesMetricConstants=d.ppdBundlesMetricConstants;k.hitParameters=h.createHitParameters(k.ppdBundlesMetricConstants);
var e=b("#ppdb-add-service-checkbox");e.is(":checked")&&e.prop("checked",!1);var e=!0===k.ppdBundleViewModel.isUpsellCritical?"1":"0",n=k.zipCode,p=k.productAsin,r=f.getPriceValue(k.ppdBundleViewModel.baseAsinOfferData.price),q=f.getPriceValue(k.buyboxPrice),x=k.ppdBundleViewModel.baseAsinOfferData.upsellAsin,v=k.ppdBundleViewModel.baseAsinOfferData.merchantId,w="vas_bdlppd_old_"+e+"_a_"+n;a.logRefTag("vas_bdlppd_ld_"+e+"_a_"+n,"LocalServicesWidget","Impression",x,"popUp",v,p,r,q);a.logRefTag(w,"LocalServicesWidget",
"Impression",x,"popUp",v,p,r,q);a.metric("bdl_old_gv");a.createCSMNameAndLog(g.tenant,g.widget,a.CSMActionTypes.glanceView);a.createRefMarkerAndLog(l.tenant,k.mappingSet,l.widget,a.RefmarkerActionTypes.glanceView,k.hitParameters)},logCheckboxInteractionReftag:function(b){var c=!0===k.ppdBundleViewModel.isUpsellCritical?"1":"0",d=k.ppdBundleViewModel.baseAsinOfferData.upsellAsin,e=k.productAsin,h=f.getPriceValue(k.ppdBundleViewModel.baseAsinOfferData.price);f.getPriceValue(k.buyboxPrice);a.logRefTag("vas_bdlppd_"+
b+"_1_"+c+"_a","LocalServicesWidget","AddServiceCheck",d,"popUp",k.ppdBundleViewModel.baseAsinOfferData.merchantId,e,h);a.createCSMNameAndLog(g.tenant,g.widget,"y"===b?a.CSMActionTypes.serviceIncluded:a.CSMActionTypes.serviceNotIncluded);a.createRefMarkerAndLog(l.tenant,k.mappingSet,l.widget,"y"===b?a.RefmarkerActionTypes.serviceIncluded:a.RefmarkerActionTypes.serviceNotIncluded,k.hitParameters)},logATCInteraction:function(){a.createCSMNameAndLog(g.tenant,g.widget,a.CSMActionTypes.addToCart);a.createRefMarkerAndLog(l.tenant,
k.mappingSet,l.widget,a.RefmarkerActionTypes.addToCart,k.hitParameters)},logSDPRedirectReftagAndMetric:function(){a.createCSMNameAndLog(g.tenant,g.widget,a.CSMActionTypes.redirect);a.createRefMarkerAndLog(l.tenant,k.mappingSet,l.widget,a.RefmarkerActionTypes.redirect,k.hitParameters);return!0}}});q.when("A","vas-ppdbundle-setting","vas-metrics-publisher","vas-addUpsell-to-cart","ready").execute("vas-ppdbundle-controller",function(e,c,a,f){var d=e.$,h=function(){try{e.trigger("vas:remove-service-asin-buybox-event"),
a.increaseMetricBy("a2cFormRemoveEventSend_fail",0),a.metric("a2cFormRemoveEventSend_success")}catch(b){a.increaseMetricBy("a2cFormRemoveEventSend_success",0),a.metric("a2cFormRemoveEventSend_fail"),a.log(b)}},b={ppdBundlesCheckBoxHandler:function(){var b="";if(d("#ppdb-add-service-checkbox").is(":checked")){b=c.getSettings("ppdBundleViewModel").baseAsinOfferData;c.logATCInteraction();try{e.trigger("vas:add-service-asin-buybox-event",b),a.increaseMetricBy("a2cFormAddEventSend_success",1),a.increaseMetricBy("a2cFormAddEventSend_fail",
0)}catch(f){a.increaseMetricBy("a2cFormAddEventSend_success",0),a.increaseMetricBy("a2cFormAddEventSend_fail",1),a.log(f)}b="y"}else h(),b="n";c.logCheckboxInteractionReftag(b)}},k=function(){e.off("vas:lux-zip-updated");e.on("vas:lux-zip-updated",function(){h()});d("#ppdb-add-service-checkbox").unbind("change");d("#ppdb-add-service-checkbox").bind("change",function(){b.ppdBundlesCheckBoxHandler()});d("#ppdBundles-estimate-SDP").unbind("click");d("#ppdBundles-estimate-SDP").bind("click",function(){c.logSDPRedirectReftagAndMetric()})},
l=function(){e.off("vas:ldbb-a2c-event:desktop");e.on("vas:ldbb-a2c-event:desktop",function(a){if(d("#ppdb-add-service-checkbox").is(":checked")){var b=c.getSettings("ppdBundleViewModel").baseAsinOfferData;f.addUpsell(b.upsellAsin,b.offerlistingId,c.getSettings("sessionId"),a)}})};e.off("vas:widgetname:ppdBundle");e.on("vas:widgetname:ppdBundle",function(){c.fetchPpdBundleSetting();k();l()})});q.register("vas-regularPPD-config",function(){return{regularPPDMetricConstants:{refmarkerPrefixes:{tenant:"vas",
widget:"rpdp"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip"},metricPrefixes:{tenant:"vas",widget:"rpdp"}}}});q.when("A","vas-common-settings","vas-metrics-publisher","vas-regularPPD-config","vas-metric-utils","ready").register("vas-regularppd-setting",function(e,c,a,f,d){var h,b,k,l,g=f.regularPPDMetricConstants.refmarkerPrefixes,m=f.regularPPDMetricConstants.metricPrefixes;return{fetchRegularPpdSetting:function(){h=c.getSetting("widgetCommonVM").productAsin;
b=c.getSetting("winningWidgetVM").upsellAsin;k=c.getSetting("widgetCommonVM").mappingSet;c.getSetting("widgetCommonVM");c.getSetting("widgetCommonVM");l=d.createHitParameters(f.regularPPDMetricConstants);a.createRefMarkerAndLog(g.tenant,k,g.widget,a.RefmarkerActionTypes.glanceView,l);a.createCSMNameAndLog(m.tenant,m.widget,a.CSMActionTypes.glanceView);a.logRefTag("vas_ppd_cs_"+h+"_"+b);a.logUeMetricIncreaseCount("vas_standard_pdp_show")},logRedirectMetrics:function(){a.createCSMNameAndLog(m.tenant,
m.widget,a.CSMActionTypes.redirect);a.createRefMarkerAndLog(g.tenant,k,g.widget,a.RefmarkerActionTypes.redirect,l)}}});q.when("A","vas-regularppd-setting","vas-metrics-publisher","ready").execute("vas-regularppd-controller",function(e,c,a){var f=e.$,d=function(){f(".sdpRedirect").unbind("click");f(".sdpRedirect").bind("click",function(){c.logRedirectMetrics();a.logUeMetricIncreaseCount("vas_pdp_sdp_redirect");c.logRedirectMetrics()})};e.off("vas:widgetname:regularPPD");e.on("vas:widgetname:regularPPD",
function(){d();c.fetchRegularPpdSetting()})});q.when("A","vas-common-settings","vas-metrics-publisher","ready").register("vas-brandmessaging-setting",function(e,c,a){var f,d,h;return{fetchBrandMessagingSettings:function(){f=c.getSetting("widgetCommonVM").productAsin;d=c.getSetting("winningWidgetVM").upsellAsin;h=c.getSetting("winningWidgetVM").impressionReftag;a.logRefTag(h,"LocalServicesWidget","Impression",d,null,null,f,null,null);a.logUeMetricIncreaseCount("vas_brand_gv")}}});q.when("A","vas-brandmessaging-setting",
"vas-metrics-publisher","ready").execute("vas-brandmessaging-controller",function(e,c,a){var f=e.$,d=function(){f("#vas-brand-messaging-details-redirect").unbind("click");f("#vas-brand-messaging-details-redirect").bind("click",function(){a.logUeMetricIncreaseCount("vas_brand_details_redir")})};e.off("vas:widgetname:brandMessagingDesktop");e.on("vas:widgetname:brandMessagingDesktop",function(){d();c.fetchBrandMessagingSettings()})});q.register("vas-lux-config",function(){return{luxMetricConstants:{refmarkerPrefixes:{tenant:"vas",
widget:"lux"},hitRecordConstants:{pageType:"DetailPage",subPageType:"AddServices"},additionalRequestDataKeys:{zipCode:"zip",isCritical:"crtcl"},metricPrefixes:{tenant:"vas",widget:"lux"}}}});q.when("A","vas-metrics-publisher","vas-common-settings","vas-lux-config","vas-widgets","ready").execute("vas-lux-controller",function(e,c,a,f){var d=e.$,h,b;"undefined"!==typeof a.getSetting("widgetCommonVM")&&(b=a.getSetting("widgetCommonVM").isLocationUXEnable,h=a.getSetting("widgetCommonVM").locationUXEvent);
var k=f.luxMetricConstants.hitRecordConstants,l=f.luxMetricConstants.refmarkerPrefixes,g=f.luxMetricConstants.additionalRequestDataKeys,m=f.luxMetricConstants.metricPrefixes,n=function(){var b={};b[c.hitParameterKeys.productAsin]=a.getSetting("widgetCommonVM").productAsin;b[c.hitParameterKeys.merchantId]=a.getSetting("widgetCommonVM").merchantId;b[c.hitParameterKeys.pageType]=k.pageType;b[c.hitParameterKeys.subPageType]=k.subPageType;b[c.hitParameterKeys.additionalRequestData]={};return b},p=function(b){var f=
a.getSetting("widgetCommonVM").zipCode;f&&""!==f||(f="null");if(b!==f){var h=a.getSetting("widgetCommonVM").defaultServiceAsinToOffer,k=a.getSetting("widgetCommonVM").serviceAsin,p=a.getSetting("widgetCommonVM").mappingSet,h=k?k:h,f="{'area':'"+b+"','prev_zip':'"+f+"','show_ppd_widget':'"+a.getSetting("widgetCommonVM").defaultServiceAsinToOffer+"','asinTitle':'"+a.getSetting("widgetCommonVM").defaultServiceAsinToOffer+"','svcAsin':'"+h+"','isLuxRefresh':'true'}",k=n();k[c.hitParameterKeys.upsellAsin]=
h;k.additionalRequestData[g.zipCode]=b;c.createRefMarkerAndLog(l.tenant,p,l.widget,"rfrsh",k);f=encodeURIComponent(f);d.ajax({url:"/gp/product/ajax-handlers/ppd-ajax.html",data:{optionalParams:'{"vas":"'+f+'"}',ASIN:a.getSetting("widgetCommonVM").productAsin,isVariationalParent:a.getSetting("widgetCommonVM").isVariationalParent,viewId:"PPD_AJAX",PTD:a.getSetting("widgetCommonVM").productPTD,WDG:a.getSetting("widgetCommonVM").productWDG},dataType:"html",type:"POST",success:function(a){c.createCSMNameAndLog(m.tenant,
m.widget,"zipRefresh");e.trigger("vas:remove-service-asin-buybox-event");var b=document.createElement("div");b.innerHTML=a;a=d("#addServices_feature_div");(b=d("#addServices_feature_div",b))?(c.increaseMetricBy("lux_zip_refresh_fail",0),a.replaceWith(b)):c.increaseMetricBy("lux_zip_refresh_fail",1)},error:function(a){c.createCSMNameAndLog(m.tenant,m.widget,"zipRefreshFail");c.increaseMetricBy("lux_zip_refresh_fail",1)}})}};"true"===b&&(e.state("VasLuxReftag"),e.state("VasLuxReftag")&&!1!==e.state("VasLuxReftag").fired||
(c.logRefTag("vas_lux_zip_refresh_"+a.getSetting("widgetCommonVM").useTwisterRefreshVal),e.state("VasLuxReftag",{fired:!0})),e.on(h,function(a){"undefined"!==typeof a?p(a.zipCode):p("null")}))})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("AmazonCertifiedDetailPageAssets"):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){c.when("A","ready").execute(function(a){var c=a.$,d=function(a){b.ue&&b.ue.count&&b.ue.count(a,1)},f=a.debounce(function(){var a=c("#amazon-certified-content");a.length&&!a.data("amazon-certified-render-counter-logged")&&(d("cetech-ac-badge-render"),a.data("amazon-certified-render-counter-logged",
!0))},1E3);a.on("a:popover:afterShow:AmazonCertifiedPopover a:popover:afterShow:AmazonCertifiedSecondaryView a:sheet:afterShow:AmazonCertifiedSheet",function(b){d("cetech-ac-explanatory-view-show");var e;b=c(".amazonCertifiedPageState").find("script").html();try{e=a.parseJSON(b)}catch(f){e={}}e=(e||{}).featuredCertificationShortId;c.get("/gp/product/ajax-handlers/reftag.html/ref="+(e?"amazon_certified_learn_more_"+e:"amazon_certified_learn_more"))});a.on("a:pageUpdate",f);f()})});
/* ******** */
(function(c){c.execute(function(){})})(function(){var c=window.AmazonUIPageJS||window.P,b=c._namespace||c.attributeErrors;return b?b("TAFCopyToClipboardAssets"):c}(),window);
/* ******** */
(function(g){var f=window.AmazonUIPageJS||window.P,h=f._namespace||f.attributeErrors,a=h?h("DetailPageAttachAssets"):f;a.guardFatal?a.guardFatal(g)(a,window):a.execute(function(){g(a,window)})})(function(g,f,h){g.when("A").execute("attach-dss-js",function(a){function k(a,c,e){return a.replace(new RegExp(c,"g"),e)}function h(){var b=a.$("#attachEscapedJson").val(),b=k(b,"\\|\\|",'"'),b=k(b,"&pipe;","||"),b=JSON.parse(b),c=a.$("#warrantyEscapedJson").val(),c=k(c,"\\|\\|",'"'),c=k(c,"&pipe;","||"),c=
JSON.parse(c),e="";if(null!==b&&null!==c){var d=c,f=c.baseASIN,g="dp_atch_dss_w_lm_"+f+"_"+d.asin,c="dp_atch_dss_w_r_"+f+"_"+d.asin,f="dp_atch_dss_w_lm_"+f+"_"+d.asin,e=e+'<div id="attach-desktop-sideSheet" class="a-section attach-desktop-sideSheet aok-hidden">\n'+('   <div id="attach-warranty-pane" class="a-section">\n       <div id="attach-warranty" class="a-section attach-sidesheet-card">\n           <input type="hidden" name="" value="'+d.asin+'" id="attach-warranty-asin">\n           <h1 class="a-size-medium a-spacing-none a-color-base a-text-center">'+
b.stringTranslations.si_warranty_title+'</h1>\n           <hr class="a-spacing-base a-spacing-top-small a-divider-normal attach-warranty-divider">\n           <div class="a-row a-spacing-micro">\n');null!==d.thumbImage&&(e+='                <div class="a-column a-span2">\n                    <img id="attach-sheet-warranty-image" src="" data-image-url="'+d.thumbImage+'" class="attach-accessory-image">\n                </div>\n');e+='                <div class="a-column a-span10 a-span-last">\n                    <a class="a-size-large a-spacing-micro a-link-normal a-color-base" target="_blank" rel="noopener" href="/dp/'+
d.asin+"/ref="+g+'">\n                        <strong>'+(null!==d.displayTitle?d.displayTitle:b.stringTranslations.si_accident_protection.replace("${brandName}",d.brandName))+'</strong>\n                    </a>\n                    <br>\n                    <span class="a-size-base a-color-secondary">'+b.stringTranslations.si_from+" "+d.merchantName+"</span>\n";null!==d.averageRating&&null!==d.numReviews&&null!==d.hasHalfStar&&null!==d.numFullStars&&0!==Number(d.averageRating)&&0!==Number(d.numReviews)&&
(g=b.stringTranslations.si_rating_out_of_5_stars.replace("${averageRating}",d.averageRating),e+='                    <div class="a-icon-row a-spacing-micro">\n                        <a class="a-link-normal" href="/product-reviews/'+d.asin+"/ref="+c+'?ie=UTF8&amp;showViewpoints=1">\n                            <i class="a-icon a-icon-star a-star-'+d.numFullStars+(d.hasHalfStar?"-5":"")+'"><span class="a-icon-alt">'+g+'</span></i>\n                        </a>\n                        <a class="a-link-normal" href="/product-reviews/'+
d.asin+"/ref="+c+'?ie=UTF8&amp;showViewpoints=1">\n                            '+d.numReviews+"\n                        </a>\n                    </div>\n");e+='                    <span id="attach-accessory-price-warranty" class="a-size-large a-color-base attach-warranty-price">'+d.formattedBuyingPrice+'</span>\n                </div>\n            </div>\n            <div class="a-row">\n                <div class="a-column a-span12">\n                    <div id="warrantyBulletRowWrapper" class="a-section">\n                        <div class="a-row a-spacing-micro">\n                            <ul class="a-unordered-list a-vertical a-spacing-none">\n';
for(c=0;c<d.bulletPoints.length;c++)e+='                                <li><span class="a-list-item">'+d.bulletPoints[c].text+"</span></li>\n";e+='                            </ul>\n                        </div>\n                        <div id="attachWarrantyButtonWrapper" class="a-section a-box-inner a-color-alternate-background">\n                            <div id="attachWarrantyButtonInnerWrapper" class="a-section a-box-inner">\n                                <div id="attach_add_accessory_alert_warranty" class="a-box a-alert-inline a-alert-inline-success aok-hidden attach_add_accessory_alert">\n                                    <div class="a-box-inner a-alert-container">\n                                        <i class="a-icon a-icon-alert"></i>\n                                        <div class="a-alert-content">\n                                            <span class="a-size-base a-color-success">'+
b.stringTranslations.item_added_to_cart+'</span>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div id="attach_add_accessory_error_warranty" class="a-box a-alert-inline a-alert-inline-error aok-hidden attach_add_accessory_alert" aria-live="assertive" role="alert">\n                                    <div class="a-box-inner a-alert-container">\n                                        <i class="a-icon a-icon-alert"></i>\n                                        <div class="a-alert-content">\n                                            <span class="a-size-base">\n                                                '+
b.stringTranslations["desktop-attach-accessory-failed-add-to-cart"]+'<br>\n                                            </span>\n                                            <a class="a-link-normal attach-add-to-cart-retry" href="#">\n                                                '+b.stringTranslations["desktop-attach-accessory-retry"]+'\n                                            </a>\n                                        </div>\n                                    </div>\n                                </div>\n                                <span id="attach_add_accessory_spinner_warranty" class="a-spinner a-spinner-small attach-spinner aok-hidden"></span>\n                                <div class="a-section attach-warranty-button-row">\n                                    <div class="a-button-stack">\n                                        <span id="attachSiAddCoverage" class="a-button a-button-primary">\n                                            <span class="a-button-inner">\n                                                <button id="attachSiAddCoverage-announce" data-asin="'+
d.asin+'" data-offering-id="'+d.oid+'" class="a-button-text" type="button">\n                                                    '+b.stringTranslations.si_add_coverage+'\n                                                </button>\n                                            </span>\n                                        </span>\n                                        <span id="attachSiNoCoverage" class="a-button">\n                                            <span class="a-button-inner">\n                                                <button id="attachSiNoCoverage-announce" class="a-button-text" type="button">\n                                                    '+
b.stringTranslations.si_no_thanks+'\n                                                </button>\n                                            </span>\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <a class="a-link-normal" target="_blank" rel="noopener" href="/dp/'+
d.asin+"/ref="+f+'">\n                '+b.stringTranslations["services-bundle-detail-link"]+"\n            </a>\n        </div>\n    </div>\n";e+='    <div id="attach-accessory-pane" class="a-section">\n        <div class="a-scroller attach-accessory-section a-scroller-vertical">\n            <div class="a-section a-spacing-none a-padding-base attach-primary-atc-confirm-box">\n                <div id="attachAddBaseItemSuccessAlert" class="a-box a-alert a-alert-success added-to-cart-message-box aok-hidden">\n                    <div class="a-box-inner a-alert-container">\n                        <h4 class="a-alert-heading">'+
b.stringTranslations.item_added_to_cart+'</h4>\n                        <i class="a-icon a-icon-alert"></i>\n                        <div class="a-alert-content"></div>\n                    </div>\n                </div>\n                <div id="attachAddBaseItemErrorAlert" class="a-box a-alert a-alert-error added-to-cart-message-box aok-hidden" aria-live="assertive" role="alert">\n                    <div class="a-box-inner a-alert-container">\n                        <h4 class="a-alert-heading">'+
b.stringTranslations.item_not_added+'</h4>\n                        <i class="a-icon a-icon-alert"></i>\n                        <div class="a-alert-content"></div>\n                    </div>\n                </div>\n                <div id="attach-added-to-cart-message" class="a-fixed-left-grid">\n                    <div class="a-fixed-left-grid-inner a-grid-vertical-align a-grid-top">\n                        <div class="a-text-center a-fixed-left-grid-col a-col-left" style="width:234px;margin-left:-234px;float:left;">\n                            <div id="attach-added-to-cart-alert-and-image-area" class="a-row a-grid-vertical-align a-grid-center">\n                                <div class="a-section">\n                                    <img id="attach-sheet-view-base-product-image" src="" data-image-url="'+
b.baseProductImage+'" class="attach-accessory-image attach-base-product-image">\n                                </div>\n                            </div>\n                        </div>\n                        <div class="a-fixed-left-grid-col a-col-right" style="padding-left:0%;float:left;">\n                            <div class="a-row a-spacing-medium">\n                                <div class="a-column a-span11 a-text-left a-spacing-top-large">\n                                    <span class="a-size-base-plus a-color-base">\n                                        <span id="attach-accessory-cart-total-string">Cart Total (# items)</span>\n                                    </span>\n                                    <span class="a-size-base-plus a-color-price a-text-bold">\n                                        <span id="attach-accessory-cart-subtotal">$###.##</span>\n                                    </span>\n                                </div>\n                                <div class="a-column a-span1 a-text-center a-span-last">\n                                   <a id="attach-close_sideSheet-link" class="a-link-normal close-button" href="#"></a>\n                                </div>\n                            </div>\n                            <div class="a-row a-spacing-top-mini">\n                                <form id="attach-view-cart-button-form" action="/gp/cart/view.html/ref=attachSidesheet">\n                                    <span id="attach-sidesheet-view-cart-button" class="a-button attach-button-large">\n                                        <span class="a-button-inner">\n                                            <input class="a-button-input" type="submit" aria-labelledby="attach-sidesheet-view-cart-button-announce">\n                                            <span id="attach-sidesheet-view-cart-button-announce" class="a-button-text" aria-hidden="true">\n                                                '+
b.stringTranslations["rcx-huc-cart"]+'\n                                            </span>\n                                        </span>\n                                    </span>\n                                </form>\n                                <span id="attach-sidesheet-checkout-button" class="a-button a-button-primary attach-primary-button attach-button-large">\n                                    <span class="a-button-inner"><input class="a-button-input" type="submit" aria-labelledby="attach-sidesheet-checkout-button-announce">\n                                        <span id="attach-sidesheet-checkout-button-announce" class="a-button-text" aria-hidden="true">\n                                            <span id="attach-accessory-proceed-to-checkout-text">proceed_to_checkout text here</span>\n                                        </span>\n                                    </span>\n                                </span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div id="attach-add-to-cart-message-spinner" class="a-spinner-wrapper"><span class="a-spinner a-spinner-medium"></span></div>\n            </div>\n            <div id="attach-accessories" class="a-section attach-sidesheet-card">\n                <h1 class="a-size-medium a-spacing-none a-color-base a-text-center">\n                    '+
b.stringTranslations["mobileapp-attach-accessories-title"]+'\n                </h1>\n                <hr class="a-spacing-base a-spacing-top-small a-divider-normal attach-accessory-divider">\n                <div class="a-section">\n';for(c=0;c<b.accessoryItems.length;c++)d=b.accessoryItems[c],e+='                    <div class="a-fixed-left-grid attach-accessory-display-row a-spacing-medium a-spacing-top-base">\n                        <div class="a-fixed-left-grid-inner" style="padding-left:200px">\n                            <input type="hidden" name="" value="'+
d.asin+'" id="attach-accessory-asin-'+(c+1)+'" class="attach-accessory-asin">\n                            <div class="a-text-center a-fixed-left-grid-col a-col-left" style="width:200px;margin-left:-200px;float:left;">\n                                <img id="attach-sheet-view-product-image'+c+'" src="" data-image-url="'+d.imageUrlMap.large+'" class="attach-accessory-image">\n                            </div>\n                            <div class="a-fixed-left-grid-col a-col-right" style="padding-left:3.5%;float:left;">\n                                <div class="a-row">\n                                    <a class="a-size-base a-spacing-micro a-link-normal" title="'+
k(d.displayTitle,'"',"&quot;")+'" href="'+d.detailPageUrl+"_"+(c+1)+'">\n                                        '+d.displayTitle+"\n                                    </a>\n                                </div>\n",null!==d.reviewData&&(e+='                                <div class="a-row">\n                                    <a class="a-link-normal" href="'+d.reviewsPageUrl+"_"+(c+1)+'">\n                                        <i class="a-icon a-icon-star-small a-star-small-'+d.reviewData.reviewStar.numFullStars+
(d.reviewData.reviewStar.hasHalfStar?"-5":"")+' a-spacing-mini"></i>\n                                    </a>\n                                    <a class="a-link-normal" href="'+d.reviewsPageUrl+"_"+(c+1)+'">\n                                        <span class="a-color-secondary">'+d.reviewData.numReviews+"</span>\n                                    </a>\n                                </div>\n"),e+='                                <div class="a-row">\n',e=null!==d.salePrice?e+('                                    <span id="attach-accessory-price-'+
c+'" class="a-price attach-accessory-price" data-a-size="l" data-a-color="base">\n                                        <span class="a-offscreen">'+d.salePrice.formattedPrice+'</span>\n                                        <span aria-hidden="true">\n                                            <span class="a-price-symbol">'+d.salePrice.currencySymbol+'</span><span class="a-price-whole">'+d.salePrice.wholeValue+'<span class="a-price-decimal">.</span></span><span class="a-price-fraction">'+d.salePrice.fractionalValue+
'</span>\n                                        </span>\n                                    </span>\n                                    <span class="a-price" data-a-size="b" data-a-strike="true" data-a-color="secondary">\n                                        <span class="a-offscreen">'+d.regularPrice.formattedPrice+'</span>\n                                        <span aria-hidden="true">\n                                            <span class="a-price-symbol">'+d.regularPrice.currencySymbol+
'</span><span class="a-price-whole">'+d.regularPrice.wholeValue+'<span class="a-price-decimal">.</span></span><span class="a-price-fraction">'+d.regularPrice.fractionalValue+"</span>\n                                        </span>\n                                    </span>\n"):e+('                                    <span id="attach-accessory-price-'+c+'" class="a-price attach-accessory-price" data-a-size="l" data-a-color="base">\n                                        <span class="a-offscreen">'+
d.regularPrice.formattedPrice+'</span>\n                                        <span aria-hidden="true">\n                                            <span class="a-price-symbol">'+d.regularPrice.currencySymbol+'</span><span class="a-price-whole">'+d.regularPrice.wholeValue+'<span class="a-price-decimal">.</span></span><span class="a-price-fraction">'+d.regularPrice.fractionalValue+"</span>\n                                        </span>\n                                    </span>\n"),d.primeEligible&&
(e+='                                    <i class="a-icon a-icon-prime a-icon-medium"></i>\n'),e+='                                </div>\n                                <div class="a-row a-spacing-top-small">\n                                    <div class="a-column a-span12 attach-accessory-button-row a-span-last">\n                                            <span class="a-declarative" data-action="attach-accessory-add" data-attach-accessory-add="'+k(JSON.stringify(d.addToCartParams),'"',"&quot;")+
'">\n                                                <span id="attach_add_accessory_button_'+c+'" class="a-button a-spacing-small a-button-primary attach-atc-button">\n                                                    <span class="a-button-inner"><input class="a-button-input" type="submit" aria-labelledby="attach_add_accessory_button_'+c+'-announce">\n                                                        <span id="attach_add_accessory_button_'+c+'-announce" class="a-button-text a-text-center" aria-hidden="true">\n                                                            '+
b.stringTranslations["mobileapp-attach-accessory-add-cart"]+'\n                                                        </span>\n                                                    </span>\n                                                </span>\n                                            </span>\n                                        <span id="attach_add_accessory_spinner_'+c+'" class="a-spinner a-spinner-small attach-spinner aok-hidden"></span>\n                                        <div id="attach_add_accessory_alert_'+
c+'" class="a-box a-alert-inline a-alert-inline-success aok-hidden attach_add_accessory_alert">\n                                            <div class="a-box-inner a-alert-container">\n                                                <i class="a-icon a-icon-alert"></i>\n                                                <div class="a-alert-content">\n                                                    <span class="a-size-base a-color-success">\n                                                        '+
b.stringTranslations.item_added_to_cart+'\n                                                    </span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div id="attach_add_accessory_error_'+c+'" class="a-box a-alert-inline a-alert-inline-error aok-hidden attach_add_accessory_alert" aria-live="assertive" role="alert">\n                                            <div class="a-box-inner a-alert-container">\n                                                <i class="a-icon a-icon-alert"></i>\n                                                <div class="a-alert-content">\n                                                        <span class="a-size-base">\n                                                            '+
b.stringTranslations["desktop-attach-accessory-failed-add-to-cart"]+'<br/>\n                                                        </span>\n                                                    <a data-asin="'+d.asin+'" data-idx="'+c+'" data-oid="'+d.offerListingId+'" class="a-link-normal attach-add-to-cart-retry" href="#">\n                                                        '+b.stringTranslations["desktop-attach-accessory-retry"]+"\n                                                    </a>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n";
e+="                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"}a.$("#attach-dss-placeholder").html(e)}function C(b,c){var e=a.$("#ASIN").val();a.ajax("/gp/product/ajax-handlers/reftag.html?ref_="+(b+e+"_"+c),{method:"get"})}function D(b){W()?(b=a.$("#add-to-cart-button"),b.prop("type","submit"),b.unbind("click.attachDSS")):(b.stopPropagation(),a.$("#add-to-cart-button").unbind("click.attachDSS"),a.ajax("/gp/si/util/is-si-with-triggers.html",{method:"get",params:{weblabs:JSON.stringify(["ATTACH_WARR_139901"])},
timeout:3E3,success:u,error:q}))}function u(b){if(b&&b.treatments)if(b.suppressSi)q();else if(y=b.treatments.ATTACH_WARR_139901,"T1"===y||"T2"===y){B();if(K){K=!1;try{h(),n=a.$("#attach-desktop-sideSheet"),a.$("#attach-continue-to-cart-link").attr("href","javascript:closeSideSheet()"),a.$(".attach-add-to-cart-retry").click(function(){var b=a.$(this).attr("data-asin"),c=a.$(this).attr("data-oid"),f=a.$(this).attr("data-idx");A(b,c,f)}),a.$("#attach-sidesheet-view-cart-button").click(X),a.$("#attach-sidesheet-checkout-button").click(Y),
a.declarative("attach-accessory-add","click",function(a){var b=a.data,c=b.a,b=b.oid;a=a.$currentTarget.next().attr("id").match(/\d+$/g)[0];A(c,b,a)})}catch(c){t();return}}Z();aa()}else t();else t()}function q(){B();t()}function B(){a.$(document.body).undelegate("#add-to-cart-button","click.siatc")}function t(){ba.unbind("click.attachDSS").prop("type","submit").click()}function A(b,c,e){F(e);c={marketplaceId:a.$("#attach-marketplaceId").val(),asin:a.$("#ASIN").val(),customerId:a.$("#attach-customerId").val(),
sessionId:a.$("#attach-sessionId").val(),accessoryItemAsin:b,accessoryItemOfferingId:c,languageOfPreference:a.$("#attach-languageOfPreference").val(),accessoryItemQuantity:a.$("#quantity").val()};a.$.post("/gp/product/features/aloha-ppd/udp-ajax-handler/attach-add-to-cart.html",c).done(function(a,c,f){I(a,c,f,e,b)}).fail(function(a,b,c){w(e);x(e)})}function I(b,c,e,d,f){b=null;e=e.responseText;w(d);try{b=JSON.parse(e),L(b),-1<a.$.inArray(f,b.includedAsins)?H(d):J(null,null,null,d),g.when("EWC").execute(function(a){a.refresh()}),
ca(d,f)}catch(k){console.log(k),x(d)}}function F(b){a.$("#attach_add_accessory_button_"+b).addClass("aok-hidden");a.$("#attach_add_accessory_error_"+b).addClass("aok-hidden");a.$("#attach_add_accessory_spinner_"+b).removeClass("aok-hidden")}function J(a,c,e,d){w(d);x(d)}function w(b){a.$("#attach_add_accessory_button_"+b).addClass("aok-hidden");a.$("#attach_add_accessory_error_"+b).addClass("aok-hidden")}function H(b){a.$("#attach_add_accessory_alert_"+b).removeClass("aok-hidden");a.$("#attach_add_accessory_spinner_"+
b).addClass("aok-hidden")}function x(b){a.$("#attach_add_accessory_error_"+b).removeClass("aok-hidden");a.$("#attach_add_accessory_spinner_"+b).addClass("aok-hidden");a.$("#attach_add_accessory_alert_"+b).addClass("aok-hidden")}function m(){a.$(f).attr("location","https://www.amazon.com/gp/errors/500.html")}function T(b,c,e){c={marketplaceId:a.$("#attach-marketplaceId").val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val(),asin:a.$("#ASIN").val(),languageOfPreference:a.$("#attach-languageOfPreference").val()};
a.$.post("/gp/product/features/aloha-ppd/udp-ajax-handler/attach-get-cart-description.html",c).done(V).fail(m);b=a.$(b);c=a.$(b).find("#huc-v2-order-row-confirm-text");c=a.$(c).hasClass("a-color-error")?a.$("#attachAddBaseItemErrorAlert"):a.$("#attachAddBaseItemSuccessAlert");a.$(".huc-image-wrapper").remove();e=a.$(b).find(".huc-v2-order-row-image");if(null===e||0===e.length)e=a.$(b).find(".hlb-product-image");2<e.length&&(e=e.slice(0,1));var d=a.$("#attach-sheet-view-base-product-image").parent();
a.$(d).append(a.$(e).clone());a.$(n).find(".huc-v2-order-row-image").wrap("<div class='huc-image-wrapper'></div>");a.$("#attach-sheet-view-base-product-image").hide();a.$("#attachDisplayAddBaseAlert").remove();e=a.$("#attach-added-to-cart-alert-and-image-area");c=a.$(c).clone();a.$(c).prop("id","attachDisplayAddBaseAlert");a.$(e).prepend(c);b=a.$(b).find("#huc-v2-message-group");0<b.length&&(c=a.$("<div class='attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'></div>"),c.append(b),
e=a.$("#attach-desktop-sideSheet .attach-primary-atc-confirm-box"),a.$(e).after(c),c.find(".a-declarative a").unwrap(),c=c.find(".a-declarative span"),c.removeClass("a-color-link huc-cursor-pointer"),c.unwrap(),c=b.find(".a-alert-heading").text())&&(b=l.DSS_WARNING_MESSAGE_PREFIX+l.DSS_WARNING_MESSAGE_VERSION,c={quantity:(a.$("#quantity").val()||1).toString(),baseAsin:a.$("#ASIN").val(),warningMessage:c},z(c,b));M(l.ACCESSORY_TYPE.ACCESSORY)}function U(){a.$(".attach-accessory-image").each(function(b){b=
a.$(this).attr("data-image-url");a.$(this).attr("src",b)})}function V(b,c,e){b=null;e=e.responseText;try{b=JSON.parse(e),L(b),a.$("#attach-added-to-cart-message div").removeClass("aok-hidden"),a.$("#attach-add-to-cart-message-spinner").addClass("aok-hidden"),f.setTimeout(da,200)}catch(d){console.log(d),m()}}function da(){var b=a.$("#attach-desktop-sideSheet .attach-add-to-cart-message-card");a.$(b).css({position:"absolute",top:0});a.$(b).removeClass("aok-hidden");var c=a.$(b).children().height();
0<c&&(c=-1*(c+4)+"px",a.$(b).css({"margin-top":c,position:"initial"}),a.$(b).animate({"margin-top":"14px"},800));g.when("EWC").execute(function(a){a.refresh()})}function W(){var b=!1;a.$("#abbWrapper .abbListItem input[type=checkbox]").each(function(){b=b||a.$(this).is(":checked")});return b}function v(){if(N)q();else if("T2"===y)if(r===p.displayingWarranty){if(r!==p.displayingAccessories){r=p.displayingAccessories;a.$("#attach-warranty-pane").animate({opacity:0},500);a.$("#attach-accessory-pane").show();
a.$("#attach-accessory-pane").animate({opacity:1},500);var b=a.$("#addToCart").serialize();a.$.post("/gp/product/handle-buy-box/ref=dp_start-bbf_1_glance",b).done(T).fail(m);a.$("#addToCart .attach-warranty-input").remove();b=a.$("#add-to-cart-button");a.$(b).parent().parent();var b=a.$("#attach-added-to-cart-message"),c=a.$("#attach-add-to-cart-message-spinner");a.$("#attach-added-to-cart-message div").addClass("aok-hidden");a.$(b).append(c);a.$(c).removeClass("aok-hidden")}}else r===p.displayingAccessories&&
(r=p.closed,a.animate(a.$(n),{right:O},500,"linear"),setTimeout(ea,600),a.$("body").removeClass("no-slide"),a.$("#a-popover-lgtbox").remove(),b=a.$("#add-to-cart-button"),b=a.$(b).parent().parent(),a.$(b).addClass("a-button-normal"),a.$("#attach-add-to-cart-message-spinner").addClass("aok-hidden"),a.$(".attach-atc-button").removeClass("aok-hidden"),a.$(".attach_add_accessory_alert").addClass("aok-hidden"),a.$(".attach_spinner").addClass("aok-hidden"),a.$("#add-to-cart-button").bind("click.attachDSS",
D))}function Z(){r=p.displayingWarranty;var b=a.$("#attach-warranty .attach-atc-button input").attr("data-asin");C(P.WARRANTY_IMPRESSION,b);M(l.ACCESSORY_TYPE.WARRANTY);Q||(Q=!0,a.$(document).keydown(fa),b=a.$("#attach-sheet-warranty-image").attr("data-source"),a.$("#attach-sheet-warranty-image").attr("src",b),a.$("#attachSiAddCoverage").click(function(){var b=a.$(this).find("button"),e=b.attr("data-asin"),d=b.attr("data-offering-id");if(a.$("#ASIN").val()&&e&&d){b=a.$("#addToCart");b.append('<input type="hidden" id="useABBHandler" class="attach-warranty-input" name="useABBHandler" value="1" />');
var f=b.find("input[name^='offeringID']").length+1,g=a.$("#quantity").val()||1,k="quantity."+f,h="asin."+f;b.find('input[name = "'+k+'"]').remove();b.find('input[name = "'+h+'"]').remove();b.append('<input type="hidden" id="'+k+'" name="'+k+'" value="'+g+'" class="attach-warranty-input" />');b.append('<input type="hidden" id="'+h+'" name="'+h+'" value="'+e+'" class="attach-warranty-input" />');b.append('<input type="hidden" id="offeringID.'+f+'" name="offeringID.'+f+'" value="'+d+'" class="attach-warranty-input"/>');
d=b.find('input[name="itemCount"]');0===d.length?b.append('<input type="hidden" name="itemCount" value="'+f+'">'):d[0].value=f}v();C(P.WARRANTY_ADD_TO_CART,e);b=l.ADD_WARRANTY_PREFIX+l.ADD_WARRANTY_SCHEMA_VERSION;e={feature:l.FEATURE,asin:e,price:R(),baseAsin:a.$("#ASIN").val(),baseItemPrice:a.$("#attach-baseProductBuyingPrice").val(),quantity:Number(a.$("#quantity").val())||1};z(e,b)}),a.$("#attachSiNoCoverage").click(function(){v()}))}function L(b){a.$("#attach-accessory-cart-total-string").html(b.cartSubtotalString);
a.$("#attach-accessory-cart-subtotal").html(b.formattedTotalPrice);a.$("#attach-accessory-proceed-to-checkout-text").html(b.itemQuantityString);b=b.itemQuantity;var c=a.$("#nav-cart-count"),e=Number(b),d="";0===e?d="nav-cart-0":10>e?d="nav-cart-1":20>e?d="nav-cart-10":100>e?d="nav-cart-20":(d="nav-cart-100",b="99+");c.removeClass("nav-cart-0 nav-cart-1 nav-cart-10 nav-cart-20 nav-cart-100");c.addClass(d);c.text(b)}function fa(a){r!==p.displayingAccessories&&r!==p.displayingWarranty||27!==a.which||
v()}function S(b){b=a.$("#"+b+"_feature_div").html();null!==b&&(b=b.trim());return null!==b&&0<b.length}function aa(){a.$(n).removeClass("aok-hidden");var b=a.$("<div id='a-popover-lgtbox' class='a-declarative' data-action='a-popover-floating-close' style='z-index: 1008; opacity: 0.4; display: block; cursor: pointer'></div>");a.$("body").append(b);a.$(b).click(function(){v()});a.$("#attach-desktop-sideSheet .attach-add-to-cart-message-card").remove();b=a.$("#attach-close_sideSheet-link");a.$(b).remove();
a.$("#attach-desktop-sideSheet .attach-primary-atc-confirm-box").append(b);a.$(b).click(function(){v()});U();O=a.$(n).css("right");a.animate(a.$(n),{right:"0"},500,"linear")}function X(){document.location=""}function Y(){document.location="/gp/cart/desktop/go-to-checkout.html/ref=pd_luc_mri?proceedToCheckout=Proceed&zipcode=&addressID=new&zipcode="}function ca(b,c){var e=l.ADD_ACCESSORY_PREFIX+l.ADD_ACCESSORY_SCHEMA_VERSION,d={feature:l.FEATURE,accessoryAsin:c,baseAsin:a.$("#ASIN").val(),baseItemPrice:a.$("#attach-baseProductBuyingPrice").val(),
quantity:Number(a.$("#quantity").val())||1,type:l.ACCESSORY_TYPE.ACCESSORY,displayPosition:Number(b)+1,accessoryAsinPrice:a.$("#attach-accessory-price-"+b+" > .a-offscreen").text()};z(d,e)}function M(b){var c={feature:l.FEATURE,baseAsin:a.$("#ASIN").val(),baseItemPrice:a.$("#attach-baseProductBuyingPrice").val(),quantity:Number(a.$("#quantity").val())||1};b===l.ACCESSORY_TYPE.WARRANTY?(b=l.WARRANTY_IMPRESSION_PREFIX+l.WARRANTY_IMPRESSION_SCHEMA_VERSION,c.asin=a.$("#attach-warranty-asin").val(),c.price=
R()):(b=l.ACCESSORY_IMPRESSIONS_PREFIX+l.ACCESSORY_IMPRESSIONS_SCHEMA_VERSION,c.accessories=ga());z(c,b)}function ga(){return a.$(".attach-accessory-display-row").map(function(b,c){return{asin:a.$(c).find(".attach-accessory-asin").val(),displayPosition:b+1,price:a.$(c).find(".attach-accessory-price > .a-offscreen").text()}}).toArray()}function R(){return a.$("#attach-accessory-price-warranty").text().trim()}function z(a,c){f.ue.event&&f.ue.event(a,l.PRODUCER_ID,c)}function ea(){a.$("#attach-warranty-pane").css("opacity",
1);a.$("#attach-accessory-pane").hide();a.$("#attach-accessory-pane").css("opacity",0)}var E=a.$("#attach-dss-placeholder"),n=a.$("#attach-desktop-sideSheet"),p=Object.freeze({closed:1,displayingWarranty:2,displayingAccessories:3}),r=p.closed,Q=!1,N,y,K=!0;if(null!==E&&"undefined"!==typeof E&&0!==E.length||null!==n&&"undefined"!==typeof n&&0!==n.length){var P={WARRANTY_IMPRESSION:"dp_atch_dss_w_i_",WARRANTY_ADD_TO_CART:"dp_atch_dss_w_y_"},l={FEATURE:"dss",PRODUCER_ID:"atch",ACCESSORY_IMPRESSIONS_PREFIX:"attach.AccessoryImpressions.",
ACCESSORY_IMPRESSIONS_SCHEMA_VERSION:"3",ADD_ACCESSORY_PREFIX:"attach.AddAccessoryToCart.",ADD_ACCESSORY_SCHEMA_VERSION:"8",ADD_WARRANTY_PREFIX:"attach.AddWarrantyToCart.",ADD_WARRANTY_SCHEMA_VERSION:"2",WARRANTY_IMPRESSION_PREFIX:"attach.WarrantyImpression.",WARRANTY_IMPRESSION_SCHEMA_VERSION:"3",DSS_WARNING_MESSAGE_PREFIX:"attach.DssWarningMessages.",DSS_WARNING_MESSAGE_VERSION:"1",ACCESSORY_TYPE:{ACCESSORY:"accessory",WARRANTY:"warranty"}},O;if(S("scheduledDelivery")||S("simpleBundle"))N=!0;var ba=
a.$("#add-to-cart-button");a.$("#add-to-cart-button").prop("type","button");a.$("#add-to-cart-button").bind("click.attachDSS",D)}})});
/* ******** */
(function(c){var e=window.AmazonUIPageJS||window.P,g=e._namespace||e.attributeErrors,a=g?g("DetailPageExpertContentAssets",""):e;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,e,g){c.when("A","Airy","ready").execute(function(a,m){function n(b){var c=b.parentId,d=b.modal;b=d.width;var d=d.height,f=.8*a.$(e).width(),m=.7*a.$(e).height(),f=Math.min(1.5,Math.min(f/b,m/d));a.$("#"+c).width(f*b).height(f*d)}function k(b){var e=b.parentId,d=b.metrics,f=b.resources,
g=b.initialVolume,n=d.videoId,k=d.client,l=d.marketplaceId,t=d.requestId,d=d.session,v=f.mediaUrl,w=f.postMediaSlateUrl,f=f.preMediaSlateUrl,p=b.modal.modalId;b=q.airySwfUrl;var r=m.isMobilePlatform(),h=void 0,u={parentId:e,contentId:n,mediaSourceInfo:v,swfUrl:b,slateImages:{preloadSlate:f,postMediaSlate:w},foresterMetadataParams:{client:k,method:r?"MobileDetailPage":"DetailPage",marketplaceId:l,requestId:t,session:d},bindings:{canplay:function(){h.setVolume(g)},play:function(){r&&h.enterFullScreen()}}};
r?h=m.embed(u):(a.on("a:popover:beforeShow:"+p,function(){c.when("a-modal").execute(function(a){(a=a.get(p))&&a.refresh();h?h.replay():(h=m.embed(u),h.play())})}),a.on("a:popover:afterHide:"+p,function(){h&&h.pause()}))}function g(){var b=q.airyCssUrl;0<l.length&&(b=a.$("\x3clink\x3e").attr("rel","stylesheet").attr("href",b),a.$("head").append(b))}var q=a.state("airyAssets"),l=a.state("dpreviewVideosMetadata");q&&l&&(g(),a.each(l,function(a){n(a);k(a)}),a.$(e).resize(a.debounce(function(){a.each(l,
n)},50)))});"use strict";c.when("A","ready").execute(function(a){a.$("a[data-ec-metrics]").each(function(c,g){var k=a.$(g),t=k.attr("data-ec-metrics");k.click(function(){e.ue.count(t,1)})})});"use strict";c.when("A","ready").execute(function(a){var c=a.$(".dpr-review-date").text();c&&""!==c.trim()||(a=a.$(".dpr-badge \x3e .dpr-award"),a.length&&a.css({marginTop:-a.height()/2}))})});
/* ******** */
(function(m){var p=window.AmazonUIPageJS||window.P,n=p._namespace||p.attributeErrors,a=n?n("SmartShelfAssets"):p;a.guardFatal?a.guardFatal(m)(a,window):a.execute(function(){m(a,window)})})(function(m,p,n){m.when("A","atf").register("smart-shelf-desktop",function(a){function m(b,c){var d={clientName:"SmartShelf",ASIN:b.find("input[name='ASIN']").val(),verificationSessionID:b.find("input[name='session-id']").val(),offerListingID:b.find("input[name='"+c+"']").val(),quantity:b.find("input[name='quantity'], select[name='quantity']").val(),
registryID:b.find("input[name='sourceCustomerOrgListID']").val(),registryItemID:b.find("input[name='sourceCustomerOrgListItemID']").val()};b.is(".ccxss_desktop_atc_form")||(d.snsOptIn=a.$("input[name='snsOptIn']").val(),d.rcxOrdFreq=a.$("input[name='rcxOrdFreq']").val(),d.snsOfferListingID=a.$("input[name='snsOfferListingID']").val(),d.snsMerchantID=a.$("input[name='snsMerchantID']").val(),d.momAsin=a.$("input[name='momAsin']").val(),d.snsAddressId=a.$("input[name='snsAddressId']").val(),d.snsMostCommonFrequency=
a.$("input[name='snsMostCommonFrequency']").val(),d.snsOnmlOfferId=a.$("input[name='snsOnmlOfferId']").val());if(d.quantity===n||"samplingOfferListingID"===c)d.quantity=1;var e=b.find(".abbListItem");e.length&&e.each(function(c){var b=a.$(this),e=b.find("input[id^='mbb-offer']"),g=b.find("input[name^='asin']"),b=b.find("input[name^='quantity']");e[0].checked&&(a.$("#csxswWarrantyInclude").addClass("aok-hidden"),d["ASIN.warranty"+c]=g[0].value,d["offerListingID.warranty"+c]=e[0].value,d["quantity.warranty"+
c]=b[0].value)});if(b.find(".atcFormServiceAsinData").length){var e=b.find(".atcFormServiceAsinData[name^='asin']"),g=b.find(".atcFormServiceAsinData[name^='offeringID']"),f=b.find(".atcFormServiceAsinData[name^='quantity']");e.length&&g.length&&f.length&&(d[e[0].id]=e[0].value,d[g[0].id]=g[0].value,d[f[0].id]=f[0].value)}b.find("#freeSampleOfferListingID")&&b.find("#freeSampleOfferListingID").val()&&""!==b.find("#freeSampleOfferListingID").val()&&(d["ASIN.sample"]=a.$("input#csxfsSelectedAsin").val(),
d["offeringListingID.sample"]=b.find("#freeSampleOfferListingID").val(),d["quantity.sample"]=1);return d}var l,q,r,x,v,w={},t={},f=p.ue,y=a.$(".ccxss_desktop_atc_form").length,D=function(b,c){a.$(b).addClass("aok-hidden");a.$(c).removeClass("aok-hidden")},E=function(a){var c="";a.length&&null!==a.prop("action")&&(c=a.prop("action"));var d="",e=c.search("ref=");a.length&&-1!==e&&(d=c.substr(e,c.length));return d},h=function(b){var c=a.$(this),d=E(c),e={sessionID:c.find("input[name='session-id']").val(),
clientName:"SmartShelf"},g=function(){c.unbind("submit",h);c.submit()},k=function(d,k){(function(e){return a.on("SUCCESS_CALL_BACK"+c.attr("id"),function(k){d&&d.isOK?(p.$Nav.when("api.setCartCount").run(function(a){a(k)}),"main"!==b.data.buttonType||r?(k<=e||f&&f.count&&f.count("smartShelfAccessoriesAdded",1),D(c.find(".ccxss_atc_spinner"),c.find(".ccxss_success_message"))):(a.$(".smartShelfFailure").addClass("aok-hidden"),a.$(".smartShelfSuccess").removeClass("aok-hidden"),v||(0===y&&(y=a.$(".ccxss_desktop_atc_form").length),
f&&f.count&&f.count("smartShelfAccessoriesSeen",y),f&&f.count&&f.count("smartShelfShowSecondaryPanel",1),v=!0),x.animateIn(w[b.data.buttonId]),r=!0)):g();a.off("SUCCESS_CALL_BACK"+c.attr("id"))})})(k);l("SUCCESS_CALL_BACK"+c.attr("id"),e)},l=function(c,b){a.post("/gp/api/cart/1.0/get-cart-count.json",{params:b,success:function(b){var d;b&&b.isOK&&b.total&&b.total.numActiveItem!==n&&(d=b.total.numActiveItem);a.trigger(c,d)},error:g})};"ss"===b.data.buttonType&&(a.$(c.find(".csxsw_item_atc")).addClass("aok-hidden"),
a.$(c.find(".ccxss_atc_spinner")).removeClass("aok-hidden"));a.on("ATC_CALL_BACK"+c.attr("id"),function(e){a.post("/gp/add-to-cart/json/"+d,{params:m(c,t[b.data.buttonId]),success:function(a){k(a,e)},error:g});a.off("ATC_CALL_BACK"+c.attr("id"))});l("ATC_CALL_BACK"+c.attr("id"),e);b.preventDefault()},z=function(b){a.$(b.data.button).closest("form").bind("submit",{buttonType:"main",buttonId:b.data.button},h);a.$(".ccxss_desktop_atc_form").bind("submit",{buttonType:"ss",buttonId:"smartShelfButton"},
h)},u=function(b){a.$(b).closest("form").unbind("submit",h);a.$(".ccxss_desktop_atc_form").length&&a.$(".ccxss_desktop_atc_form").unbind("submit",h)},B=function(){var b=a.$("#smartShelfSamplingBuyBoxReplace");if(0!==b.length){var c=a.$("#toggleBuyBox #sampling");c.children().addClass("aok-hidden");c.append(b);b.removeClass("aok-hidden")}},C=function(b,c,d){var e=0,g=function(){a.$("#add-to-cart-button").unbind("click",h);a.$("#add-to-cart-button").bind("click",{button:"#add-to-cart-button"},z);a.$("#add-to-cart-button").click()},
f=function(){e++;3>e?h(event):g()},h=function(e){var h=!1,l=!1;e.preventDefault();h||a.$.ajax({timeout:5E3,url:"/gp/smartshelf/utility/trigger/?weblab="+b,success:function(a,b,e){if(a&&a!==n&&""!==a.trim())try{var m=JSON.parse(a.trim());h="T1"===m.treatment||"C"===m.treatment;l="T1"===m.treatment}catch(p){f()}h?(l?d():c(),g()):f()},error:function(a,b,c){f()}})};return h};return{init:function(b,c,d){x=b;l=a.state("smartShelfVASInfo");a.state("accessoryInfo");v=r=!1;w[d]=c;t[d]="offerListingID";t.smartShelfButton=
"offerListingID";a.$("#"+c+"_secondaryPanelBackButton").click(function(){r=!1;B();u(d)});q=a.$("#"+c+"_actionPanelSecondaryPanelDivider");q.addClass("smartShelfDivider");q.removeClass("actionPanelSecondaryPanelDivider");b=a.$(".ccxsmartShelf .fbt");c=a.$(".ccxsmartShelf .csd");var e=a.$(".ccxsmartShelf .plsims");c.hide();e.hide();l!==n&&l.hideSmartShelf||(u(d),c.length&&b.length&&(b.hide(),c.show()),e.length?a.$(d).bind("click",C("CCX_SMARTSHELF_PL_SIMS_153223",function(){},function(){a.$(".ccxsmartShelf").children().not(".plsims").each(function(b,
c){a.$(this).children(".ccxssItemWrapper").slice(2).addClass("aok-hidden")});e.children(".ccxssItemWrapper").slice(1).addClass("aok-hidden");e.show()})):a.$(d).bind("click",{button:d},z))},initV2:function(b,c,d,e){x=b;l=a.state("smartShelfVASInfo");a.state("accessoryInfo");v=r=!1;w[d]=c;t[d]=e;t.smartShelfButton="offerListingID";a.$("#"+c+"_secondaryPanelBackButton").click(function(){r=!1;B();u(d)});q=a.$("#"+c+"_actionPanelSecondaryPanelDivider");q.addClass("smartShelfDivider");q.removeClass("actionPanelSecondaryPanelDivider");
b=a.$(".ccxsmartShelf .fbt");c=a.$(".ccxsmartShelf .csd");var f=a.$(".ccxsmartShelf .plsims");c.hide();f.hide();l!==n&&l.hideSmartShelf||(u(d),c.length&&b.length&&(b.hide(),c.show()),f.length?a.$(d).bind("click",C("CCX_SMARTSHELF_PL_SIMS_153223",function(){},function(){a.$(".ccxsmartShelf").children().not(".plsims").each(function(b,c){a.$(this).children(".ccxssItemWrapper").slice(2).addClass("aok-hidden")});f.children(".ccxssItemWrapper").slice(1).addClass("aok-hidden");f.show()})):a.$(d).bind("click",
{button:d},z))},undelegateFormHandlers:u,undelegateAllHandlers:function(){Object.keys(w).forEach(function(b){a.$(b).closest("form").unbind("submit",h)});a.$(".ccxss_desktop_atc_form").length&&a.$(".ccxss_desktop_atc_form").unbind("submit",h)}}})});
/* ******** */
(function(d){var c=window.AmazonUIPageJS||window.P,e=c._namespace||c.attributeErrors,a=e?e("DetailPageFeaturesAssets"):c;a.guardFatal?a.guardFatal(d)(a,window):a.execute(function(){d(a,window)})})(function(d,c,e){c.P&&(d.when("A","jQuery","ready").execute(function(a,b){c.registeredDPApplicablePromotionListComponent||d.register("DPApplicablePromotionListComponent",function(){return{recordImpressions:function(){b.ajax({url:"/gp/collect-coupon/handler/applicable_promotion_list_hover_count.html?ref_=apl_desktop_imp_asset",
type:"POST",data:{pageReImpType:"aplImpressionPC"},dataType:"json"})},adjustPromotionMessageWidth:function(){var a=b(".apl_popover_hover").width()+b(".apl_label").width()+10;if(a){var c=b(".apl_popover_hover").parent().parent().width();if(c&&!(c<=a)){var d=b(".apl_popover_hover .apl_message").width();d&&(a=c-a+d,c=parseInt(b(".apl_popover_hover .apl_message").css("max-width"),10),!isNaN(c)&&c!==a&&60<=a&&b(".apl_popover_hover .apl_message").css("max-width",a+"px"))}}}}});c.registeredDPApplicablePromotionListComponent=
!0}),d.when("A","ready").execute(function(a){var b=a.$("#applicable_promotion_list_sec"),c=a.$("#mediaTabsGroup #mediaAccordion");c&&c.length&&b&&b.length&&((c=a.$("#mediaTabsGroup #newOfferAccordionRow"))&&c.length||b.addClass("a-hidden"),a.on("a:accordion:media-accordion:select",function(a){"media-newOffer-accordion"===a.selectedRow.rowName?b.removeClass("a-hidden"):b.addClass("a-hidden")}))}))});
/* ******** */
(function(n){var h=window.AmazonUIPageJS||window.P,r=h._namespace||h.attributeErrors,c=r?r("DetailPageSnSAssets",""):h;c.guardFatal?c.guardFatal(n)(c,window):c.execute(function(){n(c,window)})})(function(n,h,r){n.register("sns-buybox-constants",function(){return{SNS_QUANTITY_FIELD:"#mobileQuantityDropDown, #tabletQuantityDropDown",SNS_FREQUENCY_NAME:"rcxOrdFreq",SNS_OPT_IN_NAME:"snsOptIn",QUANTITY_CONTAINER:"#selectQuantity, #mobileQuantitySelection",QUANTITY:"[name\x3dquantity]",SNS_FREQUENCY_FORM_FIELD:"[name\x3drcxOrdFreq]",
SNS_DP_FREQUENCY_TRIGGER:"#sns-dp-frequency-trigger span",SNS_OPT_IN_CHECKBOX:"#snsOptInCheckbox",SNS_FREQUENCY_SECTION:"#snsFrequencySection",SNS_SELECTED_FREQUENCY_LABEL:"#snsSelectedFrequencyLabel",SNS_FIRST_RECURRING_DELIVERY_DATE:"[id\x3dsnsFirstRecurringDeliveryDate]",SNS_BUY_NEW_BUTTON:"#buyNewSection, #newAccordionRow .a-accordion-row-a11y",SNS_BUY_USED_BUTTON:"#usedBuySection, #usedAccordionRow .a-accordion-row-a11y",ONE_CLICK_BUTTON:".onml-one-click-button",ONE_CLICK_BUTTON_ICON:".onml-one-click-button i",
ONE_CLICK_BUTTON_TEXT:".onml-one-click-button input+span",BUY_NOW_BUTTON:".onml-buy-now-button",BUY_NOW_BUTTON_ICON:".onml-buy-now-button i",BUY_NOW_BUTTON_TEXT:".onml-buy-now-button input+span",ADD_TO_CART_BUTTON:"#add-to-cart-button",SNS_OPT_IN_FORM_FIELD:"[name\x3dsnsOptIn]",SNS_OFFER_FORM_FIELD:".snsONMLOffer",SNS_DISCOUNT_PILL:"#snsDiscountPill",SNS_ONML_BUYBOX_UPSELL_MESSAGE_NON_TIERED:"#sns-onml-buybox-upsell-message-non-tiered",SNS_ONML_BUYBOX_UPSELL_MESSAGE_TIERED:"#sns-onml-buybox-upsell-message-tiered",
SNS_ONML_FRDD:".sns-onml-frdd",SNS_FREQ_BOTTOMSHEET_SELECTOR:"[id\x3dsnsFrequencyBottomSheet]",SNS_OPT_IN_FEATURE_DIV:"#snsOptIn_div",SNS_ONML_INIT_INPUT_ID:"isOnmlInitialized",SNS_ONML_INIT_INPUT_SELECTOR:"#isOnmlInitialized",SNS_DATA_UPDATE_EVENT:"sns-declarative-data-update",SNS_ONML_MERCHANT_INFO:"#snsOnmlMerchantInfo",SNS_DISCOUNT_PILL_POPOVER_TIERED:".snsDiscountPillPopoverTiered",SNS_DISCOUNT_PILL_POPOVER_NON_TIERED:".snsDiscountPillPopoverNonTiered",SNS_BUY_NEW_PRICE:"#onml_snsBuyNew",CBB_BUY_NEW_PRICE:"#buyNew_cbb",
NON_CBB_BUY_NEW_PRICE:"#buyNew_noncbb",SNS_PRICE_IN_BUY_USED_SECTION:"#usedBuySection #onml_snsBuyNew",CBB_SNS_BUY_NEW_PRICE:"#onml_snsBuyNew_cbb",DPV2_BUY_NEW_PRICE:"#buyNew_dpv2",SUBSCRIBE_ONLY_LINK:"#subscribe-only",SUBSCRIBE_ONLY_FORM:"#sns-onml-subscribe-only",JUST_SUBSCRIBE_DIV:"#just-subscribe-button-container",GOLDBOX_DISCOUNT_MESSAGE:"#onml-goldbox-discount-message",SUBSCRIBE_ONLY_FORM_ATTRIBUTES:{name:"sns-onml-subscribe-only",id:"sns-onml-subscribe-only",method:"POST",action:"/gp/product/handle-buy-box/ref\x3donml_so_l"},
SNS_ATC_DECLARATIVE:"#addToCart_feature_div #atc-declarative",MOBB_ALTERNATE_OFFERS:"#SecondNewAccordionRow .a-accordion-row-a11y, #ThirdNewAccordionRow .a-accordion-row-a11y"}});n.when("A","sns-utils","sns-constants","sns-buybox-constants","sns-messaging-utils","sns-atc-utils").register("sns-frequency-bottom-sheet",function(c,g,e,f,d,k){return{init:function(){function b(){var c=a(f.SNS_FREQUENCY_FORM_FIELD).val();a(f.SNS_FREQ_BOTTOMSHEET_SELECTOR).find("button[value\x3d"+c+"]").click()}var a=c.$;
g.isMobileDevice()&&(g.registerCallbackForNameSpace(e.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE,b),g.registerCallbackForNameSpace(e.EVENT_NAMESPACE.PAGE_UPDATE,b),c.declarative("sns-frequency-selected","click",function(b){var p=a(f.SNS_FREQUENCY_FORM_FIELD);b=b.$target;var m=b.val(),l={};l[f.SNS_FREQUENCY_NAME]=m;k.setOnmlDeclaratives(l);p.val(m);h.setTimeout(function(){c.trigger(f.SNS_DATA_UPDATE_EVENT)},0);a(f.SNS_FIRST_RECURRING_DELIVERY_DATE).html(b.data("frdd-label"));a(f.SNS_SELECTED_FREQUENCY_LABEL).html(b.data("freq-button-label"));
d.updateMessages(m);g.setOnmlUserPref(e.USER_PREFS_KEYS.SNS_FREQUENCY,m)}))}}});n.when("A","sns-constants","sns-utils","sns-buybox-constants","sns-messaging-utils","sns-atc-utils").register("sns-frequency-popover",function(c,g,e,f,d,k){return{init:function(){function b(){var c=a(f.SNS_FREQUENCY_FORM_FIELD).val();a("[data-a-accordion-row-name\x3dfrequencyAccordionRow"+(c-1)+"] a").click()}var a=c.$;e.isMobileDevice()||(e.registerCallbackForNameSpace(g.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE,
b),c.on("a:accordion:sns-dp-frequency-accordion:select",function(b){var p=a(f.SNS_FREQUENCY_FORM_FIELD),m=a(f.SNS_DP_FREQUENCY_TRIGGER),l=a(b.selectedRow.$row[0]);b=l.data().frequencyLabel;var l=l.data().frequencyValue,w={};w[f.SNS_FREQUENCY_NAME]=l;k.setOnmlDeclaratives(w);p.val(l);h.setTimeout(function(){c.trigger(f.SNS_DATA_UPDATE_EVENT)},0);m.text(b);d.updateMessages(l);e.setOnmlUserPref(g.USER_PREFS_KEYS.SNS_FREQUENCY,l)}))}}});n.when("A","sns-utils","sns-constants","sns-buybox-utils","sns-buybox-constants",
"sns-atc-utils","sns-atc-login").register("sns-opt-in-checkbox",function(c,g,e,f,d,k,b){return{init:function(){function a(p){var a=c.$(d.SNS_OPT_IN_CHECKBOX).is(":checked"),q=c.$(d.SNS_OPT_IN_FORM_FIELD);if(a&&(g.isMobileApp()||g.isTabletApp())){var w=k.getAddToCartStrings();b.signInIfNotSignedIn(w,p&&p.snsOnLoad)}p={};p[d.SNS_OPT_IN_NAME]=a;k.setOnmlDeclaratives(p);q.val(a);h.setTimeout(function(){c.trigger(d.SNS_DATA_UPDATE_EVENT)},0);h.setTimeout(function(){f.updateAddToCartButtonLabel(a);f.updateOneClickButtonLabel(a);
f.updateBuyNowButtonLabel(a)},0);f.showSnSMerchantInfoIfSnSOptInChecked(a);f.showGoldBoxDiscountMessageIfSnSOptInChecked(a);f.showSubscribeOnlyButtonIfSnSOptInChecked(a);g.setOnmlUserPref(e.USER_PREFS_KEYS.SNS_OPT_IN,a)}function q(){var a=function(){var a=c.$("#buybox").find(".a-declarative").has("#add-to-cart-button");if(1===a.length)return a;a=c.$("#atc-declarative");return 1===a.length?a:null}();a&&a.click(function(){var b=k.getAddToCartData();if(void 0!==b.inputs[d.SNS_OPT_IN_NAME]){var e=g.getAStateFromDom(d.SNS_OPT_IN_FEATURE_DIV,
"sns-add-to-cart-params","addToCartParams"),f=c.$(d.SNS_OPT_IN_CHECKBOX).is(":checked"),q={},q=e||{};q[d.SNS_OPT_IN_NAME]=f;var h=a.data("awMash");Object.keys(q).forEach(function(a){h.inputs[a]!==b.inputs[a]&&(h.inputs[a]=b.inputs[a])})}})}(g.isMobileApp()||g.isTabletApp())&&b.setValuesFromUrlParamsIfPresent();g.isSnSEligible()&&a({snsOnLoad:!0});c.declarative("sns-opt-in-checked","change",a);g.registerCallbackForNameSpace(e.EVENT_NAMESPACE.PAGE_UPDATE,a);g.registerCallbackForNameSpace(e.EVENT_NAMESPACE.PAGE_UPDATE,
g.enableSnSOptIn);g.isMobileApp()&&(g.registerCallbackForNameSpace(e.EVENT_NAMESPACE.PAGE_UPDATE,q),q());g.enableSnSOptIn()}}});n.when("A","sns-constants","sns-buybox-constants","sns-utils").register("sns-messaging-utils",function(c,g,e,f){var d=function(d,b){var a=d.firstRecurringDeliveryDates[b-1];c.$(e.SNS_ONML_FRDD).each(function(){c.$(this).html(a)})};return{updateMessages:function(k){var b=f.getAStateFromDom(e.SNS_OPT_IN_FEATURE_DIV,"sns-buybox-message-params","buyboxMessageParamsMap");if(b){var a=
c.$(e.SNS_ONML_BUYBOX_UPSELL_MESSAGE_NON_TIERED),q=c.$(e.SNS_ONML_BUYBOX_UPSELL_MESSAGE_TIERED),p=c.$(e.SNS_DISCOUNT_PILL_POPOVER_TIERED),m=c.$(e.SNS_DISCOUNT_PILL_POPOVER_NON_TIERED);b.tieredStatusOnRecurringDeliveryDates[k-1]===g.TIERED?(a.addClass("aok-hidden"),q.removeClass("aok-hidden"),m.addClass("aok-hidden"),p.removeClass("aok-hidden")):(a.removeClass("aok-hidden"),q.addClass("aok-hidden"),m.removeClass("aok-hidden"),p.addClass("aok-hidden"));a=b.discountType;q=c.$(e.SNS_DISCOUNT_PILL);b.tieredStatusOnRecurringDeliveryDates[k-
1]===g.TIERED?(q.attr("data-tiered-level",g.PREMIUM),a===g.ZERO_BASE&&q.removeClass("aok-hidden")):(q.attr("data-tiered-level",g.BASE),a===g.ZERO_BASE&&q.addClass("aok-hidden"));d(b,k)}}}});n.register("sns-priceblock-constants",function(){return{PRICEBLOCK_SNSPRICE_ROW:"#priceblock_snsprice_row",SNS_UPSELL:"#priceblock_snsupsell_row",SNS_SAVINGS:"#snsprice_savings",DP_OUR_PRICE:"#priceblock_ourprice",DP_OUR_PRICE_LABEL:"#priceblock_ourprice_lbl",DP_OUR_PRICE_SAVINGS:"#regularprice_savings",DP_OUR_PRICE_BADGING:"#ourprice_fbabadge",
DP_OUR_PRICE_SHIPPING:"#ourprice_shippingmessage",DP_OUR_PRICE_PPU:"#priceblock_ourprice_row #priceblock_ourprice+.a-size-small",DP_SALE_PRICE:"#priceblock_saleprice",DP_SALE_PRICE_LABEL:"#priceblock_saleprice_lbl",DP_SALE_PRICE_SHIPPING:"#saleprice_shippingmessage",DP_SALE_PRICE_PPU:"#priceblock_saleprice_row #priceblock_saleprice+.a-size-small",DP_DEAL_PRICE:"#priceblock_dealprice",DP_DEAL_PRICE_SAVINGS:"#dealprice_savings",DP_DEAL_PRICE_SHIPPING:"#dealprice_shippingmessage",DP_DEAL_PRICE_PPU:"#priceblock_dealprice_row #priceblock_dealprice+.a-size-small",
SNS_PITCH_PRICE_UPSELL_TEXT:"#onmlPriceBlockUpsellText",SNS_ATF_REDESIGN_UPSELL_UNCHECKED:"#onml-atf-redesign-upsell-unchecked",SNS_ATF_REDESIGN_UPSELL_CHECKED:"#onml-atf-redesign-upsell-checked",ONML_ATF_REDESIGN_UPSELL:"#onml-atf-redesign-upsell",SNS_PITCH_PRICE_FEATURE:"#snsPitchPrice_feature_div",NEW_PITCH_PRICE_FEATURE:"#newPitchPriceWrapper_feature_div",MOBILE_OUR_PRICE_SHIPPING:"#ourPrice_availability",SHIPPING_DETAILS:'[data-a-sheet*\x3d"shippingDetailsDisplayContent"]'}});n.when("A","sns-utils",
"sns-constants","sns-price-utils","sns-buybox-constants","sns-priceblock-constants").register("sns-price-refresh",function(c,g,e,f,d,k){return{init:function(){c.declarative("sns-opt-in-checked","change",function(){f.showSnSPriceIfSnSOptInChecked()});g.registerCallbackForNameSpace(e.EVENT_NAMESPACE.PAGE_UPDATE,f.showSnSPriceIfSnSOptInChecked);f.showSnSPriceIfSnSOptInChecked();c.$(d.SNS_BUY_NEW_BUTTON).click(function(){var a=d.SNS_OPT_IN_CHECKBOX,b=g.getOnmlUserPref(e.USER_PREFS_KEYS.SNS_OPT_IN),p=
k.SNS_UPSELL,f=k.SNS_PITCH_PRICE_UPSELL_TEXT,l=k.ONML_ATF_REDESIGN_UPSELL;c.$(a).is(":checked")!==b&&(c.$(a).click(),g.setOnmlUserPref(e.USER_PREFS_KEYS.SNS_OPT_IN,b));c.$(l).removeClass("aok-hidden");!1===c.$(a).is(":checked")&&(c.$(p).removeClass("aok-hidden"),c.$(f).removeClass("aok-hidden"))});c.$(d.SNS_BUY_USED_BUTTON).click(function(){b()});c.$(d.MOBB_ALTERNATE_OFFERS).click(function(){b()});var b=function(){var a=d.SNS_OPT_IN_CHECKBOX,b=g.getOnmlUserPref(e.USER_PREFS_KEYS.SNS_OPT_IN),p=k.SNS_UPSELL,
f=k.SNS_PITCH_PRICE_UPSELL_TEXT,l=k.ONML_ATF_REDESIGN_UPSELL;!0===b&&(c.$(a).click(),g.setOnmlUserPref(e.USER_PREFS_KEYS.SNS_OPT_IN,!0));c.$(l).addClass("aok-hidden");c.$(p).addClass("aok-hidden");c.$(f).addClass("aok-hidden")}}}});n.when("A","sns-utils","sns-priceblock-constants","sns-buybox-constants").register("sns-price-utils",function(c,g,e,f){var d=c.$,k=e.SNS_PITCH_PRICE_UPSELL_TEXT,b=e.SNS_PITCH_PRICE_FEATURE,a=e.NEW_PITCH_PRICE_FEATURE,q=e.PRICEBLOCK_SNSPRICE_ROW,p=f.SNS_OPT_IN_CHECKBOX,
m=e.SNS_UPSELL,l=e.SNS_SAVINGS,h=e.DP_OUR_PRICE,n=e.DP_OUR_PRICE_LABEL,x=e.DP_OUR_PRICE_SAVINGS,y=e.DP_OUR_PRICE_BADGING,z=e.DP_OUR_PRICE_SHIPPING,A=e.DP_SALE_PRICE,B=e.DP_SALE_PRICE_LABEL,t=e.DP_SALE_PRICE_SHIPPING,C=e.DP_DEAL_PRICE,u=e.DP_DEAL_PRICE_SAVINGS,v=e.DP_DEAL_PRICE_SHIPPING,r=e.MOBILE_OUR_PRICE_SHIPPING,D=e.SHIPPING_DETAILS,E=f.SNS_BUY_NEW_PRICE,F=f.NON_CBB_BUY_NEW_PRICE,G=f.CBB_BUY_NEW_PRICE,H=f.SNS_PRICE_IN_BUY_USED_SECTION,I=f.CBB_SNS_BUY_NEW_PRICE,J=f.DPV2_BUY_NEW_PRICE,K=e.SNS_ATF_REDESIGN_UPSELL_CHECKED,
L=e.SNS_ATF_REDESIGN_UPSELL_UNCHECKED;return{showSnSPriceIfSnSOptInChecked:function(){g.isSnSEligible()&&(d(p).is(":checked")?g.shouldShowPrice()&&(d(q).length?(d(q).removeClass("aok-hidden"),d(l).removeClass("a-hidden"),d(m).addClass("aok-hidden"),d(x).addClass("a-hidden"),d(y).addClass("a-hidden"),d(z).addClass("a-hidden"),d(r).addClass("a-hidden"),d(h).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price"),d(n).addClass("onml-price-inactive"),
d(A).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price "),d(B).addClass("onml-price-inactive"),d(t).addClass("a-hidden"),d(C).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price"),d(u).addClass("a-hidden"),d(v).addClass("a-hidden"),d(q).css({display:"table-row",visibility:"visible"}),d(q).prev().has(D).addClass("aok-hidden"),d(F).addClass("aok-hidden"),d(E).removeClass("aok-hidden"),
d(G).addClass("aok-hidden"),d(H).addClass("aok-hidden"),d(I).removeClass("aok-hidden"),d(J).addClass("aok-hidden")):(d(k).addClass("aok-hidden"),d(a).addClass("aok-hidden"),d(b).removeClass("aok-hidden"),d(b).css({display:"block",visibility:"visible"}),d(K).removeClass("aok-hidden"),d(L).addClass("aok-hidden"))):d(q).length?(d(q).addClass("aok-hidden"),d(l).addClass("a-hidden"),d(m).removeClass("aok-hidden"),d(x).removeClass("a-hidden"),d(y).removeClass("a-hidden"),d(z).removeClass("a-hidden"),d(r).removeClass("a-hidden"),
d(h).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),d(n).removeClass("onml-price-inactive"),d(A).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),d(B).removeClass("onml-price-inactive"),d(t).removeClass("a-hidden"),d(C).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),d(u).removeClass("a-hidden"),
d(v).removeClass("a-hidden"),d(q).prev().has(D).removeClass("aok-hidden"),d(F).removeClass("aok-hidden"),d(E).addClass("aok-hidden"),d(G).removeClass("aok-hidden"),d(H).addClass("aok-hidden"),d(I).addClass("aok-hidden"),d(J).removeClass("aok-hidden")):(d(k).removeClass("aok-hidden"),d(a).removeClass("aok-hidden"),d(b).addClass("aok-hidden"),d(k).css({display:"block",visibility:"visible"}),d(L).removeClass("aok-hidden"),d(K).addClass("aok-hidden")))}}});n.when("A","sns-constants","sns-buybox-constants",
"sns-states-loaded-in-dom").register("sns-utils",function(c,g,e){var f=c.$,d={},k={},b=function(a,b,c){var d,e=function(a){if(!a||"object"===typeof a)return a;var c=f.parseJSON;h.JSON&&h.JSON.parse&&(c=JSON.parse);try{return"string"===typeof a?c(a):null}catch(d){return h.ueLogError&&h.ueLogError(d,{logLevel:"ERROR",attribution:"sns",message:"An error occurred when getting onml parameters from page-state. a-state: "+b}),null}};a=f(a||"html");return 1<=a.length&&(a=a.find("script[data-a-state*\x3d'"+
b+"']"))&&1<=a.length?(d=e(a.first().text()),e("object"===typeof d?d[c]:null)):d},a=function(a){var c=b(e.SNS_OPT_IN_FEATURE_DIV,"sns-onml-params","onmlParams");return a?c&&c[a]:c},q=function(){var b=a("deviceType"),c=k[g.USER_PREFS_KEYS.ONML_PARAMS],c=c&&c.deviceType;return b||c};return{isSnSEligible:function(){return a("snsEligible")},getAStateFromDom:b,getOnmlParam:a,shouldShowPrice:function(){return a("showPrice")},getDeviceType:q,registerCallbackForNameSpace:function(a,b){d[a]||(d[a]=[]);-1===
d[a].indexOf(b)&&d[a].push(b)},executeCallbacksForNameSpace:function(a){if((a=d[a])&&a.constructor===Array)for(var b=0;b<a.length;b++)a[b]()},setOnmlUserPref:function(a,b){k[a]=b},getOnmlUserPref:function(a){return k[a]},deleteOnmlUserPref:function(a){delete k[a]},isMobileDevice:function(){var a=q();return"mobile"===a||"mobileApp"===a},isMobileApp:function(){return"mobileApp"===q()},isTabletApp:function(){var a=q();return"iPad"===a||"tabletApp"===a||"tabletLargeApp"===a},isVerucaBuyNowEnabled:function(){return a("verucaBuyNowEnabled")},
isVerucaOneClickEnabled:function(){return a("verucaOneClickEnabled")},enableSnSOptIn:function(){f(e.SNS_OPT_IN_CHECKBOX).removeAttr("disabled")},isSnsCustomer:function(){return a("snsCustomer")}}});n.when("ready").register("sns-stringify-util",function(){return JSON&&"function"===typeof JSON.stringify?JSON.stringify:function(){var c={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},g=/[\\"\u0000-\u001F\u2028\u2029]/g,e=Object.prototype.toString,f=Array.isArray||function(c){return"[object Array]"===
e.call(c)},d=function(d){return c[d]||"\\u"+(d.charCodeAt(0)+65536).toString(16).substr(1)};return function b(a){if(null===a)return"null";if("number"===typeof a)return isFinite(a)?a.toString():"null";if("boolean"===typeof a)return a.toString();if("object"===typeof a){if("function"===typeof a.toJSON)return b(a.toJSON());if(f(a)){for(var c="[",p=0;p<a.length;p++)c+=(p?", ":"")+b(a[p]);return c+"]"}if("[object Object]"===e.call(a)){c=[];for(p in a)a.hasOwnProperty(p)&&c.push(b(p)+": "+b(a[p]));return"{"+
c.join(", ")+"}"}}return'"'+a.toString().replace(g,d)+'"'}}()});n.when("A","sns-stringify-util","ready").register("sns-declarative-util",function(c,g){function e(b){return b&&("object"===typeof b||"object"===typeof b.prototype)}function f(){for(var b=0;b<arguments.length;b++)if("string"!==typeof arguments[b])throw"Function parameter must be of type string.";}function d(){for(var b=0;b<arguments.length;b++){var a=arguments[b],c=Object.prototype.toString;if((Array.isArray||function(a){return"[object Array]"===
c.call(a)})(a)&&0<a.length)for(var d=0;d<a.length;d++)f(a[d]);else throw"Function parameter must be a non empty array.";}}function k(b){var a="data-"+b.getAttribute("data-action"),d=function(){var d=b.getAttribute(a),e=d?c.parseJSON(d):{};e.save=function(){var c=e.save;delete e.save;var d=g(e);b.setAttribute(a,d);e.save=c};return e};return{hasExactKeyHeirarchy:function(a,c){var b=d();a=a.split(".");for(var f=0<a.length,g=0;g<a.length&&f;g++)var k=a[g],f=e(b)&&b.hasOwnProperty(k),b=b[k];f&&void 0!==
c&&(f=b===c);return f},hasParsableJSON:function(){try{return d().save(),!0}catch(a){return!1}},put:function(a){var b=d();e(b.inputs)||(b.inputs={});c.$.each(a,function(a,c){b.inputs[a]=c});b.save()},getData:d}}return{query:function(b){d(b);var a=[],g=[],p=[],m,h,n=function(){return{numberOfMatchingActions:a.length,allMatchKeyValue:function(b,c){f(b);for(var d=0<this.numberOfMatchingActions,e=0;e<this.numberOfMatchingActions&&d;e++)d=(d=a[e])&&d.hasExactKeyHeirarchy(b,c);return d},putAll:function(b){for(var c=
0;c<this.numberOfMatchingActions;c++)a[c].put(b)},getStrings:function(){for(var b=0;b<this.numberOfMatchingActions;b++){var c=a[b];if(c.getData().strings)return c.getData().strings}return[]},getData:function(){for(var b=0;b<this.numberOfMatchingActions;b++){var c=a[b];if(c.getData())return c.getData()}return[]}}},r=function(){for(var d=c.$("#buybox").find(".a-declarative").get(),f=0<g.length,m=0;m<d.length;m++){var h=d[m],l;a:{l=h;for(var t=b,r=0;r<t.length;r++){var u;var v=l;u=t[r];e(v)&&"string"===
typeof u?(v=v.getAttribute("data-action")||"",u=0===u.localeCompare(v)):u=!1;if(u){l=!0;break a}}l=!1}if(l&&(h=k(h),h.hasParsableJSON()))if(f){l=!0;for(t=0;t<g.length&&l;t++)l=h.hasExactKeyHeirarchy(g[t],p[t]);l&&a.push(h)}else a.push(h)}return n()};m=function(a){f(a);g.push(a);return{equals:h,equalsAny:function(){return h(void 0)}}};h=function(a){p.push(a);return{where:m,execute:r}};return{where:m,execute:r}}}});n.when("A","sns-utils","sns-buybox-constants","sns-declarative-util").register("sns-atc-utils",
function(c,g,e,f){var d=c.$,k=["aw-mash","add-to-cart","one-click","show-services-interstitial"],b=function(a){f.query(k).where("buttonID").equals("add-to-cart").execute().putAll(a);f.query(k).where("buttonID").equals("buy-now").execute().putAll(a);f.query(k).where("buttonID").equals("buy-now-one-click").execute().putAll(a)};return{initializeOnmlDeclaratives:function(){if(g.isSnSEligible()){var a=g.getAStateFromDom(e.SNS_OPT_IN_FEATURE_DIV,"sns-add-to-cart-params","addToCartParams");b(a||{});d("\x3cinput type\x3dhidden value\x3dtrue \x3e").prop("id",
e.SNS_ONML_INIT_INPUT_ID).appendTo(e.SNS_OPT_IN_FEATURE_DIV)}},setOnmlDeclaratives:b,getAddToCartStrings:function(){return f.query(k).where("buttonID").equals("add-to-cart").execute().getStrings()},getAddToCartData:function(){return f.query(k).where("buttonID").equals("add-to-cart").execute().getData()}}});n.when("A","sns-utils","sns-constants","sns-atc-utils").register("sns-atc",function(c,g,e,f){return{init:function(){g.registerCallbackForNameSpace(e.EVENT_NAMESPACE.PAGE_UPDATE,f.initializeOnmlDeclaratives);
f.initializeOnmlDeclaratives()}}});n.when("A","sns-utils","sns-buybox-constants","sns-metrics-constants").register("sns-atc-login",function(c,g,e,f){function d(a){var b=h.location.search.substring(1);return decodeURIComponent(b).split("\x26").map(function(a){return a.split("\x3d")}).filter(function(b){return b[0]===a}).map(function(a){return a[1]})[0]||void 0}var k=function(a){function b(c){amazon.mash.showAlert({title:a.aa_mash_encounter_problem,message:c,buttonTitles:[a.aa_mash_ok],successCallback:function(a){},
failCallback:function(a){console.log(a)}})}amazon.mash.showLoginDialog({successCallback:function(){var a=c.$(e.SNS_QUANTITY_FIELD).val(),b=c.$(e.SNS_FREQUENCY_FORM_FIELD).val(),a={snsQty:a,snsOptIn:!0,snsFreq:b},a=c.$.param(a),b=location.href,b=-1<b.indexOf("?")?b+("\x26"+a):b+("?"+a);h.location.href=b},failCallback:function(a){"CANCELED"!==a?b(a):(a=e.SNS_OPT_IN_CHECKBOX,!0===c.$(a).is(":checked")&&c.$(a).click())}})},b=function(){!0===c.$(e.SNS_OPT_IN_CHECKBOX).is(":checked")&&c.$(e.SNS_OPT_IN_CHECKBOX).click()};
return{setValuesFromUrlParamsIfPresent:function(){var a=d("snsOptIn");a&&"true"===a&&(g.enableSnSOptIn(),!1===c.$(e.SNS_OPT_IN_CHECKBOX).is(":checked")&&c.$(e.SNS_OPT_IN_CHECKBOX).click());(a=d("snsFreq"))&&(g.isMobileApp()?c.$(e.SNS_FREQ_BOTTOMSHEET_SELECTOR).find("button[value\x3d"+a+"]").click():g.isTabletApp()&&c.$("[data-a-accordion-row-name\x3dfrequencyAccordionRow"+(a-1)+"] a").click());(a=d("snsQty"))&&c.$(e.SNS_QUANTITY_FIELD).val(a)},signInIfNotSignedIn:function(a,d){c.$.ajax({url:"/gp/subscribe-and-save/ajax/requireSignIn.html",
success:function(c){1===c.requireSignIn&&(d?(b(),h.ue&&h.ue.count(f.SNS_CUSTOMER_RECOGNIZED_BUT_NOT_SIGNED_IN,(ue.count(f.SNS_CUSTOMER_RECOGNIZED_BUT_NOT_SIGNED_IN)||0)+1)):(k(a),h.ue&&h.ue.count(f.SNS_SIGN_IN_IF_NOT_ALREADY_SIGNED_IN_METRICS,(ue.count(f.SNS_SIGN_IN_IF_NOT_ALREADY_SIGNED_IN_METRICS)||0)+1)))},error:function(a,c,d){b();h.ue&&h.ue.count(f.SNS_REQUIRE_SIGN_IN_STATUS_FAILED,(ue.count(f.SNS_REQUIRE_SIGN_IN_STATUS_FAILED)||0)+1)}})}}});n.when("A","sns-utils","sns-constants","sns-buybox-constants",
"sns-atc-utils").register("sns-buybox-utils",function(c,g,e,f){var d=function(b){if(0<b.length)return b.innerWidth()<b[0].scrollWidth},k=function(b,a,d){a=b+"_"+(d?"checkedLabel":"uncheckedLabel")+"_"+("oneClick"===b?a:"all");b=g.getOnmlParam(a);a=(d=g.getOnmlUserPref(e.USER_PREFS_KEYS.ONML_PARAMS))&&d[a];if(b=b||a)return c.$("\x3cp\x3e"+b+"\x3c/p\x3e").text()};return{updateOneClickButtonLabel:function(b){if(g.isVerucaOneClickEnabled()){b="boolean"===typeof b?b:c.$(f.SNS_OPT_IN_CHECKBOX).is(":checked");
var a=c.$(f.ONE_CLICK_BUTTON),e=c.$(f.ONE_CLICK_BUTTON_ICON),h=c.$(f.ONE_CLICK_BUTTON_TEXT),m=g.getDeviceType(),l=k("oneClick",m,!0),m=k("oneClick",m,!1);l&&m&&(b?(h.text(l),d(h)&&(e.addClass("aok-hidden"),a.removeClass("a-button-icon"))):(h.text(m),e.length&&(a.addClass("a-button-icon"),e.removeClass("aok-hidden"))))}},updateBuyNowButtonLabel:function(b){if(g.isVerucaBuyNowEnabled()){b="boolean"===typeof b?b:c.$(f.SNS_OPT_IN_CHECKBOX).is(":checked");var a=c.$(f.BUY_NOW_BUTTON),e=c.$(f.BUY_NOW_BUTTON_ICON),
h=c.$(f.BUY_NOW_BUTTON_TEXT),m=g.getDeviceType(),l=k("buyNow",m,!0),m=k("buyNow",m,!1);l&&m&&(b?(h.text(l),d(h)&&(e.addClass("aok-hidden"),a.removeClass("a-button-icon"))):(h.text(m),e.length&&(a.addClass("a-button-icon"),e.removeClass("aok-hidden"))))}},updateAddToCartButtonLabel:function(b){b="boolean"===typeof b?b:c.$(f.SNS_OPT_IN_CHECKBOX).is(":checked");var a=c.$(f.ADD_TO_CART_BUTTON).closest(".a-button"),e=a.find(".a-button-inner"),h=a.find("i.a-icon"),m=a.find("span.a-button-text"),l=g.getDeviceType(),
n=k("addToCart",l,!0),l=k("addToCart",l,!1);n&&l&&(b?(m.text(n),e.addClass("sns-onml-sky-button-inner"),m.addClass("sns-onml-sky-button-text"),d(m)&&(h.addClass("aok-hidden"),a.removeClass("a-button-icon"))):(m.text(l),e.removeClass("sns-onml-sky-button-inner"),m.removeClass("sns-onml-sky-button-text"),h.length&&(a.addClass("a-button-icon"),h.removeClass("aok-hidden"))))},showSnSMerchantInfoIfSnSOptInChecked:function(b){var a=c.$(f.SNS_ONML_MERCHANT_INFO);b="boolean"===typeof b?b:c.$(f.SNS_OPT_IN_CHECKBOX).is(":checked");
a.toggleClass("aok-hidden",!b)},showGoldBoxDiscountMessageIfSnSOptInChecked:function(b){var a=c.$(f.GOLDBOX_DISCOUNT_MESSAGE);b="boolean"===typeof b?b:c.$(f.SNS_OPT_IN_CHECKBOX).is(":checked");a.toggleClass("aok-hidden",!b)},showSubscribeOnlyButtonIfSnSOptInChecked:function(b){var a=c.$(f.JUST_SUBSCRIBE_DIV);b="boolean"===typeof b?b:c.$(f.SNS_OPT_IN_CHECKBOX).is(":checked");a.toggleClass("aok-hidden",!b)}}});n.register("sns-constants",function(){return{TIERED:"tiered",NON_TIERED:"nonTiered",BASE:"BASE",
PREMIUM:"PREMIUM",ZERO_BASE:"ZERO_BASE",EVENT_NAMESPACE:{PAGE_UPDATE:"pageUpdate",FREQUENCY_HIDDEN_INPUT_CHANGE:"frequencyHiddenInputChange"},USER_PREFS_KEYS:{SNS_OPT_IN:"snsOptIn",SNS_FREQUENCY:"rcxOrdFreq",ONML_PARAMS:"onmlParams"}}});n.when("A","sns-utils","sns-constants","sns-buybox-constants").register("sns-event-handler",function(c,g,e,f){return{init:function(){function d(d){for(var b=c.$("\x3cform\x3e",{method:f.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.method,action:f.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.action,
id:f.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.id,name:f.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.name}),a=[{name:"ASIN"},{name:"offerListingID"},{name:"merchantID"},{name:"rcxOrdFreq"},{name:"snsOfferListingID"},{name:"snsMerchantID"}],e="",g=0;g<a.length;g++)var h=a[g].name,l=c.$("[name\x3d"+h+"]").val(),e=e+('\x3cinput type\x3d"hidden" name\x3d"'+h+'" value\x3d"'+l+'"\x3e');e=e+('\x3cinput type\x3d"hidden" name\x3d"ref" value\x3d"'+d+'"\x3e')+'\x3cinput type\x3d"hidden" name\x3d"submit.rcx-subscribe" value\x3d"1"\x3e';
d=c.$(f.QUANTITY_CONTAINER).find(f.QUANTITY);e+='\x3cinput type\x3d"hidden" name\x3d"quantity" value\x3d"'+d.val()+'"\x3e';b.html(e);c.$("body").append(b);c.$(f.SUBSCRIBE_ONLY_FORM).submit()}g.isSnSEligible()&&g.setOnmlUserPref(e.USER_PREFS_KEYS.ONML_PARAMS,g.getOnmlParam());g.registerCallbackForNameSpace(e.EVENT_NAMESPACE.PAGE_UPDATE,function(){var d=g.getOnmlUserPref(e.USER_PREFS_KEYS.ONML_PARAMS)||{},b=d.asin,a=g.getOnmlParam("asin");d.asin=a;g.setOnmlUserPref(e.USER_PREFS_KEYS.ONML_PARAMS,d);
d=b!==a;b=g.getOnmlUserPref(e.USER_PREFS_KEYS.SNS_OPT_IN);"undefined"!==typeof b&&c.$(f.SNS_OPT_IN_CHECKBOX).is(":checked")!==b&&(g.enableSnSOptIn(),c.$(f.SNS_OPT_IN_CHECKBOX).click());(b=g.getOnmlUserPref(e.USER_PREFS_KEYS.SNS_FREQUENCY))&&!d?g.isMobileDevice()?c.$(f.SNS_FREQ_BOTTOMSHEET_SELECTOR).find("button[value\x3d"+b+"]").click():c.$("[data-a-accordion-row-name\x3dfrequencyAccordionRow"+(b-1)+"] a").click():g.deleteOnmlUserPref(e.USER_PREFS_KEYS.SNS_FREQUENCY)});c.$(f.SNS_FREQUENCY_FORM_FIELD).change(function(){g.executeCallbacksForNameSpace(e.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE)});
c.on("a:pageUpdate",function(){g.executeCallbacksForNameSpace(e.EVENT_NAMESPACE.PAGE_UPDATE)});c.declarative("subscribe-only","click",function(c){d("onml_so_l")});c.declarative("just-subscribe","click",function(c){d("onml_justsub_l")})}}});n.register("sns-metrics-constants",function(){return{SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS:"snsOnmlExistingSnsCustomerCheck",SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS:"snsOnmlNewSnsCustomerCheck",SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS:"snsOnmlExistingSnsCustomerUncheck",
SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS:"snsOnmlNewSnsCustomerUncheck",SNS_SIGN_IN_IF_NOT_ALREADY_SIGNED_IN_METRICS:"snsSignInIfNotAlreadySignedIn",SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS:"snsOnmlFrequencyLabelClick",SNS_ONML_FREQUENCY_CHANGE_METRICS:"snsOnmlFrequencyChange",SNS_ONML_UPSELL_MESSAGE_METRICS:"snsOnmlUpsellMessage",SNS_ONML_SUBSCRIBE_ONLY_METRICS:"snsOnmlSubscribeOnly",SNS_CUSTOMER_RECOGNIZED_BUT_NOT_SIGNED_IN:"snsOnmlCustomerRecognizedButNotSignedIn",SNS_REQUIRE_SIGN_IN_STATUS_FAILED:"snsOnmlRequireSignInStatusFailed"}});
n.when("A","sns-utils","sns-metrics-constants","sns-buybox-constants").register("sns-metrics-helper",function(c,g,e,f){return{init:function(){c.declarative("sns-opt-in-checked","change",function(){var d=c.$(f.SNS_OPT_IN_CHECKBOX).is(":checked");h.ue&&(d?g.isSnsCustomer()?h.ue.count(e.SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS,(ue.count(e.SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS)||0)+1):h.ue.count(e.SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS,(ue.count(e.SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS)||
0)+1):g.isSnsCustomer()?h.ue.count(e.SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS,(ue.count(e.SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS)||0)+1):h.ue.count(e.SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS,(ue.count(e.SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS)||0)+1))});c.$(document).delegate(".sns-buybox-upsell-trigger","click",function(c){h.ue&&h.ue.count(e.SNS_ONML_UPSELL_MESSAGE_METRICS,(ue.count(e.SNS_ONML_UPSELL_MESSAGE_METRICS)||0)+1)});c.$(document).delegate("#sns-dp-frequency-trigger","click",
function(c){h.ue&&h.ue.count(e.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS,(ue.count(e.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS)||0)+1)});c.$(document).delegate("#snsSelectedFrequencyLabel","click",function(c){h.ue&&h.ue.count(e.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS,(ue.count(e.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS)||0)+1)});c.on("a:accordion:sns-dp-frequency-accordion:select",function(){h.ue&&h.ue.count(e.SNS_ONML_FREQUENCY_CHANGE_METRICS,(ue.count(e.SNS_ONML_FREQUENCY_CHANGE_METRICS)||0)+1)});c.$(document).delegate("#snsFrequencyBottomSheet button",
"click",function(c){h.ue&&h.ue.count(e.SNS_ONML_FREQUENCY_CHANGE_METRICS,(ue.count(e.SNS_ONML_FREQUENCY_CHANGE_METRICS)||0)+1)});c.$(document).delegate("#subscribe-only","click",function(c){h.ue&&h.ue.count(e.SNS_ONML_SUBSCRIBE_ONLY_METRICS,(ue.count(e.SNS_ONML_SUBSCRIBE_ONLY_METRICS)||0)+1)})}}});n.when("sns-atc","sns-frequency-bottom-sheet","sns-frequency-popover","sns-opt-in-checkbox","sns-event-handler","sns-metrics-helper","sns-price-refresh").execute("sns-execute",function(c,g,e,f,d,h,b){c.init();
g.init();e.init();f.init();d.init();h.init();b.init()})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("AmazonsChoiceAssets"):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){c.when("A","a-popover","ready").execute(function(a,c){var b=a.$;b(document).delegate("#why-we-love-this-product-link","click mouseenter",function(a){c.get(b("#ac-badge-popover-declarative")).show();a.preventDefault()})})});
/* ******** */
(function(b){var d=window.AmazonUIPageJS||window.P,f=d._namespace||d.attributeErrors,a=f?f("DetailPagePRSubsWidgetAssets",""):d;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,d,f){b.when("A","jQuery","ready","cf").execute(function(a,c){function b(){c(".prsubswidget-asin").unbind("click.prsubswidget mousedown.prsubswidget");c(".prsubswidget-asin").bind("click.prsubswidget mousedown.prsubswidget",function(e){if(("mousedown"!==e.type||1!==e.which)&&d.ue&&d.ue.event){var a=
c(e.target).data("subsAsin");e=c(e.target).data("surfacedAsinRequestId");a&&e&&d.ue.event({producerId:"prservices_subs_feedback_loop",schemaId:"prservices.ClickedSubstituteEvent.3",subsAsin:a,surfacedAsinRequestId:e},"producer","schema")}})}b();a.on("a:pageUpdate",b)});b.when("A","jQuery","ready","cf").execute(function(a,c){function b(){var a=c("#prsubswidget").find(".prsubswidget-no-wrap:visible");a.each(function(){c(this).css("width",c(this).parent().width());c(this).next("br").remove();c(this).css("display",
"block")});3===a.size()&&c("#prsubswidget li").width("32%")}b();a.on("a:pageUpdate",b)})});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("PrimeOneClickAssets",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.register("PrimeOneClickCountdown",function(){function a(e,a,b,c,d){if(!(1>e)){var f=this;this.endTime=this.getCurrentTime()+e;this.expirationCallback=a;this.displayElement=b;this.displayEnabled=!!d;this.formatFunction=c;this.update();this.currentTimer=setInterval(function(){f.update()},6E4)}}
a.prototype.update=function(){var a=this.endTime-this.getCurrentTime();0>a&&(a=0);this.updateDisplay(a);0===a&&("function"===typeof this.expirationCallback&&this.expirationCallback(),this.destroy())};a.prototype.updateDisplay=function(a){this.displayElement&&this.displayEnabled&&(this.displayElement.innerHTML=this.getCountdownDisplay(Math.floor(a/3600),Math.floor(a%3600/60),a%60))};a.prototype.getCountdownDisplay=function(a,b,c){return"function"===typeof this.formatFunction?this.formatFunction(a,
b,c):a+"h "+b+"m "+c+"s"};a.prototype.enableDisplay=function(){this.displayEnabled=!0;this.update()};a.prototype.disableDisplay=function(a){this.displayEnabled=!1;a&&this.displayElement&&(this.displayElement.innerHTML="")};a.prototype.getCurrentTime=function(){return Math.floor(+new Date/1E3)};a.prototype.destroy=function(){clearTimeout(this.currentTimer)};return{Countdown:a}})});
/* ******** */
(function(n){var p=window.AmazonUIPageJS||window.P,y=p._namespace||p.attributeErrors,t=y?y("DetailPageSTSAssets",""):p;t.guardFatal?t.guardFatal(n)(t,window):t.execute(function(){n(t,window)})})(function(n,p,y){n.when("A","jQuery","ship-to-store-settings","vas-metrics-publisher","ready").execute("ship-to-store-controller",function(k,b,l,d){function e(){n.when(c.STS_QTY_DROPDOWN).execute(function(a){q.stsVM.isSdpOfferSelected&&(a=a.getSelect("quantity"),a.update({status:"disabled"}),1<parseInt(a.val(),
10)&&(a.setValue("1"),b(c.STS_QUANTITY_ALERT).removeClass("a-hidden"),d.logUeMetricIncreaseCount(q.refTagPrefix+"quantityAlert")))})}function p(){n.when(c.STS_QTY_DROPDOWN).execute(function(a){(a=a.getSelect("quantity"))&&a.update({status:"normal"});b(c.STS_QUANTITY_ALERT).addClass("a-hidden");b(c.STS_SERVICES_ROW).removeClass("addProfessionalServicesRow-alert-on")})}var c={STS_CHECKBOX:"#vas-psa-sts-checkbox-input",STS_PREFERENCES_BUTTON:"#vas-psa-sts-preferences-button",STS_QUANTITY_ALERT:".vas-psa-sts-quantity-alert",
STS_SERVICES_ROW:".addProfessionalServicesRow",STS_ATC_BUTTON:"#add-to-cart-button",STS_QTY_DROPDOWN:"a-dropdown"},q={},a={stsCheckBoxHandler:function(){if(b(c.STS_CHECKBOX).is(":checked")){if(d.logUeMetricIncreaseCount(q.refTagPrefix+"vasCheckBox_checked"),e(),q.stsVM.isSdpOfferSelected)try{k.trigger("vas:add-service-asin-buybox-event",q.stsVM.baseAsinOfferData),d.increaseMetricBy("a2cFormAddEventSend_success",1),d.increaseMetricBy("a2cFormAddEventSend_fail",0)}catch(a){d.increaseMetricBy("a2cFormAddEventSend_success",
0),d.increaseMetricBy("a2cFormAddEventSend_fail",1),d.log(a)}}else{d.logUeMetricIncreaseCount(q.refTagPrefix+"vasCheckBox_unchecked");p();try{k.trigger("vas:remove-service-asin-buybox-event"),d.increaseMetricBy("a2cFormRemoveEventSend_fail",0),d.increaseMetricBy("a2cFormRemoveEventSend_success",1)}catch(a){d.increaseMetricBy("a2cFormRemoveEventSend_success",0),d.increaseMetricBy("a2cFormRemoveEventSend_fail",1),d.log(a)}}},stsAtcHandler:function(){d.logUeMetricIncreaseCount(q.refTagPrefix+"atcClick");
b(c.STS_CHECKBOX).is(":checked")?d.logUeMetricIncreaseCount(q.refTagPrefix+"atcClick_vasBuyBoxChecked"):d.logUeMetricIncreaseCount(q.refTagPrefix+"atcClick_vasBuyBoxUnChecked");b(c.STS_ATC_BUTTON).unbind("click.lsatc");b(c.STS_ATC_BUTTON).click()}},h=function(){d.logRefTag(q.refTagPrefix);b(c.STS_CHECKBOX).unbind("change");b(c.STS_CHECKBOX).bind("change",function(){a.stsCheckBoxHandler()});b(c.STS_ATC_BUTTON).unbind("click.lsatc");b(c.STS_ATC_BUTTON).bind("click.lsatc",function(){a.stsAtcHandler()});
b(c.STS_PREFERENCES_BUTTON).unbind("click");b(c.STS_PREFERENCES_BUTTON).bind("click",function(){d.logUeMetricIncreaseCount(q.refTagPrefix+"selectAssemblyPreferences_click")});a.stsCheckBoxHandler()};k.off("vas:widgetname:sts");k.on("vas:widgetname:sts",function(){q=l.fetchSTSSetting();h()})});n.when("ship-to-store-settings","vas-common-settings","query-param","vas-widgets").execute("sts-pdp-only-controller",function(k,b,l){var d=k.fetchSTSSetting();if(void 0===d||void 0===d.stsVM||"stsPdpOnly"!==
d.stsVM.winningWidgetName)return!1;n.when("A","ship-to-store-metric-publisher","ship-to-store-metric-names","vas-core-buybox").execute(function(e,k,c,q){function a(){}var h=new k(d.refTagPrefix);h.publish(c.LOADED);var f=e.$,p,r,t,G,u,y,H,w,x,I,N,O,U,J,A,V,W,X,B,P,Y,Z,K,C,v,Q,R,z,D,S={},T=[],L={},M,E,F,aa,ba,m=[];a.prototype.init=function(){n.when("a-modal","a-popover","a-dropdown","ready").execute("sts-pdp-only-controller-init",function(g,b,ca){h.publish(c.INIT);p=f("#addProfessionalServicesRow");
z=d.stsVM.modalOffers;e.isArray(z)&&z.length?(w=f("#sts-ingress-offered"),x=f("#sts-ingress-selected"),I=f("#sts-selected-service-below-address"),t=f("#add-to-cart-button"),G=f("#OneClickBox"),f("#vas-psa-sts-checkbox-input"),y=f("#sts-pdp-service-modal-content"),F=(b=ca.getSelect("quantity"))?b.val():1,N=f(".sts-modal-content-column"),O=f(".sts-modal-map-column"),U=f("#sts-modal-map-pushpin-template"),J=f("#sts-modal-offer-scroller"),A=f("#sts-modal-offer-scroller-content"),V=f("#sts-modal-offer-wrapper-template"),
W=f("#sts-modal-offer-price-template"),X=f("#vas-zipCodeValidationRegexString"),B=f("#sts-zip-error"),M=d.stsVM.productQuantityToUpsellAsinMap,aa=Object.keys(M),h.publish(c.OFFERS_ON_PAGE_LOAD,z.length),H=g.get(f("#vasServiceInterstitial")),r=f("body"),r.delegate("#sts-select-button","click",a.prototype.offeredIngressClick),r.delegate("#sts-change-installation","click",a.prototype.selectedIngressChangeClick),r.delegate(".sts-modal-accept-offer","click",a.prototype.acceptOfferClick),r.delegate(".sts-modal-decline-offer",
"click",a.prototype.declineOfferClick),r.delegate(".shipToStore-offer-merchant-row","click",a.prototype.selectionChanged),r.delegate("#sts-pdp-only-sheet-zip-update-link","click",a.prototype.zipCodePopup),r.delegate("#sts-pdp-only-modal-zip-update-form","submit",a.prototype.zipCodeRefresh),r.undelegate("#add-to-cart-button","click.lsatc"),r.delegate("#add-to-cart-button","click.lsatc",a.prototype.atcClick),e.on("a:popover:beforeHide:vasServiceInterstitial",a.prototype.modalBeforeHide),e.on("a:popover:afterShow:vasServiceInterstitial",
a.prototype.modalAfterShow),P=f("#sts-pdp-only-sheet-zip-update-link"),e.declarative.create(P,"a-popover",{name:"sts-zip-update",closeButton:"false",activate:"onclick"}),ba=f("#sts-zip-update-popover-content"),e.on("a:dropdown:quantity:select",a.prototype.quantityChanged),a.prototype.generateHTMLTemplatesFromOffers(),E=new l,E.parameterExists("sts-ao")&&(g=E.getParameter("sts-ao"),g=A.find('[data-sts-ao\x3d"'+g+'"]'),0<g.length?(h.publish(c.PAGE_RELOAD_OFFER_NOT_FOUND),a.prototype.changeSelectedOffer(g),
a.prototype.acceptOffer()):h.publish(c.PAGE_RELOAD_OFFER_FOUND))):(h.publish(c.NO_OFFERS_ON_PAGE_LOAD),h.publish(c.OFFERS_ON_PAGE_LOAD,0),p.hide())})};a.prototype.getDefaultOffer=function(){return y.find(".sts-modal-offer-wrapper:first-of-type")};a.prototype.zipCodePopup=function(){ba.show();h.publish(c.ZIP_UPDATE_SHOW)};a.prototype.quantityChanged=function(g){F=g.value;var b=u.find(".sts-merchant-address").html();a.prototype.generateHTMLTemplatesFromOffers();(g=m.find(function(a){return a.displayAddress===
b}))?(g=A.find('[data-sts-ao\x3d"'+g.storeId+'"]'),a.prototype.changeSelectedOffer(g),!x.is(":visible")&&0<=f.inArray(F,aa)?w.show():C&&(e.trigger("vas:remove-service-asin-buybox-event"),a.prototype.acceptOffer())):(e.trigger("vas:remove-service-asin-buybox-event"),x.hide(),w.hide(),C=!1,G.show())};a.prototype.changeSelectedOffer=function(g){u.removeClass("sts-modal-offer-selected");u=g;a.prototype.selectHighlightedOffer()};a.prototype.highlightDefaultOffer=function(){u=a.prototype.getDefaultOffer();
a.prototype.selectHighlightedOffer()};a.prototype.selectHighlightedOffer=function(){u.addClass("sts-modal-offer-selected");f('input[name\x3d"shipToStore-merchant-select"]',u).prop("checked",!0);J.animate({scrollTop:u.offset().top-J.offset().top+J.scrollTop()})};a.prototype.setVisibleOffers=function(){var a=M[F];m=[];e.each(z,function(b){b.asin===a&&m.push(b)})};a.prototype.selectedIngressChangeClick=function(){h.publish(c.SELECTED_INGRESS_CHANGE_CLICK);H.show()};a.prototype.offeredIngressClick=function(){h.publish(c.OFFER_INGRESS_CLICK);
H.show()};a.prototype.modalAfterShow=function(){h.publish(c.OFFER_LIST_OPENED);Z=!0;a.prototype.renderMapPinsAndEventsIfMapLayerExists()};a.prototype.modalBeforeHide=function(){h.publish(c.OFFER_LIST_CLOSED);Y&&(r.undelegate("#add-to-cart-button","click.lsatc"),t.click())};a.prototype.atcClick=function(){h.publish(c.ATC_CLICK);q.registerBuyboxEventHandlers();Y=!0;C||!w.is(":visible")||Z?(r.undelegate("#add-to-cart-button","click.lsatc"),t.click()):a.prototype.offeredIngressClick();return!1};a.prototype.acceptOfferClick=
function(){h.publish(c.OFFER_ACCEPTED_CLICK);a.prototype.acceptOffer();E.setParameter("sts-ao",S.storeId);a.prototype.closeModal()};a.prototype.acceptOffer=function(){h.publish(c.OFFER_ACCEPTED);x.find("#sts-selected-service-provider-address").text(u.find(".sts-merchant-address").text());x.find("#sts-selected-service-provider-name").text(u.find(".sts-merchant-name").text());I.length||(f("#sts-ingress-selected div:nth-child(2) div:nth-child(3) span").attr("id","sts-selected-service-below-address"),
I=f("#sts-selected-service-below-address"));I.html(u.find(".sts-merchant-price").html());w.hide();x.show();C=!0;G.hide();S=f(".sts-modal-offer-selected").data();var a=Object.assign({},S);delete a.id;e.trigger("vas:remove-service-asin-buybox-event");e.trigger("vas:add-service-asin-buybox-event",a);return!1};a.prototype.declineOfferClick=function(){h.publish(c.OFFER_DECLINED_CLICK);h.publish(c.OFFER_DECLINED);x.hide();w.show();e.trigger("vas:remove-service-asin-buybox-event");E.removeParameter("sts-ao");
C=!1;G.show();a.prototype.closeModal();return!1};a.prototype.closeModal=function(){H.hide();return!1};a.prototype.selectionChanged=function(g){a.prototype.changeSelectedOffer(f(g.currentTarget));g=D.index(D.filter(":checked"));a.prototype.pushpinClicked(L[g])};a.prototype.zipCodeRefresh=function(g){n.when("vas-utilities").execute(function(d){var l=f(g.target).attr("action"),e=b.getSetting("widgetCommonVM"),k=f("#sts-zip-input").val();d.validateZipCode(k,X)?f.get(l,{a:e.productAsin,z:k,ms:e.mappingSet}).done(function(g){g&&
g.length?(h.publish(c.ZIP_UPDATE_SUCCESS),B.addClass("aok-hidden"),a.prototype.convertZipCodeOffersToModalOffers(g),a.prototype.generateHTMLTemplatesFromOffers(),a.prototype.renderMapPinsAndEventsIfMapLayerExists(),P.text(k),h.publish(c.OFFERS_ON_ZIP_UPDATE,g.length)):(h.publish(c.ZIP_UPDATE_NO_OFFERS),B.removeClass("aok-hidden"),h.publish(c.OFFERS_ON_ZIP_UPDATE,0))}).error(function(){h.publish(c.ZIP_UPDATE_ERROR);B.removeClass("aok-hidden")}):(h.publish(c.ZIP_UPDATE_INVALID_ZIP_ENTERED),B.removeClass("aok-hidden"))});
return!1};a.prototype.convertZipCodeOffersToModalOffers=function(a){a&&(e.each(a,function(a){if(a.geoCodes&&a.geoCodes.Latitude&&a.geoCodes.Longitude){var g={};g.latitude=a.geoCodes.Latitude;g.longitude=a.geoCodes.Longitude;a.geoCodes=[g]}}),z=a)};a.prototype.generateHTMLTemplatesFromOffers=function(){a.prototype.setVisibleOffers();if(!M[F])return h.publish(c.SELECTED_QTY_NOT_MAPPED_TO_ASIN),!1;if(!m||!m.length)return h.publish(c.SELECTED_QTY_MAPPED_TO_ASIN_WO_OFFERS),!1;h.publish(c.SELECTED_QTY_MAPPED_TO_ASIN_W_OFFERS);
u=null;A.empty();var g=0;e.each(m,function(a){var b=V.clone(),d=W.clone(),c={merchantId:a.merchantId,offerlistingId:a.offerListingId,upsellAsin:a.asin,storeId:a.storeId};d.removeClass("aok-hidden");d.html(a.localizedPrice);d.removeAttr("id");b.find(".sts-merchant-name").html(a.merchantName);b.find(".sts-merchant-address").html(a.displayAddress);b.find(".sts-merchant-ratings").html(a.ratingsAndReviews);b.find(".sts-merchant-price").html(a.priceAndServiceCount);b.find(".sts-merchant-price .price").html(d);
b.data(c);b.attr("data-sts-ao",a.storeId);b.removeClass("aok-hidden");b.attr("id","sts-offer-merchant-row-"+g);A.append(b);g++});h.publish(c.OFFERS_GENERATED,g);a.prototype.highlightDefaultOffer();D=f('#sts-modal-offer-scroller-content input[name\x3d"shipToStore-merchant-select"]');m&&m[0]&&(w.find("#sts-offered-below-button").html(m[0].installationOfferedBelowButtonString),f("#sts-offered-below-button").find("#sts-pdp-only-lowest-price").text(m[0].localizedPrice))};a.prototype.renderMapLayer=function(){v||
(v=new Microsoft.Maps.Map(document.getElementById("sts-modal-map"),{credentials:"AgD__4QLnPZjTdAY_U1NlB-RhTfje8ULMcKzTV6tv8A5KYH0L-22G8AHx4M61so5",showLocateMeButton:!1}),K=new Microsoft.Maps.Infobox(new Microsoft.Maps.Location(0,0),{visible:!1,offset:new Microsoft.Maps.Point(0,30),height:80,width:80}),K.setMap(v))};a.prototype.renderMapPinsAndEvents=function(){if(v&&(v.entities.clear(),T=[],L={},m&&m.length)){N.removeClass("sts-modal-content-column-no-map");O.removeClass("aok-hidden");e.each(m,a.prototype.createPushpinsForSTS);
a.prototype.centerLocations(T);var b=D.index(D.filter(":checked"));a.prototype.pushpinClicked(L[b])}};a.prototype.renderMapPinsAndEventsIfMapLayerExists=function(){a.prototype.renderMapLayerIfNotExists();if(!a.prototype.hasAllGeographicallyMappableOffers(m))N.addClass("sts-modal-content-column-no-map"),O.addClass("aok-hidden");else if(R)a.prototype.renderMapPinsAndEvents();else if(Q)e.on("ship-to-store:bing-map:render-complete",a.prototype.renderMapPinsAndEvents)};a.prototype.renderMapLayerIfNotExists=
function(){!a.prototype.hasAllGeographicallyMappableOffers(m)||Q||R||(Q=!0,f.getScript("https://www.bing.com/api/maps/mapcontrol",function(){f.getScript("https://images-na.ssl-images-amazon.com/images/G/01/vas/map/mapsjs-core.js",function(){f.getScript("https://images-na.ssl-images-amazon.com/images/G/01/vas/map/mapsjs-service.js",function(){f.getScript("https://images-na.ssl-images-amazon.com/images/G/01/vas/map/mapsjs-mapevents.js",function(){f.getScript("https://images-na.ssl-images-amazon.com/images/G/01/vas/map/mapsjs-ui.js",
function(){a.prototype.renderMapLayer();R=!0;e.trigger("ship-to-store:bing-map:render-complete")})})})})}))};a.prototype.createPushpinsForSTS=function(b,d){var c=b.geoCodes[0],c=new Microsoft.Maps.Location(c.latitude,c.longitude);T.push(c);var c=a.prototype.createPushpin(c,d),l=b.ratingsAndReviews.split(" "),e="0% positive";l.length&&4>=l[0].length&&(e=l[0]+" positive");c.metadata={title:b.merchantName,displayAddress:b.displayAddress,price:b.localizedPrice,ratings:e,index:d};Microsoft.Maps.Events.addHandler(c,
"click",function(b){a.prototype.pushpinClicked(b.target)});v.entities.push(c);L[c.metadata.index]=c};a.prototype.pushpinClicked=function(b){K.setLocation(b.getLocation());var c=U.clone();c.find(".sts-modal-map-pushpin-price").html(b.metadata.price);c.find(".sts-modal-map-pushpin-ratings").html(b.metadata.ratings);c.removeAttr("id");c.removeClass("aok-hidden");K.setOptions({visible:!0,description:c[0].outerHTML});b=f("#sts-offer-merchant-row-"+b.metadata.index);a.prototype.changeSelectedOffer(b)};
a.prototype.createPushpin=function(a,b){return new Microsoft.Maps.Pushpin(a,{icon:'\x3csvg style\x3d"left:-14px;top:-36px;" xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"28px" height\x3d"36px" \x3e\x3cpath d\x3d"M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z" fill\x3d"#000" fill-opacity\x3d".2"\x3e\x3c/path\x3e\x3cpath d\x3d"M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z" fill\x3d"#fff"\x3e\x3c/path\x3e\x3cpath d\x3d"M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z" fill\x3d"#e47911"\x3e\x3c/path\x3e\x3ctext transform\x3d"matrix( 1 0 0 1 13 18 )" x\x3d"0" y\x3d"0" fill-opacity\x3d"1" fill\x3d"#fff" text-anchor\x3d"middle" font-weight\x3d"bold" font-size\x3d"13px" font-family\x3d"arial"\x3e'+
(b+1).toString()+"\x3c/text\x3e\x3c/svg\x3e"})};a.prototype.isGeographicallyMappableOffer=function(a){return a&&a.displayAddress&&a.geoCodes&&a.geoCodes.length&&a.geoCodes[0].latitude&&a.geoCodes[0].longitude&&a.merchantName&&a.merchantId&&a.offerListingId};a.prototype.hasAllGeographicallyMappableOffers=function(b){return null===b?!1:e.reduce(b,function(b,c){return b&&a.prototype.isGeographicallyMappableOffer(c)},!0)};a.prototype.centerLocations=function(a){v&&(a=Microsoft.Maps.LocationRect.fromLocations(a),
v.setView({bounds:a,padding:100}),9!==v.getZoom()&&v.setView({zoom:9}))};a.prototype.logUeMetricIncreaseCount=function(a,b){h.logUeMetricIncreaseCount(d.refTagPrefix+a,b)};(new a).init()})});"use strict";n.register("ship-to-store-metric-names",function(){return{ATC_CLICK:"add_to_cart_button_click",ATC_UBB_CLICK:"add_to_cart_ubb_button_click",CHANGED_QUANTITY:"changed_quantity_event",INIT:"init",LOADED:"loaded",NO_OFFERS_ON_PAGE_LOAD:"no_offers_on_page_load",OFFER_ACCEPTED:"offer_accepted",OFFER_ACCEPTED_CLICK:"offer_accepted_click",
OFFER_DECLINED:"offer_declined",OFFER_DECLINED_CLICK:"offer_declined_click",OFFER_INGRESS_CLICK:"offer_ingress_click",OFFER_LIST_CLOSED:"offer_list_closed",OFFER_LIST_OPENED:"offer_list_opened",OFFER_SELECTED:"offer_selected",OFFERS_GENERATED:"offers_generated",OFFERS_ON_PAGE_LOAD:"offers_on_page_load",OFFERS_ON_ZIP_UPDATE:"offers_on_zip_update",PAGE_RELOAD_OFFER_FOUND:"page_reload_offer_found",PAGE_RELOAD_OFFER_NOT_FOUND:"page_reload_offer_not_found",PAGE_RELOAD_OFFER_NOT_SPECIFIED:"page_reload_offer_not_specified",
SELECTED_INGRESS_CHANGE_CLICK:"selected_ingress_change_click",SELECTED_QTY_MAPPED_TO_ASIN_W_OFFERS:"selected_quantity_mapped_to_asin_with_offers",SELECTED_QTY_MAPPED_TO_ASIN_WO_OFFERS:"selected_quantity_mapped_to_asin_with_no_offers",SELECTED_QTY_NOT_MAPPED_TO_ASIN:"selected_quantity_not_mapped_to_asin",ZIP_UPDATE_ERROR:"zip_update_error",ZIP_UPDATE_HIDE:"zip_update_hide",ZIP_UPDATE_HIDE_CLICK:"zip_update_hide_click",ZIP_UPDATE_INVALID_ZIP_ENTERED:"zip_update_invalid_zip_entered",ZIP_UPDATE_NO_OFFERS:"zip_update_no_offers",
ZIP_UPDATE_SHOW:"zip_update_show",ZIP_UPDATE_SHOW_CLICK:"zip_update_show_click",ZIP_UPDATE_SUCCESS:"zip_update_success"}});"use strict";n.when("vas-metrics-publisher").register("ship-to-store-metric-publisher",function(k){return function l(d){var e=this;if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.publish=function(d,c){k.logUeMetricIncreaseCount(""+e.refTagPrefix+d,c)};this.refTagPrefix=d;k.logRefTag(this.refTagPrefix)}});"use strict";n.when("vas-common-settings",
"ready").register("ship-to-store-settings",function(k){var b={stsVM:{}};return{getSettings:function(l){return b.hasOwnProperty(l)?b[l]:b},setSettings:function(l,d,e){l&&e?b[l][e]=d:b[l]=d},fetchSTSSetting:function(){b.stsVM=k.getSetting("winningWidgetVM");if(void 0===b.stsVM)return b;b.productAsin=b.stsVM.productAsin;b.zipCode=b.stsVM.zipCode;b.buyboxPrice=b.stsVM.buyboxPrice;b.refTagPrefix="stsPdpOnly"===b.stsVM.winningWidgetName?"vas_sts_pdp_only_":b.stsVM.isParentServiceAsin?"vas_psa_":b.stsVM.isShipToStore?
"vas_sts_":b.stsVM.isSdpOfferSelected?"vas_sdp_offer_":"vas_";p.ue&&p.ue.tag&&(b.stsVM.isPdpOnlyExperience?p.ue.tag("pdpOnlyShipToStoreWidget"):b.stsVM.isParentServiceAsin?p.ue.tag("psaIngressWidget"):b.stsVM.isShipToStore&&p.ue.tag("pdpShipToStoreWidget"));return b}}});"use strict";var t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"===typeof Symbol&&k.constructor===Symbol?"symbol":typeof k};n.when("a-util").register("query-param",
function(k){function b(){this._queryString="";this._parameters={}}b.prototype.getParameters=function(){var b=this._getQueryStringFromBrowser().valueOf();if(b===this._queryString.valueOf())return this._parameters;this._queryString=b;this._queryString.slice(1).split("\x26").map(function(b){b=b.split("\x3d");if(b.length&&b[0].length){var e=decodeURIComponent(b[0]);2===b.length?this._parameters[e]=decodeURIComponent(b[1]):1===b.length&&(this._parameters[e]=null)}},this);return this._parameters};b.prototype.getParameter=
function(b){return this.getParameters()[b]};b.prototype.parameterExists=function(b){return this.getParameters().hasOwnProperty(b)};b.prototype.setParameters=function(b){if("object"!==("undefined"===typeof b?"undefined":t(b))||k.isArray(b))return!1;var d=[];Object.keys(b).forEach(function(e){if(!b.hasOwnProperty(e)||""===e||""===b[e])return!1;d.push(encodeURIComponent(e)+"\x3d"+encodeURIComponent(b[e]))});this._queryString="?"+d.join("\x26");this._setQueryStringOnBrowser(this._queryString);return this};
b.prototype.setParameter=function(b,d){if(!b||!b.length)return!1;var e=this.getParameters();e[b]=d;return this.setParameters(e)};b.prototype.removeParameter=function(b){if(!b||!b.length)return!1;var d=this.getParameters();delete d[b];return this.setParameters(d)};b.prototype.getQueryString=function(){return this._queryString};b.prototype._getQueryStringFromBrowser=function(){return location.search};b.prototype._setQueryStringOnBrowser=function(b){"function"===typeof history.replaceState?history.replaceState({},
document.title,b):location.search=b};return b})});
/* ******** */
(function(c){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,a=e?e("BeautyDesktopAssets"):d;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,d,e){c.when("A","ready").register("beauty-local-promo-common",function(a){var d=0,c,e,h,k,l,g,m,f=!0;a.$("#beautyLocalPromo_widget").length&&a.$("#beautyLocalPromoSlot").length&&a.$("#add-to-cart-button").delegate("","click",function(){if(f){a.$("#actionPanelWrapper").css("min-height","675px");a.$("#csxswImgfbt_2").addClass("aok-hidden");
a.$("#beautyLocalPromo_widget_smartShelf").length&&a.$("#beautyLocalPromo_widget_smartShelf").remove();var b=a.$("#beautyLocalPromo_widget").clone().attr("id","beautyLocalPromo_widget_smartShelf");c=b.find("#beautyLocalPromo_addOfferButton");e=b.find("#input_beautyServiceClientPort").val();h=b.find("#input_encryptedPromoID").val();k=b.find("#input_customerID").val();l=b.find("#input_marketplaceID").val();g=b.find("#input_businessOfferID").val();m=b.find("#input_asin").val();1>d&&(b.appendTo("#beautyLocalPromoSlot"),
b.removeClass("aok-hidden"),a.$.BeautyService_UpdateBusinessOfferViewCount({urlPort:e,operation:"UpdateLocalPromoOfferViewCount",data:{businessOfferID:g}}));f=!1}});a.$("#ccxsmartshelf_secondaryPanelBackButton").length&&a.$("#ccxsmartshelf_secondaryPanelBackButton").delegate("","click",function(a){f=!0});a.$("#shelfSwatchSection-size_name").length&&a.$("#shelfSwatchSection-size_name").delegate("","click",function(a){f=!0});a.$.Coral_ClickAddOffer=function(b){a.$.extend(b,{data:JSON.stringify(b.data),
dataType:"json",type:"POST",contentType:"application/json",headers:{"Content-Encoding":"amz-1.0","X-Amz-Target":b.operation},success:function(b){a.$("#beautyLocalPromo_content").addClass("aok-hidden");a.$("#beautyLocalPromo_postSuccessContent").removeClass("aok-hidden");d++},error:function(b){a.$("#beautyLocalPromo_offerDetails").addClass("aok-hidden");a.$("#beautyLocalPromo_content").addClass("aok-hidden");a.$("#beautyLocalPromo_postFailureRetryContent").removeClass("aok-hidden")},complete:function(){a.$("#beautyLocalPromo_addOffer_spinner").addClass("aok-hidden")}});
return a.$.ajax(b)};a.$.BeautyService_ClickAddOffer=function(b){a.$.extend(b,{url:b.urlPort,operation:"com.amazon.beauty.service.BeautyService."+b.operation});return a.$.Coral_ClickAddOffer(b)};a.$.Coral_UpdateBusinessOfferViewCount=function(b){a.$.extend(b,{data:JSON.stringify(b.data),dataType:"json",type:"POST",contentType:"application/json",headers:{"Content-Encoding":"amz-1.0","X-Amz-Target":b.operation},success:function(){},error:function(){},complete:function(){}});return a.$.ajax(b)};a.$.BeautyService_UpdateBusinessOfferViewCount=
function(b){a.$.extend(b,{url:b.urlPort,operation:"com.amazon.beauty.service.BeautyService."+b.operation});return a.$.Coral_UpdateBusinessOfferViewCount(b)};a.declarative("pro-beauty-add-local-promo-offer-to-cart","click",function(){c.addClass("aok-hidden");a.$("#beautyLocalPromo_addOffer_spinner").removeClass("aok-hidden");a.$.BeautyService_ClickAddOffer({urlPort:e,operation:"AddLocalPromoOffer",data:{encryptedPromotionID:h,customerID:k,marketplaceID:l,businessOfferID:g,asin:m}})});a.declarative("pro-beauty-add-local-promo-offer-failure-retry",
"click",function(){c.removeClass("aok-hidden");a.$("#beautyLocalPromo_offerDetails").removeClass("aok-hidden");a.$("#beautyLocalPromo_content").removeClass("aok-hidden");a.$("#beautyLocalPromo_postFailureRetryContent").addClass("aok-hidden")})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageMiraiAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(e){var h=window.AmazonUIPageJS||window.P,R=h._namespace||h.attributeErrors,c=R?R("TurboCheckoutBaseAssets",""):h;c.guardFatal?c.guardFatal(e)(c,window):c.execute(function(){e(c,window)})})(function(e,h,R){"use strict";e.when("A","turbo-checkout-csm","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-address-id",function(c,a,b){function k(b){for(var c=0;c<b.length;c++){var k=d(b[c]);if(0<k.length)return a.logCount("turboCheckoutAddressSelectorIndex"+c),k}a.logCount("turboCheckoutAddressSelectorMissing");
return d()}var d=c.$;return{getAddressId:function(){return k(b.get(b.KEYS.ADDRESS_INPUT_SELECTORS)).val()||""},getOneClickAddressId:function(){var a=b.get(b.KEYS.ONE_CLICK_ADDRESS_INPUT_SELECTORS);return k(a).val()||""},set:function(a){k(b.get(b.KEYS.ADDRESS_INPUT_SELECTORS)).val()!==a&&k(b.get(b.KEYS.ADDRESS_INPUT_SELECTORS)).val(a).trigger("change",[a])}}});"use strict";e.when("jQuery","turbo-checkout-page-ready").register("turbo-checkout-page-load-spinner",function(c){function a(){0!==c("#turbo-checkout-auto-load-spinner-container").length&&
(c("#turbo-checkout-auto-load-spinner-container").remove(),k.unbind("touchmove touchstart touchend touchcancel click scroll",b))}function b(a){a.preventDefault();a.stopPropagation()}var k=c("body");-1!==h.location.href.indexOf("trb_open\x3d1")&&(k.bind("touchmove touchstart touchend touchcancel click scroll",b),k.append("\x3cdiv id\x3d'turbo-checkout-auto-load-spinner-container' class\x3d'turbo-checkout-auto-load-spinner-container'\x3e\x3cdiv id\x3d'turbo-checkout-auto-load-circle-container' class\x3d'turbo-checkout-auto-load-circle-container'\x3e\x3cdiv id\x3d'turbo-checkout-auto-load-spinner' class\x3d'a-spinner a-spinner-medium turbo-checkout-auto-load-spinner'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"),
setTimeout(a,5E3));return{removePageLoadSpinner:a}});"use strict";e.when("turbo-checkout-page-ready").execute(function(){e.declare("turbo-eligibility-override",!1)});"use strict";e.when("turbo-configuration","turbo-checkout-ref-tagger","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-urls",function(c,a,b){function k(b,d,k,p,q){var e="?"+a.generateRefTag("detail",a.ACTIONS.BUY_NOW)+"\x26pipelineType\x3d"+b,m="";"campusInstantFulfillment"===b&&(m=m+(d?"\x26fetchToken\x3d"+
d:"")+(k?"\x26source\x3d"+k:""));b=e+m;d=c.get(c.KEYS.DEVICE_OVERRIDE);return b+(d?"\x26devicestring-override\x3d"+d:"")+g(p,q)}function d(a,b){return"campusInstantFulfillment"===a||b?"":"\x26temporaryAddToCart\x3d1"}function g(a,c){var d="";b.isNonEmptyString(a)&&(d+="\x26pageRequestId\x3d"+a);b.isNonEmptyString(c)&&(d+="\x26pageSessionId\x3d"+c);return d}return{buildInitiatePathWith:function(a,b,c,g,q,e,m,n){b="/checkout/turbo-initiate"+k(a,b,c,m,n)+("\x26weblab\x3d"+q);b+=g?"\x26oneClick\x3d1":
"";return b+(e?"\x26checkEligibilityOnly\x3dtrue":"")+d(a,g)},buildConfirmPathWith:function(a,b,c,g,q,e,m){return"/checkout/turbo-initiate/confirm"+k(a,b,c,e,m)+("\x26weblab\x3d"+g)+d(a,q)},buildLogPageHitPathWith:function(b,c){return"/checkout/log-page-hit?"+a.generateRefTag(b,a.ACTIONS.CLOSE,c)},buildTriggerWeblabPathWith:function(b,c,d,k){return"/checkout/triggerWeblab?"+a.generateRefTag("detail",a.ACTIONS.BUY_NOW)+("\x26weblab\x3d"+b)+"\x26weblabAllocation\x3d"+c+g(d,k)}}});"use strict";e.when("turbo-checkout-page-ready").register("turbo-callback-list",
function(){function c(){var a=[];this.callAll=function(){for(var b=0;b<a.length;b++){var c=a[b];c.apply(c,arguments)}};this.push=function(b){if("function"!==typeof b)throw"Invalid callback. Expected typeof 'callback' to be 'function'. typeof \x3d "+typeof b;-1===a.indexOf(b)&&a.push(b)};this.remove=function(b){b=a.indexOf(b);-1!==b&&a.splice(b,1)}}return{create:function(){return new c}}});"use strict";e.when("turbo-callback-list","turbo-checkout-page-ready").register("turbo-filtered-callback-list",
function(c){function a(a){var k=c.create();this.callAll=k.callAll;this.remove=k.remove;this.push=function(c){(c=c[a])&&"function"===typeof c&&k.push(c)}}return{create:function(b){if(!b||"string"!==typeof b)throw"Invalid filter parameter. Expected 'filter' to be a non empty string. typeof \x3d "+typeof b+" value \x3d "+b;return new a(b)}}});"use strict";e.when("A","turbo-checkout-page-ready").register("turbo-checkout-ajax-wrapper",function(c){return{load:function(){return c.ajax.apply(c.ajax,arguments)},
loadWithJQXHR:function(){return c.$.ajax.apply(c.$.ajax,arguments)},createXHRRequest:function(){return h.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}}});"use strict";e.when("A","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-auto-open",function(c,a){function b(){return"autoOpenDisabled"!==r}function k(){return"autoOpenReadyToBeOpened"===r}function d(){k()&&(p(),b()&&(r="autoOpenInProgress"))}var g=c.$,r="autoOpenDisabled",e="trb_open trb_addr trb_qty trb_warrAsin trb_auth trb_snsOptIn trb_snsFreq trb_snsOffer trb_sid".split(" "),
f={},p=function(){};return{setup:function(b){var w=a.getUrlQueryParam("trb_open");if(void 0!==w&&w&&"1"===w){a.logDebug("turbo-checkout-auto-open","autoOpen starting...");r="autoOpenReadyToBeOpened";var m=h.location.href;g.each(e,function(b,c){b=a.getUrlQueryParam(c);f[c]=b;m=a.removeQueryParam(c,b,m);a.logDebug("turbo-checkout-auto-open","autoOpen params: "+c+"\x3d"+b)});a.replaceHistory(m);"function"===typeof b?p=b:a.logError("Initiate action must be supplied, and it must be a function.");c.on("turbo:checkout:prefetcher:state:dataStale",
d)}else r="autoOpenDisabled";a.logDebug("turbo-checkout-auto-open","autoOpen state: "+r);return k()},isAutoOpenEnabled:b,isAutoOpenReadyToBeOpened:k,getAddressId:function(){return f.trb_addr},getQuantity:function(){return f.trb_qty},getWarrantyAsin:function(){return f.trb_warrAsin},getSubscribeAndSaveInputs:function(){return{optIn:f.trb_snsOptIn,frequency:f.trb_snsFreq,offerId:f.trb_snsOffer}}}});"use strict";e.when("turbo-checkout-page-ready").register("turbo-checkout-utils",function(){function c(){return navigator.userAgent}
return{logError:function(a){e.log(a,"ERROR","TurboCheckoutBaseAssets:turbo-checkout-utils")},logWarning:function(a,b){e.log(a,"WARN",b||"turbo-checkout-utils")},logDebug:function(){},getUserAgent:c,isAndroid:function(){return!!c().match(/[a|A]ndroid/)},isIPhone:function(){return!!c().match(/iPhone/)},isIPad:function(){return!!c().match(/iPad/)},isInternetExplorer:function(){return!!c().match(/MSIE/)},createFQDN:function(a){/^http/.test(a)||(a=h.location.origin?h.location.origin+a:h.location.protocol+
"//"+h.location.hostname+":"+h.location.port+a);return a},getUrlQueryParam:function(a,b){b||(b=h.location.href);a=a.replace(/[\[\]]/g,"\\$\x26");return(a=(new RegExp("[?\x26]"+a+"(\x3d([^\x26#]*)|\x26|#|$)")).exec(b))?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":void 0},removeQueryParam:function(a,b,c){var d=c;a&&b&&c&&(a=a+"\x3d"+b,d=c.replace(new RegExp("\\?"+a+"[\x26]?","g"),"?"),d=d.replace(new RegExp("[\x26]?"+a,"g"),""));return d},replaceHistory:function(a){h.history.pushState&&h.history.replaceState(null,
h.title,a)},isNonEmptyString:function(a){return"string"===typeof a&&0<a.length}}});"use strict";e.when("turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-csm",function(c){function a(a){"undefined"!==typeof h.ue_t0&&h.ue.count(a,Date.now()-h.ue_t0)}var b=0,k=[];return{createScope:function(){return"chk_turbo_"+ ++b},markClick:function(a){h.uet("tc",a);h.ues("ctb",a,"1")},markFramePopulated:function(a){h.ues("t0",a,new Date)},markFrameHtmlRendered:function(a){h.uet("af",a)},
markCriticalFeature:function(a){h.uet("cf",a);h.ues("cf_set",a,"1");h.ues("id",a)&&h.uex("ld",a)},setRequestId:function(a,b){h.ues("id",a,b);h.ues("cf_set",a)&&h.uex("ld",a)},logCount:function(b,g){g=g||1;c.logDebug("Logging counter "+b+" with value "+g);if(h.ue&&h.ue.count){var r=b+"_time";h.ue.count(b,g);a(r);for(var e=0;e<k.length;++e)h.ue.count(b+"."+k[e],g),a(r+"."+k[e])}},addCounterExtraSuffix:function(a){k.push(a)}}});"use strict";e.when("A","turbo-checkout-csm","turbo-checkout-page-ready").register("turbo-checkout-counter",
function(c,a){var b=0,k=0,d=0,g=0,r=0,e=0,f="u";c.on("turbo:checkout:sheet:beforeOpen",function(){a.logCount("turboCheckoutSheetOpen",b);"u"!==f?(++r,a.logCount("turboCheckoutPrefetchUsed",r),"p"===f?a.logCount("turboCheckoutPrefetchUsedInProgress",r):a.logCount("turboCheckoutPrefetchUsedFull",r)):(++e,a.logCount("turboCheckoutPrefetchMissing",e))});c.on("turbo:checkout:sheet:beforeClose",function(){++k;a.logCount("turboCheckoutSheetClose",k)});c.on("turbo:checkout:prefetcher:state:dataPrefetching",
function(){a.logCount("turboCheckoutPrefetchRequested",d);f="p"});c.on("turbo:checkout:prefetcher:state:dataFresh",function(){++g;a.logCount("turboCheckoutPrefetchAvailable",g);f="a"});c.on("turbo:checkout:prefetcher:state:dataStale",function(){f="u"});return{incrementSheetOpenedCounter:function(){b++},incrementPrefetchCounter:function(){d++},getSheetOpenCount:function(){return b},getPrefetchCount:function(){return d}}});"use strict";e.when("turbo-checkout-page-ready").register("turbo-checkout-cacher",
function(){return{createCache:function(c){var a=!1,b;return function(){a||(b=c(),a=!0);return b}}}});"use strict";e.when("A","turbo-checkout-counter","turbo-checkout-page-ready").register("turbo-checkout-ref-tagger",function(c,a){return{generateRefTag:function(b,c,d){b="ref_\x3dchk_"+b+"_"+c+"_"+a.getPrefetchCount()+"*"+a.getSheetOpenCount();return d?b+"_"+d:b},ACTIONS:{BUY_NOW:"buyNow",CLOSE:"close"},TAGS:{TOUCH:"touch",TOUCH_X:"touchX",BACK:"back",ROTATION:"rotation"}}});"use strict";e.when("A",
"turbo-checkout-page-ready").register("turbo-checkout-prefetch-timer",function(c){function a(){g||(g=!0,c.trigger("turbo:checkout:timer:onTimeout"))}function b(){if(g)return!0;var a=(new Date).getTime();return d?6E5<=a-d:!1}var k,d,g=!1;return{startTimer:function(){k||(k=h.setTimeout(a,6E5));d||(d=(new Date).getTime())},isTimeout:b,resetTimer:function(){h.clearTimeout(k);g=!1;d=k=null},checkTimeout:function(){b()&&a()}}});"use strict";e.when("A","jQuery","turbo-checkout-csm","turbo-checkout-utils",
"turbo-checkout-state-handler","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-buy-now-button",function(c,a,b,k,d,g){function r(a){k.logDebug("turbo-checkout-buy-now-button",a)}function e(){0!==f().length&&(f().unbind("click.turboCheckout"),f().bind("click.turboCheckout",p))}function f(){return a(d.getInitiateSelector())}function p(a){r("Buy now button clicked");b.logCount("turboCheckoutBuyNowClicked");if(v)v=!1,r("Buy now button callbacks supressed");else{r("Calling buy now button callbacks...");
for(var c=!1,d=0;d<u.length;d++)c=c||u[d]();c?(r("Supressing default buy now button action"),a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),a=!0):a=void 0;if(a)return!1}f().closest("form").attr("data-action",q());b.logCount("turboCheckoutBuyNowDefault");return!0}function q(){return f().attr("name")||"submit.buy-now"}function h(a){for(var b=u.length-1;0<=b;--b)u[b]===a&&u.splice(b,1)}function m(){for(var b=0;b<n.length;b++){var c=n[b];r("Unbound configured event '"+c+"' from buy now button");
f().unbind(c);a(document.body).undelegate(d.getInitiateSelector(),c)}f().click()}var n=g.get(g.KEYS.CONFLICTING_INITIATE_LISTENERS),u=[],v=!1;c.on("turbo:checkout:clickInitiate",m);c.on("a:pageUpdate",e);e();b.logCount("turboCheckoutBuyNowButtonBound");return{registerOnClickCallback:function(a){h(a);u.push(a)},deregisterOnClickCallback:h,executeOriginalBuyNowAction:function(){v=!0;c.trigger("turbo:checkout:buyNowDisabled");c.trigger("turbo:checkout:clickInitiate")},executeTurboBuyNowAction:function(){v=
!1;m()},getSubmitAction:q}});"use strict";e.when("A","turbo-checkout-utils","turbo-checkout-buy-now-button","turbo-checkout-page-ready").register("turbo-checkout-buy-now-integration",function(c,a,b){function k(b,c){a.logDebug(b,"turbo-checkout-buy-now-integration",c)}var d=c.$,g=[];c.on("turbo:checkout:page:reappear",function(){k("Removing additional form inputs from form",g);for(var a;void 0!==(a=g.shift());)a.remove()});return{isBuyNow:function(a){return a instanceof d&&a.attr("data-action")===
b.getSubmitAction()},checkoutWith:function(b,c){if(Array.isArray(b)&&c instanceof d){var f;f=c;for(var e=1;0<f.find('input[name\x3d"asin.'+e+'"]').length||0<f.find('input[name\x3d"offeringID.'+e+'"]').length;)e++;f=e;for(var e=[],q=0;q<b.length;q++){var h=b[q];if(void 0!==h&&h.asin&&h.offerListingId){var m=f,h=[d("\x3cinput /\x3e",{type:"hidden",name:"asin."+m,value:h.asin}),d("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+m,value:h.offerListingId}),d("\x3cinput /\x3e",{type:"hidden",name:"quantity."+
m,value:h.quantity||1})];Array.prototype.push.apply(e,h);f++}else k('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!',h),a.logError('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!')}q=c.find('input[name\x3d"itemCount"]');1===q.length?q.val(f):c.append(d("\x3cinput /\x3e",{type:"hidden",name:"itemCount",value:f}));k("Appended additional buy now inputs.",e);c.append.apply(c,
e);g=e}else f="Inputs are invalid. Expected array and jQuery object. lineItems \x3d "+b+" $form \x3d "+c,k(f,arguments),a.logError(f)}}});"use strict";e.when("turbo-checkout-page-ready").register("turbo-configuration-keys",function(c){var a={EXPERIMENT_WEBLAB:"EXPERIMENT_WEBLAB",EXPERIMENT_TREATMENT:"EXPERIMENT_TREATMENT",NON_PRIME_EXPERIMENT_WEBLAB:"NON_PRIME_EXPERIMENT_WEBLAB",NON_PRIME_EXPERIMENT_TREATMENT:"NON_PRIME_EXPERIMENT_TREATMENT",BUY_NOW_BUTTON_SELECTOR:"BUY_NOW_BUTTON_SELECTOR",QUANTITY_INPUT_SELECTOR:"QUANTITY_INPUT_SELECTOR",
QUANTITY_SELECT_SELECTOR:"QUANTITY_SELECT_SELECTOR",ADDRESS_INPUT_SELECTORS:"ADDRESS_INPUT_SELECTORS",ONE_CLICK_ADDRESS_INPUT_SELECTORS:"ONE_CLICK_ADDRESS_INPUT_SELECTORS",WARRANTY_CHECKBOX_INPUT_SELECTOR:"WARRANTY_CHECKBOX_INPUT_SELECTOR",WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR:"WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR",WARRANTY_ASIN_INPUT_NAME:"WARRANTY_ASIN_INPUT_NAME",WARRANTY_OFFER_INPUT_SELECTOR:"WARRANTY_OFFER_INPUT_SELECTOR",TURBO_STATE_CHANGE_AUI_EVENTS:"TURBO_STATE_CHANGE_AUI_EVENTS",
TWISTER_PAGE_UPDATE_AUI_EVENT:"TWISTER_PAGE_UPDATE_AUI_EVENT",QUANTITY_UPDATED_AUI_EVENT:"QUANTITY_UPDATED_AUI_EVENT",PREFETCH_TREATMENT:"PREFETCH_TREATMENT",INTELLIGENT_PREFETCH_TREATMENT:"INTELLIGENT_PREFETCH_TREATMENT",SHADOW_PREFETCH_TREATMENT:"SHADOW_PREFETCH_TREATMENT",NO_PREFETCH_TREATMENT:"NO_PREFETCH_TREATMENT",BUY_NOW_ONLY_TREATMENT:"BUY_NOW_ONLY_TREATMENT",IS_DEVICE_FILTER_REQUIRED:"IS_DEVICE_FILTER_REQUIRED",IS_SIGN_IN_SUPPORTED:"IS_SIGN_IN_SUPPORTED",USES_MASH_WILL_REAPPEAR:"USES_MASH_WILL_REAPPEAR",
SHOW_SIGN_IN_INTERFACE:"SHOW_SIGN_IN_INTERFACE",IFRAME_ID:"IFRAME_ID",EXTEND_ELIGIBLE_STATE:"EXTEND_ELIGIBLE_STATE",VIEW_ADAPTER:"VIEW_ADAPTER",PAGE_STATE_PARSING_ROOT_NODE_ID:"PAGE_STATE_PARSING_ROOT_NODE_ID",TURBO_PAGE_STATE_KEY:"TURBO_PAGE_STATE_KEY",DEVICE_OVERRIDE:"DEVICE_OVERRIDE",CONFLICTING_INITIATE_LISTENERS:"CONFLICTING_INITIATE_LISTENERS",VAS_CHANGE_EVENTS:"VAS_CHANGE_EVENTS",VAS_CHECKBOX_SELCTOR:"VAS_CHECKBOX_SELCTOR",CHECKBOX_EXCLUSION_ROOT_NODES:"CHECKBOX_EXCLUSION_ROOT_NODES",SNS_OPT_IN_CHECKBOX_SELECTOR:"SNS_OPT_IN_CHECKBOX_SELECTOR",
SNS_OPT_IN_CHANGE_AUI_EVENT:"SNS_OPT_IN_CHANGE_AUI_EVENT",SNS_FREQ_INPUT_SELECTOR:"SNS_FREQ_INPUT_SELECTOR",SNS_OFFER_INPUT_SELECTOR:"SNS_OFFER_INPUT_SELECTOR",MASH_ADAPTER:"MASH_ADAPTER",OVERRIDE_ELIGIBILITY:"OVERRIDE_ELIGIBILITY",validate:function(b){if("string"!==typeof b||!a[b])throw"The key '"+b+"' is not defined within 'turbo-configuration-keys'.";}};return a});"use strict";e.when("A","turbo-configuration-keys","turbo-device-configuration","turbo-client-configuration","turbo-eligibility-override",
"turbo-checkout-page-ready").register("turbo-configuration",function(c,a,b,k,d){function g(a,b){h[a]=r(a)||b}function r(a){var c=k[a];a=b[a];if(e(c))return c;if(e(a))return a}function e(a){return"boolean"===typeof a||a}function f(a){if(!e(k[a])&&!e(b[a]))throw"Required configuration override for key '"+a+"' is missing";h[a]=r(a)}var h;return{get:function(b){a.validate(b);var c;h||(h={},f(a.EXPERIMENT_WEBLAB),f(a.EXPERIMENT_TREATMENT),f(a.NON_PRIME_EXPERIMENT_WEBLAB),f(a.NON_PRIME_EXPERIMENT_TREATMENT),
f(a.SHOW_SIGN_IN_INTERFACE),f(a.EXTEND_ELIGIBLE_STATE),f(a.VIEW_ADAPTER),g(a.BUY_NOW_BUTTON_SELECTOR,"#buy-now-button"),g(a.QUANTITY_SELECT_SELECTOR,'select[name\x3d"quantity"]'),g(a.QUANTITY_INPUT_SELECTOR,'input[name\x3d"quantity"]'),g(a.ADDRESS_INPUT_SELECTORS,["#unifiedLocation1ClickAddress","#unifiedLocationAddress"]),g(a.ONE_CLICK_ADDRESS_INPUT_SELECTORS,["#unifiedLocation1ClickAddress","#addressID"]),g(a.WARRANTY_CHECKBOX_INPUT_SELECTOR,".mbb-checkbox input[name\x3dmbba]"),g(a.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR,
".mbb-checkbox-column"),g(a.WARRANTY_ASIN_INPUT_NAME,"mbba"),g(a.WARRANTY_OFFER_INPUT_SELECTOR,"#mbb-offering-id"),g(a.SNS_OPT_IN_CHECKBOX_SELECTOR,"#snsOptIn_div #snsOptInCheckbox"),g(a.SNS_FREQ_INPUT_SELECTOR,"#snsOptIn_div .rcxOrdFreq"),g(a.SNS_OFFER_INPUT_SELECTOR,"#snsOptIn_div .snsOnmlOfferId"),g(a.TURBO_STATE_CHANGE_AUI_EVENTS,["a:pageUpdate","LocationUX_OnAddressChange"]),g(a.TWISTER_PAGE_UPDATE_AUI_EVENT,"a:pageUpdate"),g(a.SNS_OPT_IN_CHANGE_AUI_EVENT,"sns-declarative-data-update"),g(a.QUANTITY_UPDATED_AUI_EVENT,
"a:dropdown:mobileQuantityDropDown:select"),g(a.PREFETCH_TREATMENT,"PREFETCH_DISABLED"),g(a.INTELLIGENT_PREFETCH_TREATMENT,"INTELLIGENT_PREFETCH_DISABLED"),g(a.SHADOW_PREFETCH_TREATMENT,"SHADOW_PREFETCH_DISABLED"),g(a.NO_PREFETCH_TREATMENT,"T1"),g(a.BUY_NOW_ONLY_TREATMENT,"BUY_NOW_LAUNCHED"),g(a.IS_DEVICE_FILTER_REQUIRED,!1),g(a.IS_SIGN_IN_SUPPORTED,!0),g(a.USES_MASH_WILL_REAPPEAR,!1),g(a.IFRAME_ID,"turbo-checkout-iframe"),g(a.PAGE_STATE_PARSING_ROOT_NODE_ID,"turboState"),g(a.TURBO_PAGE_STATE_KEY,
"turbo-checkout-page-state"),g(a.DEVICE_OVERRIDE,""),g(a.CONFLICTING_INITIATE_LISTENERS,[]),g(a.CHECKBOX_EXCLUSION_ROOT_NODES,["#simpleBundle_feature_div"]),g(a.MASH_ADAPTER,""),g(a.VAS_CHANGE_EVENTS,["turbo:checkout:sheet:doClose"]),g(a.VAS_CHECKBOX_SELCTOR,"#vas-checkbox-input"),g(a.VAS_CHANGE_EVENTS,["turbo:checkout:sheet:doClose"]),g(a.VAS_CHECKBOX_SELCTOR,"#vas-checkbox-input"),g(a.OVERRIDE_ELIGIBILITY,d));c=h;return c[b]},KEYS:c.copy(a)}});"use strict";e.when("turbo-checkout-utils","turbo-checkout-weblab-allocation",
"turbo-checkout-state-handler","turbo-checkbox-exclusion-listener","turbo-checkout-content-loader","turbo-checkout-device-filter","turbo-callback-list","turbo-checkout-auto-open","turbo-checkout-page-ready").register("turbo-base-eligible-state",function(c,a,b,k,d,g,r,e){function f(){v=!0}function h(){v=!1}function q(){var c=new w;g.isDeviceTurboEligible()||c.invalidate("Device is NOT eligible");d.isError()&&!a.isNoPrefetch()&&b.getPrefetchEnabled()&&!a.isIntelligentPrefetch()&&c.invalidate("Prefetch failed");
b.isProductTurboEligible()||c.invalidate("Product is NOT eligible");e.isAutoOpenEnabled()||v||c.invalidate("Cheetah eligibility response is false");a.isControl()&&c.invalidate("Weblab is in CONTROL");a.isBuyNowOnly()&&c.invalidate("Weblab is in buy now only treatment");b.isShadowCallsOnly()&&c.invalidate("Turbo state indicates shadow mode");b.vasTwisterSelected()&&c.invalidate("Turbo state indicates the VAS twister is present");k.isAnyCheckboxChecked()&&c.invalidate("Exclusion case checkbox is checked");
n.callAll(c);c.logInvalidState();return c.canShow()}function w(){var a=!0,b=[];this.invalidate=function(c){a=!1;b.push(c)};this.logInvalidState=function(){a||c.logDebug("turbo-base-eligible-state","Cannot show turbo because: "+b)};this.canShow=function(){return a}}function m(a){u.callAll(q(),a)}var n=r.create(),u=r.create(),v=!1;return{addStateCheck:function(a){n.push(a)},canShow:q,registerStateChangeCallback:function(a){u.push(a)},onStateChange:m,setup:function(){d.registerCallback({onTurboEligible:f,
onFinish:f,onTurboIneligible:h});b.registerCallback(m);k.onStateChange(m)}}});"use strict";e.when("A","turbo-callback-list","turbo-checkout-page-ready").register("turbo-checkout-base-view",function(c,a){function b(b){if("string"!==typeof b)throw"Parameter 'iFrameContainerSelector' is not a string.";this.onBoundsAdjustedCallbacks=a.create();this.IFRAME_CONTAINER_SELECTOR=b}var k=c.$;b.prototype.updateBounds=function(a){if("number"!==typeof a)throw'Parameter "iFrameContentHeight" is not a number. Cannot validate bounds.';
var b=this.$getIFrameContainer().height(),c=a-b;a=b+c;0!==c&&(this.$getIFrameContainer().height(a),c=parseInt(this.$getIFrameContainer().css("min-height"),10),a=a>c?a:c,b!==a&&this.onBoundsAdjustedCallbacks.callAll(a))};b.prototype.$getIFrameContainer=function(){return k(this.IFRAME_CONTAINER_SELECTOR)};b.prototype.pushBoundsAdjustedCallback=function(a){this.onBoundsAdjustedCallbacks.push(a)};return{extend:function(){function a(){b.apply(this,arguments)}a.prototype=Object.create(b.prototype);return a.prototype.constructor=
a}}});"use strict";e.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-eligible-state-check",function(c){c.get(c.KEYS.EXTEND_ELIGIBLE_STATE)||e.when("turbo-base-eligible-state").register("turbo-checkout-eligible-state",function(a){return{canShow:a.canShow,registerStateChangeCallback:a.registerStateChangeCallback,setup:a.setup}})});"use strict";e.when("A","turbo-configuration","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-auto-open","turbo-checkout-address-id","turbo-callback-list",
"turbo-checkout-page-ready").register("turbo-checkout-state-handler",function(c,a,b,k,d,g,e){function h(a){k.logDebug("turbo-checkout-state-handler",a)}function f(){if(!l)throw Error("No page state available.");}function p(){var b=a.get(a.KEYS.QUANTITY_UPDATED_AUI_EVENT);c.on(b,function(a){(a=parseInt(a.value,10))&&!l?x():"object"===typeof l.inputs&&a&&l.inputs.quantity!==a&&(l.inputs.quantity=a,l.inputs.warrantyQuantity=l.inputs.hasWarranty?a:void 0,x())})}function q(){t(I).click(D);var b=a.get(a.KEYS.TWISTER_PAGE_UPDATE_AUI_EVENT);
c.on(b,function(){t(I).click(D)})}function w(){for(var b=a.get(a.KEYS.VAS_CHANGE_EVENTS),d=0;d<b.length;d++)c.on(b[d],function(){t(a.get(a.KEYS.VAS_CHECKBOX_SELCTOR)).prop("checked")!==B()&&D()})}function m(){var b,c=t("#"+a.get(a.KEYS.PAGE_STATE_PARSING_ROOT_NODE_ID));c&&1<=c.length&&(c=c.find("script[data-a-state*\x3d'"+E+"']"))&&1<=c.length&&(b=t.parseJSON(c.first().text()));n(b);u(b);y(b);b&&(b.inputs.vasSelected=1===t(a.get(a.KEYS.VAS_CHECKBOX_SELCTOR)).length&&t(a.get(a.KEYS.VAS_CHECKBOX_SELCTOR)).prop("checked"));
A(b);return b}function n(a){var b=G()?g.getOneClickAddressId():g.getAddressId();a&&a.inputs&&b&&(a.inputs.addressId=b)}function u(a){var b=v();a&&a.inputs&&b&&(a.inputs.quantity=b)}function v(){var a=parseInt(t(J).val(),10)||parseInt(t(K).val(),10);a||(h("Input quantity and dropdown quantity are undefined or invalid. Defaulting to 1. pageQuantity \x3d "+a),b.logCount("turboCheckoutNoQuantityFromPage"),a=1);return a}function y(a){if(a){var c;c={hasWarranty:!1,warrantyAsin:void 0,warrantyOid:void 0,
warrantyQuantity:void 0};if(0<z().length){var d=z().parents(F).find("input[name^\x3d"+L+"]").val(),g=t(O).val(),f=v();d&&g&&f?c={hasWarranty:!0,warrantyAsin:d,warrantyOid:g,warrantyQuantity:f}:(b.logCount("turboCheckoutIncompleteWarrantyInputs"),k.logError("Incomplete input data for the selected warranty checkbox - asin:"+d+", offerId:"+g+", quantity:"+f))}a.inputs.hasWarranty=c.hasWarranty;a.inputs.warrantyAsin=c.warrantyAsin;a.inputs.warrantyOid=c.warrantyOid;a.inputs.warrantyQuantity=c.warrantyQuantity}}
function A(a){var b,c,d;if(a){b=t(M);if(0===b.length)d=c=b=void 0;else if(b=b.is(":checked"))c=parseInt(t(N).val(),10),d=t(ca).val();a.inputs.hasSns=void 0!==b;a.inputs.snsOptIn=b;a.inputs.snsFrequency=c;a.inputs.snsOfferId=d}}function z(){return t(I+":checked").first()}function B(){return l&&l.inputs?l.inputs.vasSelected||!1:!1}function x(){c.trigger("turbo:checkout:product:onChange");T.callAll()}function D(){var a=m(),b;a:{if(l||a)if(!l&&a||l&&!a||a.inputs.oid!==l.inputs.oid||a.inputs.a!==l.inputs.a||
a.inputs.quantity!==l.inputs.quantity||a.inputs.addressId!==l.inputs.addressId||a.inputs.hasWarranty!==l.inputs.hasWarranty||a.inputs.warrantyAsin!==l.inputs.warrantyAsin||a.inputs.warrantyOid!==l.inputs.warrantyOid||a.inputs.warrantyQuantity!==l.inputs.warrantyQuantity||a.inputs.vasSelected!==l.inputs.vasSelected||a.inputs.snsOptIn!==l.inputs.snsOptIn||a.inputs.snsFrequency!==l.inputs.snsFrequency||a.inputs.snsOfferId!==l.inputs.snsOfferId){b=!0;break a}b=!1}b&&(l=a,x())}function G(){return 1===
t("#oneclick-preview-link").length}var t=c.$,E=a.get(a.KEYS.TURBO_PAGE_STATE_KEY),K=a.get(a.KEYS.QUANTITY_SELECT_SELECTOR),J=a.get(a.KEYS.QUANTITY_INPUT_SELECTOR),I=a.get(a.KEYS.WARRANTY_CHECKBOX_INPUT_SELECTOR),F=a.get(a.KEYS.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR),L=a.get(a.KEYS.WARRANTY_ASIN_INPUT_NAME),O=a.get(a.KEYS.WARRANTY_OFFER_INPUT_SELECTOR),M=a.get(a.KEYS.SNS_OPT_IN_CHECKBOX_SELECTOR),N=a.get(a.KEYS.SNS_FREQ_INPUT_SELECTOR),ca=a.get(a.KEYS.SNS_OFFER_INPUT_SELECTOR),T=e.create(),l,S=
a.get(a.KEYS.TURBO_STATE_CHANGE_AUI_EVENTS);(l=m())&&0!==l.length||b.logCount("turboCheckoutStateNotDefined");return{isProductTurboEligible:function(){var b=l&&"object"===typeof l&&l.inputs&&"object"===typeof l.inputs;b||h("Turbo state object is NOT valid");b&&(b=l.inputs,(b="string"===typeof b.a&&"string"===typeof b.oid&&1<=parseInt(b.quantity,10))||h("Turbo state.inputs are NOT valid"));b&&((b=a.get(a.KEYS.OVERRIDE_ELIGIBILITY)||l&&l.eligibility&&!0===l.eligibility.isEligible)||h("Turbo state eligibility value is FALSE"));
return b},getAsin:function(){f();return l.inputs.a},getOfferListingId:function(){f();return l.inputs.oid},getQuantity:function(){f();return parseInt(l.inputs.quantity,10)||1},getAddressId:function(){f();return l.inputs.addressId||(G()?g.getOneClickAddressId():g.getAddressId())||void 0},getWeblabAllocation:function(){if(l&&(l.turboWeblabTreatment||""===l.turboWeblabTreatment))return l.turboWeblabTreatment;b.logCount("turboCheckoutWeblabTreatmentNotDefinedInState");return a.get(a.KEYS.EXPERIMENT_TREATMENT)},
registerCallback:function(a){T.push(a)},startMonitoringPage:function(){if(d.isAutoOpenEnabled()){var b=d.getQuantity();void 0!==b&&(t(K).val(b).change(),t(J).val(b),u(l));b=d.getAddressId();void 0!==b&&(g.set(b),n(l));(b=d.getWarrantyAsin())&&0===z().length&&(t(F+" input[name^\x3d"+L+"][value\x3d"+b+"]").parents(F).find(I).prop("checked",!0),y(l));var f=d.getSubscribeAndSaveInputs(),b=t(M);if(f&&0!==b.length){var e="1"===f.optIn?!0:!1,f=f.frequency,r=t(N);b.prop("checked")!==e&&b.prop("checked",e).change();
!0===e&&r.val()!==f+""&&r.val(f).change();A(l)}}if(c.$.isArray(S))for(b=0;b<S.length;b++){e=S[b];if("string"!==typeof e)throw"Invalid eventId. Should be typeof 'string'. typeof \x3d "+typeof e;c.on(e,D)}else k.logError('"detailPageEvents" is not array. Turbo cannot respond to page update!');p();q();w();b=a.get(a.KEYS.SNS_OPT_IN_CHANGE_AUI_EVENT);c.on(b,D);x()},getWarrantyAsin:function(){f();return l.inputs.warrantyAsin},getWarrantyOfferListingId:function(){f();return l.inputs.warrantyOid},getWarrantyQuantity:function(){f();
return parseInt(l.inputs.warrantyQuantity,10)||void 0},getHasWarranty:function(){f();return l.inputs.hasWarranty},hasSubscribeAndSave:function(){f();return l.inputs.hasSns||!1},getSubscribeAndSaveOptIn:function(){f();return l.inputs.snsOptIn||!1},getSubscribeAndSaveFrequency:function(){f();return l.inputs.snsFrequency},getSubscribeAndSaveOfferId:function(){f();return l.inputs.snsOfferId},getRequestId:function(){return(l?l.inputs||{}:{}).requestId||""},getSessionId:function(){return(l?l.inputs||{}:
{}).sessionId||""},getExperimentName:function(){if(l&&l.turboWeblab)return l.turboWeblab;b.logCount("turboCheckoutWeblabNameNotDefinedInState");return a.get(a.KEYS.EXPERIMENT_WEBLAB)},isSignInSupported:function(){var b=(l?l.configurations||{}:{}).isSignInEnabled;if(void 0!==b)return!!b;b=a.get(a.KEYS.IS_SIGN_IN_SUPPORTED);h("isSignInEnabled state configuration is undefined. Defaulting to JS configuration of "+b);return b},getPipelineType:function(){f();return l.pipelineType||"turbo"},getFetchToken:function(){f();
return l.fetchToken||""},getSource:function(){f();return l.source||""},getStrings:function(){return l&&l.strings?l.strings:{}},isOneClick:G,getInitiateSelector:function(){return(l?l.configurations||{}:{}).initiateSelector||""},getPrefetchEnabled:function(){return(l?l.configurations||{}:{}).prefetchEnabled||!1},isShadowCallsOnly:function(){return!1},vasTwisterSelected:B}});"use strict";e.when("A","turbo-checkout-state-handler","turbo-configuration","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-weblab-allocation",
function(c,a,b,k){function d(){return a.getWeblabAllocation()||"C"}function g(){a.getExperimentName()||k.logError("Weblab allocation requested but no turbo state available or missing weblab field");return a.getExperimentName()}return{getAllocation:d,getExperimentName:g,isControl:function(){return"C"===d()},isBuyNowOnly:function(){return d()===b.get(b.KEYS.BUY_NOW_ONLY_TREATMENT)},isPrefetch:function(){return d()===b.get(b.KEYS.PREFETCH_TREATMENT)},isNoPrefetch:function(){var a=b.get(b.KEYS.NO_PREFETCH_TREATMENT);
return!!d().match(a)},isShadowCallsOnly:function(){return d()===b.get(b.KEYS.SHADOW_PREFETCH_TREATMENT)},isIntelligentPrefetch:function(){return d()===b.get(b.KEYS.INTELLIGENT_PREFETCH_TREATMENT)},isNonPrimeWeblab:function(){return g()===b.get(b.KEYS.NON_PRIME_EXPERIMENT_WEBLAB)}}});"use strict";e.when("A","jQuery","turbo-checkout-ajax-wrapper","turbo-checkout-utils","turbo-checkout-urls","turbo-checkout-csm","turbo-checkout-weblab-allocation","turbo-checkout-buy-now-button","turbo-configuration",
"turbo-checkout-state-handler","turbo-checkout-page-ready").register("turbo-checkout-weblab-trigger",function(c,a,b,k,d,g,e,h,f,p){function q(){c.on("turbo:checkout:prefetch:onTurboEligible",function(){D=!0;n()})}function w(){c.on("turbo:checkout:prefetch:onTurboIneligible",function(){D=!1;n()})}function m(){c.on("a:pageUpdate",function(){n()})}function n(){0===u().length?g.logCount("turboCheckoutBuyNowButtonMissing"):0===v().length&&g.logCount("turboCheckoutBuyNowFormMissing");0<v().length&&!p.isOneClick()&&
(D?(k.logDebug("turbo-checkout-weblab-trigger","Adding trigger to form: "+e.getAllocation()),A.val(e.getAllocation()),z.val(e.getExperimentName()),B.val(p.getRequestId()),x.val(p.getSessionId()),v().append(A,z,B,x)):(k.logDebug("turbo-checkout-weblab-trigger","Removing trigger from form: "+e.getAllocation()),A.remove(),z.remove(),B.remove(),x.remove()))}function u(){var b=f.get(f.KEYS.BUY_NOW_BUTTON_SELECTOR);return a(b)}function v(){return u().closest("form")}function y(){if(D&&!p.isOneClick()){k.logDebug("turbo-checkout-weblab-trigger",
"Calling cheetah to trigger: "+e.getAllocation());0<v().find(A).length||g.logCount("turboCheckoutTriggerMissing");var a=d.buildTriggerWeblabPathWith(e.getExperimentName(),e.getAllocation(),p.getRequestId(),p.getSessionId());b.load(a,{method:"POST",error:function(a,b,c){a&&204===a.http.status||g.logCount("turboCheckoutTriggerRecordingFailed")},abort:function(a){g.logCount("turboCheckoutTriggerRecordingFailed")}})}}var A,z,B,x,D=!1;return{setup:function(){A=a("\x3cinput/\x3e",{type:"hidden",name:"triggerTurboWeblab",
value:""});z=a("\x3cinput/\x3e",{type:"hidden",name:"triggerTurboWeblabName",value:""});B=a("\x3cinput/\x3e",{type:"hidden",name:"turboPageRequestId",value:""});x=a("\x3cinput/\x3e",{type:"hidden",name:"turboPageSessionId",value:""});m();q();w();h.registerOnClickCallback(y)}}});"use strict";e.when("A","turbo-configuration","turbo-checkout-state-handler","turbo-checkout-page-ready").register("turbo-checkout-page-filter",function(c,a,b){return{isCurrentViewTurboEligible:function(){return 1===c.$(b.getInitiateSelector()).length&&
1===c.$("#"+a.get(a.KEYS.PAGE_STATE_PARSING_ROOT_NODE_ID)).closest("form").length}}});"use strict";e.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-device-filter-check",function(c){c.get(c.KEYS.IS_DEVICE_FILTER_REQUIRED)||e.when("turbo-checkout-cacher","turbo-checkout-page-ready").register("turbo-checkout-device-filter",function(a){var b=function(){return!0};return{isDeviceTurboEligible:a.createCache(b),isSignInSupported:a.createCache(b)}})});"use strict";e.when("A","turbo-checkout-state-handler",
"turbo-checkout-device-filter","turbo-checkout-page-filter","turbo-checkout-weblab-allocation","turbo-checkout-page-ready").register("turbo-checkout-eligibility-aggregator",function(c,a,b,k,d){return{isTurboEligible:function(){return k.isCurrentViewTurboEligible()&&a.isProductTurboEligible()&&!d.isBuyNowOnly()},isSignInSupported:function(){return b.isSignInSupported()&&a.isSignInSupported()&&!d.isBuyNowOnly()},shouldAttemptPrefetch:function(){return b.isDeviceTurboEligible()&&!d.isBuyNowOnly()}}});
"use strict";e.when("A","turbo-filtered-callback-list","turbo-checkout-state-handler","turbo-checkout-ajax-wrapper","turbo-checkout-utils","turbo-checkout-urls","turbo-checkout-csm","turbo-checkout-eligibility-aggregator","turbo-shipping-speed","turbo-checkout-page-ready").register("turbo-checkout-content-loader",function(c,a,b,k,d,g,e,C,f){function p(a){e.logCount("turboCheckoutInitiate");x();J=!1;K=Date.now();n("Notifying loading callbacks");E="started";I.callAll();c.trigger("turbo:checkout:prefetch:onStart");
e.logCount("turboCheckoutPrefetchStart");a=g.buildInitiatePathWith(b.getPipelineType(),b.getFetchToken(),b.getSource(),b.isOneClick(),b.getExperimentName(),a,b.getRequestId(),b.getSessionId());t=k.loadWithJQXHR(a,{type:"POST",data:q(),headers:w(),xhr:m,success:y,error:A})}function q(){var a={"asin.1":b.getAsin(),"quantity.1":b.getQuantity(),"offerListing.1":b.getOfferListingId(),isAsync:1};b.hasSubscribeAndSave()&&(a["snsOptIn.1"]=!0===b.getSubscribeAndSaveOptIn()?1:0,a["snsOfferID.1"]=b.getSubscribeAndSaveOfferId(),
a["snsFrequency.1"]=b.getSubscribeAndSaveFrequency());b.getAddressId()&&(a.addressID=b.getAddressId());b.getHasWarranty()&&(a["asin.2"]=b.getWarrantyAsin(),a["offerListing.2"]=b.getWarrantyOfferListingId(),a["quantity.2"]=b.getWarrantyQuantity());var c=f.getShippingSpeedFromSwatches();c&&(a.shippingSpeed=c.shippingSpeed,a.shippingCutoff=c.cutoff,a.shippingGuarantee=c.guarantee);return a}function w(){var a={"x-amz-support-custom-signin":1};a["x-amz-turbo-checkout-dp-url"]=h.location.href;a["x-amz-checkout-entry-referer-url"]=
h.location.href;return a}function m(){var a=k.createXHRRequest();a.addEventListener("readystatechange",function(){if(J||!a.readyState||2>a.readyState)n("Ignoring ready state changed event because headers already received or missing xhr");else if(J=!0,e.logCount("turboCheckoutPrefetchHeadersReceived"),e.logCount("turboCheckoutPrefetchHeadersReceivedDuration",Date.now()-K),z(a)){n("Headers received: Turbo eligible");e.logCount("turboCheckoutTurboEligibleAfterCheetahChecks");var b=u(a),d=C.isSignInSupported();
b&&(n("Headers received: Signin required"),e.logCount("turboCheckoutSigninRequired"),d||(n("Sign-in required but it is disabled or not supported."),e.logCount("turboCheckoutSigninNotSupported")));if(d||!b)n("Notifying turbo eligible callbacks"),O.callAll(),c.trigger("turbo:checkout:prefetch:onTurboEligible");v(a)&&N.callAll(a.getResponseHeader("x-amzn-checkout-login-provider"))}else n("Headers received: Not turbo eligible"),M.callAll(),c.trigger("turbo:checkout:prefetch:onTurboIneligible")});return a}
function n(a){d.logDebug("turbo-checkout-content-loader",a)}function u(a){return a&&a.getResponseHeader("x-amzn-checkout-login-required")}function v(a){return C.isSignInSupported()&&u(a)}function y(a,b,g){e.logCount("turboCheckoutPrefetchEnd",Date.now()-K);t=null;b=z(g);var k,f=a&&a.match(D);if(f&&0<f.length)try{var h=G(f[0]);k=G.parseJSON(h.text())}catch(m){d.logError("Could not extract page state from cheetah page: "+m)}else n("Could not extract page state from response data");h=k&&"turbo"===k.pipelineType;
f=k&&k.currentPurchaseId&&0<String(k.currentPurchaseId).trim().length;h&&!f&&d.logError("No purchaseid provided, cannot show turbo");b&&h&&f?("started"!==E&&d.logError("turbo-checkout-content-loader","Error processing turbo available callbacks. Expected state to be started but was "+E),n("Notifying turbo available callbacks"),E="success",F.callAll(a,k),c.trigger("turbo:checkout:prefetch:onSuccess"),e.logCount("turboCheckoutTurboPrefetchSuccess")):b&&v(g)?n("Body received: Eligible and sign-in is supported and required."):
(n("Body received: No turbo page or not eligible: isTurboEligible: "+b+" isTurboPage: "+h+" hasPurchaseId: "+f),B(),e.logCount("turboCheckoutTurboPrefetchFail"))}function A(a){e.logCount("turboCheckoutPrefetchEnd");t=null;n("Error received");e.logCount("turboCheckoutTurboPrefetchError");B()}function z(a){return a&&a.getResponseHeader("x-amz-turbo-checkout-eligible")}function B(){"started"!==E&&d.logError("turbo-checkout-content-loader","Error processing turbo not available callbacks. Expected state to be started but was "+
E);n("Notifying error callbacks");E="error";L.callAll();c.trigger("turbo:checkout:prefetch:onError")}function x(){t&&t.abort&&(n("Aborting running request..."),t.abort())}var D=/<script.*data-a-state.*checkout:conductor:page.*>.*<\/script>/,G=c.$,t,E="stopped",K,J=!1,I=a.create("onStart"),F=a.create("onFinish"),L=a.create("onError"),O=a.create("onTurboEligible"),M=a.create("onTurboIneligible"),N=a.create("onSigninRequired");c.on("turbo:checkout:signInController:onDoSignIn",B);return{registerCallback:function(a){I.push(a);
F.push(a);L.push(a);O.push(a);N.push(a);M.push(a)},callInitiate:function(){n("Calling turbo initiate");p()},checkEligibility:function(){n("Calling turbo eligibility check only");p(!0)},abortCall:x,isSuccess:function(){return"success"===E},isError:function(){return"error"===E},isStarted:function(){return"started"===E}}});"use strict";e.when("A","jQuery","turbo-checkout-ref-tagger","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-history-manager",function(c,a,b,k){function d(){if(h.history.state&&
h.history.state.turboAction)return h.history.state.turboAction}a(h).bind("popstate.turbo",function(a){d();d()?(k.logDebug("turbo-checkout-history-manager","Trigger sheet open"),c.trigger("turbo:checkout:sheet:doOpen")):(k.logDebug("turbo-checkout-history-manager","Trigger sheet close"),c.trigger("turbo:checkout:sheet:doClose",{immediate:!1,reason:b.TAGS.BACK}))});return{sheetOpened:function(){d();d()||(k.logDebug("turbo-checkout-history-manager","Adding turbo history state"),h.history.pushState({turboAction:"popover"},
document.title+" Turbo open"))},sheetClosed:function(){d();d()&&(k.logDebug("turbo-checkout-history-manager","Removing turbo history state"),h.history.back())}}});"use strict";e.when("A","turbo-checkout-page-ready").register("turbo-base-visibility-manager",function(c){function a(){c.trigger("turbo:checkout:page:gone")}return{setup:function(){c.on("turbo:checkout:sheet:onNavigateAway",a)}}});e.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-mash-will-reappear-check",function(c){c.get(c.KEYS.USES_MASH_WILL_REAPPEAR)||
e.when("turbo-base-visibility-manager").register("turbo-checkout-page-visibility-manager",function(a){return a})});"use strict";e.when("A","jQuery","turbo-checkout-view-state","turbo-checkout-weblab-allocation","turbo-checkout-state-handler","turbo-checkout-content-loader","turbo-checkout-prefetch-timer","turbo-checkout-page-visibility-manager","turbo-checkout-counter","turbo-checkout-utils","turbo-checkout-eligibility-aggregator","turbo-checkout-auto-open","turbo-checkout-page-ready").register("turbo-checkout-prefetcher",
function(c,a,b,k,d,g,e,h,f,p,q,w){function m(a){var b=u;u=a;p.logDebug("turbo-checkout-prefetcher","Transitioning from "+b.name+" to "+a.name);if(b.onExit)b.onExit(a.name);if(a.onEnter)a.onEnter(b.name);c.trigger("turbo:checkout:prefetcher:state:"+a.name);c.trigger("turbo:checkout:prefetcher:state",a.name)}var n,u,v=function(){var a=g.isError(),b=!q.isTurboEligible(),c=e.isTimeout(),d=0===n;p.logDebug("turbo-checkout-prefetcher","Test is data stale: isStaleWhenCheetahReturnsError: "+a+" isStaleWhenProductNotEligiblie: "+
b+" isStaleWhenTimeoutOccurs: "+c+" isStaleWhenNoMorePrefetchesAvailable: "+d);return a||b||c||d},y=function(){var a=q.isTurboEligible()&&!e.isTimeout()&&0<n;p.logDebug("turbo-checkout-prefetcher","Test should prefetch: eligibilityAggregator.isTurboEligible(): "+q.isTurboEligible()+" !timer.isTimeout(): "+!e.isTimeout()+" _prefetchesAvailable: "+n);return a},A={name:"start",onEvent:function(a){q.shouldAttemptPrefetch()?"controller:onPageLoaded"===a&&m(z):m(D)},onExit:function(){d.startMonitoringPage()}},
z={name:"dataStale",onEvent:function(a){"page:gone"!==a&&"prefetch:onError"!==a&&"sheet:afterClose"!==a&&y()&&m(B)}},B={name:"dataPrefetching",onEnter:function(){f.incrementPrefetchCounter();k.isPrefetch()&&d.getPrefetchEnabled()||d.isShadowCallsOnly()||b.isOpeningOrOpen()||w.isAutoOpenReadyToBeOpened()?g.callInitiate():g.checkEligibility();--n},onEvent:function(a){if("page:gone"===a)m(z);else{var b=g.isSuccess()&&k.isPrefetch(),c=g.isSuccess()&&k.isIntelligentPrefetch(),d=g.isSuccess()&&k.isNoPrefetch();
p.logDebug("turbo-checkout-prefetcher","Test is data fresh: isFreshWhenPrefetchResultOKInT1: "+b+" isFreshWhenPrefetchResultOKInT2: "+c);b||c||d?m(x):v()?m(z):"product:onChange"===a&&y()&&m(B)}},onExit:function(a){"dataFresh"!==a&&g.abortCall()}},x={name:"dataFresh",onEnter:function(){e.startTimer()},onEvent:function(a){"page:gone"===a?m(z):v()?m(z):(b.isClosed()||"product:onChange"===a)&&y()&&m(B)},onExit:function(){e.resetTimer()}},D={name:"end"},G="controller:onPageLoaded sheet:beforeOpen sheet:afterClose product:onChange prefetch:onSuccess prefetch:onError timer:onTimeout page:gone page:reappear".split(" "),
t={"sheet:beforeOpen":function(){n=10}};return{setup:function(){n=10;u=A;a.each(G,function(a,b){var d=t[b];c.on("turbo:checkout:"+b,function(a){p.logDebug("turbo-checkout-prefetcher","Processing "+b);d&&d();if(u.onEvent)u.onEvent(b)})})},getState:function(){return u.name}}});"use strict";e.when("A","turbo-signin-adapter","turbo-checkout-content-loader","turbo-checkout-buy-now-button","turbo-checkout-csm","turbo-checkout-weblab-allocation","turbo-checkout-utils","turbo-callback-list","turbo-checkout-state-handler",
"turbo-checkout-eligible-state","turbo-checkout-page-ready").register("turbo-checkout-signin-controller",function(c,a,b,e,d,g,h,C,f,p){function q(){y=!1}function w(a){y=!0;A=a;d.logCount("turboCheckoutSigninRequired")}function m(){var b=y&&p.canShow();b&&(h.logDebug("turbo-checkout-signin-controller","Showing sign in dialog"),d.logCount("turboCheckoutSigninPopup"),a.show(A,n,u),c.trigger("turbo:checkout:signInController:onDoSignIn"));return b}function n(){h.logDebug("turbo-checkout-signin-controller",
"Signin success");d.logCount("turboCheckoutSigninSuccess");v.callAll()}function u(){h.logDebug("turbo-checkout-signin-controller","Signin failed");d.logCount("turboCheckoutSigninFailed")}var v=C.create(),y=!1,A;return{setup:function(){b.registerCallback({onStart:q,onSigninRequired:w});e.registerOnClickCallback(m)},registerCallback:v.push}});"use strict";e.when("A","turbo-configuration","turbo-callback-list","turbo-filtered-callback-list","turbo-checkout-page-ready").register("turbo-checkout-iframe",
function(c,a,b,e){function d(){return c.$("#"+f)}function g(){if(!(0<d().length))throw"Attempted to read / write the iFrame without it being in the DOM. This would result in an undefined iFrame document.";var a=d()[0];return a.contentDocument||a.contentWindow.document}function h(){if(0<d().length)throw"Attempted to insert multiple Turbo Checkout iFrames";}function C(){return c.$("\x3ciframe/\x3e",{id:f,src:"about:blank",scrolling:"no"})}var f=a.get(a.KEYS.IFRAME_ID),p=e.create("beforeFramePopulated"),
q=e.create("afterFramePopulated"),w=b.create();c.on("turbo:checkout:embedded:page:ready",function(){c.$(d()[0].contentWindow).ready(function(){w.callAll(d())})});return{write:function(a){p.callAll();a+='\x3cscript\x3ewindow.parent.P.now("turbo-checkout-controller").execute(function (controller) { controller.frameHtmlRendered(); });\x3c/script\x3e';if("string"!==typeof a)throw"Attempted to write non-string value to iFrame. typeof \x3d "+typeof a;var b=g();b.open();b.write(a);b.close();q.callAll(d()[0])},
remove:function(){d().remove()},appendTo:function(a){h();a.append(C())},insertInto:function(a){h();a.html(C())},hasContent:function(){var a=0<d().length&&g();return a&&(a.body.hasChildNodes()||a.head.hasChildNodes())},registerCallbacks:function(a){p.push(a);q.push(a)},onContentLoaded:function(a){w.push(a)}}});"use strict";e.when("A","turbo-checkout-page-ready").register("turbo-checkout-view-state",function(c){function a(a,b){return function(){return d===a||d===b}}function b(a){return function(){d=
a;e.apply(e,arguments)}}function e(a,b){a&&"string"===typeof a&&c.trigger(a,b)}var d=0;return{isClosed:a(0),isClosing:a(1),isOpen:a(2),isOpening:a(3),isClosingOrClosed:a(1,0),isOpeningOrOpen:a(3,2),setToOpen:b(2),setToOpening:b(3),setToClosed:b(0),setToClosing:b(1)}});"use strict";e.when("A","turbo-view-adapter","turbo-checkout-view-state","turbo-checkout-eligible-state","turbo-checkout-content-loader","turbo-checkout-utils","turbo-checkout-weblab-allocation","turbo-checkout-weblab-trigger","turbo-checkout-csm",
"turbo-checkout-state-handler","turbo-checkout-device-filter","turbo-checkout-ajax-wrapper","turbo-checkout-page-visibility-manager","turbo-checkout-counter","turbo-checkout-prefetcher","turbo-checkout-prefetch-timer","turbo-checkout-buy-now-button","turbo-checkout-signin-controller","turbo-checkout-auto-open","turbo-checkout-urls","turbo-checkout-page-ready").register("turbo-checkout-controller",function(c,a,b,e,d,g,h,C,f,p,q,w,m,n,u,v,y,A,z,B){function x(a,b){g.logDebug("turbo-checkout-controller",
a,b)}function D(b,c){F();b||a.close({reason:c})}function G(){x("Handling signin success");E()}function t(){x("Handling buy now button click");E();return!0}function E(){X=setTimeout(K,2E4);P=f.createScope();f.markClick(P);Q="loading";U=!1;v.checkTimeout();n.incrementSheetOpenedCounter();a.show()}function K(){f.logCount("turboCheckoutContenLoadTimeout")}function J(){F();a.removeContent()}function I(){F()}function F(){e.canShow()?(x("Registering with buy now button"),c.trigger("turbo:checkout:buyNowEnabled"),
y.registerOnClickCallback(t)):(x("Unregistering from buy now button"),c.trigger("turbo:checkout:buyNowDisabled"),y.deregisterOnClickCallback(t))}function L(b,c){f.logCount("turboCheckoutPrefetchSuccess");b&&(h.isControl()||p.isShadowCallsOnly()||h.isBuyNowOnly())&&(x("Received content in control: "+b.substring(0,255)),f.logCount("turboCheckoutControlContentReceived"));V=c;a.setContent(b);F()}function O(){F();b.isOpeningOrOpen()&&(f.logCount("turboCheckoutYieldNewPurchase"),a.closeImmediatelyThenExecute(y.executeOriginalBuyNowAction))}
function M(){clearTimeout(X);Q="unknown";!H||H.isResolved()||H.isRejected()||(x("Initiate confirm called for "+V.currentPurchaseId+" with existing confirm still executing. Aborting"),f.logCount("turboCheckoutConfirmPending"),H._supersedByNewPurchase=!0,H.abort());N()}function N(){f.logCount("turboCheckoutConfirm");var b=P,c=V.currentPurchaseId,d=B.buildConfirmPathWith(p.getPipelineType(),p.getFetchToken(),p.getSource(),h.getExperimentName(),p.isOneClick(),p.getRequestId(),p.getSessionId());H=w.loadWithJQXHR(d,
{type:"POST",data:{pid:c},success:function(a,c,d){a=d.getResponseHeader("x-amz-checkout-requestid");f.setRequestId(b,a)},error:function(b,d,e){"abort"===d?f.logCount("turboCheckoutConfirmAborted"):f.logCount("turboCheckoutConfirmFailed");b._supersedByNewPurchase||(g.logError("Issue confirming turbo initiate prefetch for pid "+c+": "+e+", "+d),f.logCount("turboCheckoutYieldNewPurchase"),a.closeImmediatelyThenExecute(y.executeOriginalBuyNowAction))}})}function R(){f.markFramePopulated(P)}function T(a,
b){var c=function(){f.markCriticalFeature(a);b.off("checkout:afterReload",c)};b.on("checkout:afterReload",c)}function l(a,b,d){b.on("checkout:beforeReload",function(d){c.trigger("turbo:checkout:embedded:page:beforeReload",a,b,d)});b.on("checkout:reload",function(d){c.trigger("turbo:checkout:embedded:page:reload",a,b,d)});b.on("checkout:afterReload",function(d){c.trigger("turbo:checkout:embedded:page:afterReload",a,b,d)});b.on("turbo:checkout:animation:start",function(){c.trigger("turbo:checkout:embedded:page:animation:start")});
c.on("turbo:checkout:embedded:page:showSpinner",function(){d.showSpinner()})}function S(a){c.trigger("turbo:checkout:embedded:page:showSpinner");H.done(a)}function Y(a,b,c){Q=c;U=!1}function Z(){U=!0}function aa(a){a&&a.doNotLog||(a&&!a.doNotLog?W(Q,a.reason):W(Q,!1));Q="closed"}function W(a,b){var c=B.buildLogPageHitPathWith(U?a+"2":a,b);x("Logging page hit from "+a+" to detail reason "+b);w.load(c,{method:"POST",params:{pageType:"detail",referrer:a},timeout:4E3})}function ba(){b.isOpeningOrOpen()&&
f.logCount("turboCheckoutProductChangedWhileOpening")}var P,Q,V,U,X,H;return{pageLoaded:function(){var b="wl:"+h.getAllocation();h.isNonPrimeWeblab()&&(b+=".nonPrime");f.addCounterExtraSuffix(b);f.addCounterExtraSuffix(h.getExperimentName()+":"+h.getAllocation());q.isDeviceTurboEligible()&&(e.setup(),e.registerStateChangeCallback(D),m.setup(),d.registerCallback({onStart:J,onTurboEligible:I,onFinish:L,onError:O}),C.setup(),A.setup(),A.registerCallback(G),a.registerCallbacks({beforeFramePopulated:M,
afterFramePopulated:R}),p.registerCallback(ba),c.on("turbo:checkout:sheet:beforeClose",aa),c.on("turbo:checkout:embedded:page:beforeReload",Y),c.on("turbo:checkout:embedded:page:animation:start",Z),z.setup(y.executeTurboBuyNowAction)&&F(),u.setup(),c.trigger("turbo:checkout:controller:onPageLoaded"))},loadFullscreen:function(b,c){function d(){b=g.createFQDN(b);"thankyou"===c?(f.logCount("turboCheckoutYieldTYP"),a.closeAndNavigate(b)):(f.logCount("turboCheckoutYield"),a.closeToFullscreen(b))}!H||H.isResolved()||
H.isRejected()?d():(f.logCount("turboCheckoutWaitYield"),S(d))},frameContentReady:function(a,b,d){c.trigger("turbo:checkout:embedded:page:ready",a,b);T(P,b);l(a,b,d)},frameHtmlRendered:function(){f.markFrameHtmlRendered(P)},updateBounds:function(b){a.updateBounds(b)}}});"use strict";e.when("turbo-checkout-page-load-spinner","turbo-checkout-controller","turbo-checkout-csm","turbo-checkout-page-ready").register("turbo-checkout-startup",function(c,a,b){c.removePageLoadSpinner();b.logCount("turboCheckoutControllerPageLoaded");
a.pageLoaded()});"use strict";e.when("cf").register("turbo-checkout-page-ready",function(){h.ue&&h.ue.count&&"undefined"!==typeof h.ue_t0&&h.ue.count("turboCheckoutPageReady",Date.now()-h.ue_t0)});"use strict";e.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-page-ready").register("turbo-checkout-authportal-return-query",function(c,a,b,e){function d(a){b.logDebug("turbo-checkout-authportal-return-query",a)}function g(a){a=a.match(w);a=c.reduce(a,
function(a,b){var c=b.split("\x3d");b=c[0];c=c[1]||"";a.hasOwnProperty(b)&&r("Duplicate query key detected @ key \x3d  "+b+" -- Redirect URL will contain only last value read!");a[b]=c;return a},{});return"?"+c.$.param(a)}function r(a){b.logWarning(a,"turbo-checkout-authportal-return-query")}function C(a){return!!a.match("trb_auth\x3d1")}function f(c){if(C(c)){c=((c||"").match(m)||[])[1]||"";var d=e.getSessionId();b.isNonEmptyString(c)||a.logCount("turboCheckoutPostAuthEmptySessionParameter");b.isNonEmptyString(d)||
a.logCount("turboCheckoutPostAuthEmptySessionPageState");b.isNonEmptyString(c)&&b.isNonEmptyString(d)&&c!==d&&(r("Turbo Session Flip Detected. Post authentication sessionId \x3d "+d+", Expected \x3d "+c),a.logCount("turboCheckoutPostAuthSessionFlip"))}}var p=/&?(openid|aToken|serial)[^&]*/g,q=/&?trb_(open|auth|qty|warrAsin|snsOptIn|snsFreq|snsOffer|sid)=[^&]*/g,w=/[^(=\?&)]+[^&]*/g,m=/&?trb_sid=([^&]*)/;f(h.location.search);return{buildFrom:function(a){d("Initial Query \x3d "+a);a=(a||"?").replace(p,
"");a=a.replace(q,"");a=g(a);a+="\x26trb_auth\x3d1\x26trb_open\x3d1";var b=e.getQuantity();a+=1<b?"\x26trb_qty\x3d"+b:"";b=e.getWarrantyAsin();a+=b?"\x26trb_warrAsin\x3d"+b:"";var b=e.getSubscribeAndSaveOptIn()?"1":"0",c=e.getSubscribeAndSaveFrequency(),f=e.getSubscribeAndSaveOfferId();a+="1"===b&&c&&f?"\x26trb_snsOptIn\x3d"+b+"\x26trb_snsFreq\x3d"+c+"\x26trb_snsOffer\x3d"+f:"";b=e.getSessionId();a+=0<b.length?"\x26trb_sid\x3d"+b:"";a=a.replace(/\?+&*/,"?").replace(/\?*&+\?*&*/g,"\x26");d("Final Query \x3d "+
a);return a},isReturningFromAuthPortal:C,validateSession:f}});"use strict";e.when("turbo-checkout-csm","turbo-checkout-authportal-return-query","turbo-checkout-page-ready").register("turbo-checkout-browser-signin",function(c,a){function b(){var a=h.location.search.match(e)?"turboCheckoutSigninSuccess":"turboCheckoutSigninFailed";c.logCount(a)}var e=/openid\.mode=id_res/,d=/(\/ref=[^/]*\/?$|\/?$)/;a.isReturningFromAuthPortal(h.location.search)&&(c.logCount("turboCheckoutAuthPortalReturn"),b());return{show:function(b){b=
b+(-1===b.indexOf("?")?"?":"\x26")+"openid.return_to\x3d";var e;e=a.buildFrom(h.location.search);e=encodeURIComponent("https://"+h.location.hostname+h.location.pathname.replace(d,"/ref\x3dtrb_chk_auth")+e);b+=e;c.logCount("turboCheckoutSignInUrlSize",b.length);h.location.href=b}}});"use strict";e.when("turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-page-ready").register("turbo-checkout-strings",function(c,a){function b(b){return function(){var d=a.getStrings()[b];if(d)return d;
c.logDebug("turbo-checkout-strings",'String for key "'+b+'" is undefined! Returning empty string.');return""}}return{getHeaderText:b("TURBO_CHECKOUT_HEADER"),getLoadingText:b("TURBO_LOADING_TEXT")}});"use strict";e.when("jQuery","turbo-checkout-page-ready").register("turbo-checkout-loading-spinner",function(c){function a(){return c("#turbo-loading-container")}function b(a){var b=c("\x3cdiv\x3e",{id:"turbo-loading-content"}).append(c("\x3cdiv\x3e",{id:"turbo-loading-spinner","class":"a-spinner a-spinner-medium"}));
"string"===typeof a&&a&&b.append(c("\x3cdiv\x3e",{id:"turbo-loading-text",text:a}));return b}return{create:function(a){return c("\x3cdiv\x3e",{id:"turbo-loading-container"}).append(b(a))},get:a,show:function(){a().addClass("turbo-checkout-shown")}}});"use strict";e.when("A","turbo-checkout-page-ready").register("turbo-shipping-speed",function(c){return{getShippingSpeedFromSwatches:function(){var a=c.$('input[name\x3d"oneClickDeliveryOptionName"]:checked').val(),b=c.$('input[name\x3d"oneClickDeliveryOptionPromiseCutoffTime"]:checked').val(),
e=c.$('input[name\x3d"oneClickDeliveryOptionGuarantee"]:checked').val();if(void 0!==a&&void 0!==b&&void 0!==e)return{shippingSpeed:a,cutoff:b,guarantee:e}}}});"use strict";e.when("A","turbo-checkout-utils","turbo-callback-list","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkbox-exclusion-listener",function(c,a,b,e){function d(){g(function(a){C("Listening for change events on:",a);a.unbind("change",f);a.bind("change",f);h(a)})}function g(a){var b=n;n=!1;for(var c=0;c<q.length;c++){var d=
w(q[c]).find("input[type\x3dcheckbox]");a(d)}b!==n&&(C("Exclusion checkbox state changed"),m.callAll("exclusionCheckbox"))}function h(a){var b;if(!(b=n)){b=!1;for(var c=0;c<a.length&&!b;c++){var d=w(a[c]);(b=d.prop("checked"))&&C("Exclusion checkbox is checked",d)}}n=b}function C(b,c){a.logDebug("turbo-checkbox-exclusion-listener",b,c)}function f(){g(h)}var p=e.get(e.KEYS.TWISTER_PAGE_UPDATE_AUI_EVENT),q=e.get(e.KEYS.CHECKBOX_EXCLUSION_ROOT_NODES),w=c.$,m=b.create(),n=!1;d();c.on(p,d);return{onStateChange:function(a){m.push(a)},
isAnyCheckboxChecked:function(){return n}}});"use strict";e.register("turbo-function-adapter",function(){return{adapt:function(c){return function(){if("function"!==typeof c)throw"Parameter 'property' is invalid. Expected a function but got "+typeof c;return c.apply(c,arguments)}}}});"use strict";e.when("turbo-configuration","turbo-function-adapter").execute("turbo-signin-adapter-factory",function(c,a){e.when(c.get(c.KEYS.SHOW_SIGN_IN_INTERFACE)).register("turbo-signin-adapter",function(b){return{show:a.adapt(b.show)}})});
"use strict";e.when("turbo-configuration","turbo-function-adapter").execute("turbo-view-adapter-factory",function(c,a){e.when(c.get(c.KEYS.VIEW_ADAPTER)).register("turbo-view-adapter",function(b){return{registerCallbacks:a.adapt(b.registerCallbacks),close:a.adapt(b.close),show:a.adapt(b.show),removeContent:a.adapt(b.removeContent),setContent:a.adapt(b.setContent),closeImmediatelyThenExecute:a.adapt(b.closeImmediatelyThenExecute),closeAndNavigate:a.adapt(b.closeAndNavigate),closeToFullscreen:a.adapt(b.closeToFullscreen),
updateBounds:a.adapt(b.updateBounds)}})})});
/* ******** */
(function(d){var m=window.AmazonUIPageJS||window.P,t=m._namespace||m.attributeErrors,a=t?t("TurboCheckoutDesktopAssets",""):m;a.guardFatal?a.guardFatal(d)(a,window):a.execute(function(){d(a,window)})})(function(d,m,t){d.when("turbo-configuration-keys","turbo-checkout-page-ready").register("turbo-device-configuration",function(a){var f;f||(f={},f[a.SHOW_SIGN_IN_INTERFACE]="turbo-checkout-browser-signin",f[a.EXTEND_ELIGIBLE_STATE]=!1,f[a.IS_DEVICE_FILTER_REQUIRED]=!0,f[a.VIEW_ADAPTER]="turbo-checkout-modal",
f[a.WARRANTY_CHECKBOX_INPUT_SELECTOR]="input[id^\x3dmbb-offeringID-]",f[a.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR]=".abbListItem",f[a.WARRANTY_OFFER_INPUT_SELECTOR]="input[id^\x3dmbb-offeringID-]:checked",f[a.WARRANTY_ASIN_INPUT_NAME]="asin");return f});"use strict";d.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-checkout-device-variant","turbo-checkout-page-ready").register("turbo-checkout-device-filter",function(a,f,g,h,d){function k(a){var b=!1;this.countOnce=
function(){b||(f.logCount(a),b=!0)}}function e(a){g.logDebug("turbo-checkout-device-filter",a)}var m="turboCheckoutDisabledDesktopAuiVariant"+d,n,b,p,q;return{isDeviceTurboEligible:function(){n=n||new k("Desktop"===d?"turboCheckoutDesktopAuiVariantEligible":m);var c;(c=b)||(c=g.isInternetExplorer()?"turboCheckoutDisabledDesktopIE":g.isIPad()?"turboCheckoutDisabledDesktopIPad":g.isIPhone()?"turboCheckoutDisabledDesktopIPhone":g.isAndroid()?"turboCheckoutDisabledDesktopAndroid":"turboCheckoutDesktopUserAgentEligible",
c=new k(c));b=c;p=p||new k("turboCheckoutDisabledDesktopTouch");q=q||new k("turboCheckoutDisabledDesktopOrientation");if(c=a.capabilities.touch)p.countOnce(),e("Touch enabled device. Turbo will NOT show");if(c=!c){if(c=a.capabilities.orientation)q.countOnce(),e("Orientation enabled device. Turbo will NOT show");c=!c}c&&(n.countOnce(),"Desktop"===d||e("Aui device variant is NOT Desktop. Turbo will NOT show. Variant is "+d),c="Desktop"===d);c&&(b.countOnce(),c=!g.isInternetExplorer()&&!g.isIPad()&&
!g.isAndroid()&&!g.isIPhone());return c},isSignInSupported:function(){return h.get(h.KEYS.IS_SIGN_IN_SUPPORTED)}}});"use strict";d.when("turbo-checkout-page-ready").execute(function(){d.declare("turbo-checkout-device-variant","Desktop")});"use strict";d.when("A","a-modal","turbo-checkout-utils","turbo-checkout-iframe","turbo-checkout-base-view","turbo-checkout-loading-spinner","turbo-checkout-view-state","turbo-checkout-ref-tagger","turbo-checkout-strings","turbo-checkout-page-ready").register("turbo-checkout-modal",
function(a,f,d,h,t,k,e,y,n){function b(a){d.logDebug("turbo-checkout-modal",a)}function p(){!z()||e.isOpeningOrOpen()?b("show() suppressed. View is null or undefined or view state is opening or open"):(e.setToOpening(),v().show())}function q(){u&&e.isOpeningOrOpen()&&(h.appendTo(w()),h.write(u))}function c(){h.remove();if(0<w().length)b("Modal frame is in DOM. Inserting Spinner"),w().height("").html(k.create(n.getLoadingText())).append(A()),r("#turbo-checkout-modal-header").text(n.getHeaderText());
else{b("Modal frame is NOT in DOM. Resetting Modal");var a={inlineContent:r("\x3cdiv\x3e",{id:"turbo-checkout-frame"}).html(k.create(n.getLoadingText())).append(A()).prop("outerHTML"),padding:"none",dataStrategy:"inline",header:'\x3cdiv id\x3d"turbo-checkout-modal-header"\x3e'+n.getHeaderText()+"\x3c/div\x3e"};v().update(a)}}function v(){return B=B||f.get(r("#turbo-checkout-modal"))}function A(){return r("\x3cscript/\x3e",{type:"text/javascript",html:'P.when("A").execute(function turboFrameReady(A) { A.trigger("turbo:checkout:frame:ready"); });'})}
function w(){return r("#turbo-checkout-frame")}function x(a){!z()||e.isClosingOrClosed()?b("close() suppressed. View is undefined or null or view state is closing or closed"):(l=a||l,l.notify=!0===l.notify||void 0===l.notify,e.setToClosing(),v().hide())}function z(){var a=v();a||b("Modal is undefined or null. Modal \x3d "+a);return a?!0:!1}function C(b){r(document.body).unbind("click");b();a.trigger("turbo:checkout:sheet:onNavigateAway");x({notify:!1,immediate:!0,doNotLog:!0})}function D(a){b("onDismiss");
l={notify:!0,reason:a}}var r=a.$,l={},u,B,E=new (t.extend())("#turbo-checkout-frame");h.onContentLoaded(function(b){k.get().remove();b.addClass("turbo-checkout-displayed");a.delay(function(){b.addClass("turbo-checkout-shown")})});a.on("a:popover:dismiss:turbo",function(){b("onClick_X");D(y.TAGS.TOUCH_X)});a.declarative("a-popover-floating-close","click",function(){b("onDimmerClicked");D(y.TAGS.TOUCH)});a.on("a:popover:beforeShow:turbo",function(){b("onBeforeOpen");e.setToOpening("turbo:checkout:sheet:beforeOpen");
c()});a.on("a:popover:show:turbo",function(){b("onOpen");e.setToOpen();u||k.show()});a.on("a:popover:beforeHide:turbo",function(){b("onBeforeClose");e.setToClosing.apply(e,!0===l.notify?["turbo:checkout:sheet:beforeClose",l]:void 0);w().removeClass("turbo-checkout-shown")});a.on("a:popover:hide:turbo",function(){b("onClose");e.setToClosed("turbo:checkout:sheet:afterClose");l={}});a.on("a:popover:afterHide:turbo",c);a.on("turbo:checkout:sheet:doOpen",p);a.on("turbo:checkout:sheet:doClose",x);a.on("turbo:checkout:frame:ready",
q);return{show:p,setContent:function(a){u=a;b("iFrame content saved");e.isOpeningOrOpen()?q():(b("setFrameContent NOT called"),b("viewState is not opening? isOpeningOrOpen \x3d "+e.isOpeningOrOpen()),b("iFrame already has content? iFrame.hasContent \x3d "+h.hasContent()))},removeContent:function(){u="";c()},close:x,closeToFullscreen:function(a){C(function(){m.location.href=a})},closeImmediatelyThenExecute:C,closeAndNavigate:function(b){m.location.href=b;a.trigger("turbo:checkout:sheet:onNavigateAway");
x({notify:!1,doNotLog:!0})},registerCallbacks:h.registerCallbacks,updateBounds:function(a){E.updateBounds(a)}}})});
/* ******** */
(function(c){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,a=e?e("DetailPageTurboCheckoutDesktopAssets",""):d;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,d,e){c.when("turbo-configuration-keys","turbo-checkout-experiment-treatment","turbo-checkout-not-prime-treatment","turbo-checkout-page-ready").register("turbo-client-configuration",function(a,c,d){var b;b||(b={},b[a.EXPERIMENT_WEBLAB]="RCX_CHECKOUT_TURBO_DESKTOP_PRIME_87783",b[a.EXPERIMENT_TREATMENT]=
c,b[a.NON_PRIME_EXPERIMENT_WEBLAB]="RCX_CHECKOUT_TURBO_DESKTOP_NONPRIME_87784",b[a.NON_PRIME_EXPERIMENT_TREATMENT]=d,b[a.BUY_NOW_ONLY_TREATMENT]="T1",b[a.NO_PREFETCH_TREATMENT]=/T[2-9]/,b[a.QUANTITY_SELECT_SELECTOR]="#quantity",b[a.QUANTITY_UPDATED_AUI_EVENT]="a:dropdown:quantity:select",b[a.ADDRESS_INPUT_SELECTORS]=["#unifiedLocation1ClickAddress","#addToCart input[name\x3d'dropdown-selection']","#unifiedLocationAddress","input[name\x3d'dropdown-selection']"],b[a.CONFLICTING_INITIATE_LISTENERS]=
["click.siatc"],b[a.VAS_CHANGE_EVENTS]=["vas:remove-service-asin-buybox-event","vas:add-service-asin-buybox-event"],b[a.VAS_CHECKBOX_SELCTOR]="#ppdb-add-service-checkbox");return b});"use strict";c.when("turbo-checkout-page-ready").execute(function(){c.declare("turbo-checkout-experiment-treatment","C")});"use strict";c.when("turbo-checkout-page-ready").execute(function(){c.declare("turbo-checkout-not-prime-treatment","T1")})});
/* ******** */
